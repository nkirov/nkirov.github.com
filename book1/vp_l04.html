<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>vp_l04</title>
</head>
<body>

<hr width="100%">
<center>
<p><b><font size="+1">4. Обекти</font></b></p>
</center>

<div align="right">
<b><i><font size="-1"> </font></i></b>
<br><b><i><font size="-1">"Съществуват обекти, които не  могат да бъдат</font></i></b>
</div>

<div align="right">
<b><i><font size="-1">изчерпателно описани или обяснени.</font></i></b>
<br><b><i><font size="-1">При теолозите такъв обект е Бог."</font></i></b>
<br><b><i><font size="-1">Станислав Лем</font></i></b>
<br><b><i><font size="-1"> </font></i></b>
</div>
<img src="bullet.gif" height="18" width="20"> Конструиране на обекти.
<br>    Обектът е стойност, която може да се създава, запазва
и обработва със средствата на езика за програмиране. Обект = променлива
или константа, като понятието обект се използва за "по-големи" променливи
или константи. Например
<br><b><tt><font color="#006600"> int k = 1;              
/* </font><font color="#009900">k е обект, по-добре променлива</font><font color="#006600">
*/</font></tt></b>
<br><b><tt><font color="#006600"> string greeting = "Hello"; /* </font><font color="#009900">greeting
и "Hello" са обекти </font><font color="#006600">*/</font></tt></b>
<br> * Тип данни клас. Класовете се дефинират от програмиста. Класът
<b><tt>Time
</tt></b>е
дефиниран от К. Хорстман в [1]. Обект от този клас ще съхранява момент
от времето - час, минути, секунди.
<br> * Конструиране на обект.<b><tt> Time(23,59,59)</tt></b> означава
23 часа, 59 минути и 59 секунди. Това е обект-константа, аналогичен на
числовите константи (числата) и низовете, напр. "Hello".
<br> * Включване на файл с дефиниция на класа:
<br><b><tt>    <font color="#006600">#include "ccc_time.cpp"</font></tt></b>
<br> * Дефиниране на променлива (обект) от тип <b><tt>Time</tt></b>:
<br>        <b><tt><font color="#006600">Time
day_end = Time(23,59,59);</font></tt></b>
<br>или по-кратко (съкратен запис):
<br><b><tt>    <font color="#006600">Time day_end(23,59,59);</font></tt></b>
<br>Името на променливата е <b><tt>day_end,</tt></b> типът на променливата
е <b><tt>Time </tt></b>и началната стойност на променливата е <b><tt>Time(23,59,59).</tt></b>
<br> * Конструктор и параметри на конструктора.
<br>   За създаване на обекти от клас се използва функция, наречена
конструктор на класа:
<br>-- името на конструктора съвпада с името на класа;
<br>-- параметрите на конструктора са зададени в дефиницията на класа.
<br> * Конструиране по подразбиране.
<br>   Задаване на текущото време по компютърния часовник (в
момента на изпълнение на програмата):
<br>      <b><font color="#006600"> <tt>Time
now = Time();</tt></font></b>
<br>или съкратено:
<br><b><tt>   <font color="#006600">Time now;</font></tt></b>
<br>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20"> Използване на обекти.
<br>* Член-функции на класа:
<br><b><tt><font color="#006600">   Time wake_up(7,0,0);      
/* </font><font color="#009900">7:00:00</font><font color="#006600"> */</font></tt></b>
<br><b><tt><font color="#006600">   wake_up.add_seconds(1000);
/* </font><font color="#009900">7:16:40</font><font color="#006600"> */</font></tt></b>
<br>Добавя 1000 секунди към момента от време, записан в обекта <b><tt><font color="#006600">wake_up.</font></tt></b>
<br> * Функции на класа <b><tt>Time:</tt></b>
<br> 
<table border cellspacing="0" cellpadding="4" width="100%">
<tr>
<td> Име</td>

<td> Действие</td>
</tr>

<tr>
<td><b><tt>Time()</tt></b></td>

<td>Конструира обект, показващ текущото време</td>
</tr>

<tr>
<td><b><tt>Time(h,m,s)</tt></b></td>

<td>Конструира обект, показващ <b><tt>h</tt></b> часа,<b> <tt>m
</tt></b>минути
и<b> <tt>s</tt> </b>секунди</td>
</tr>

<tr>
<td><b><tt>t.get_seconds()</tt></b></td>

<td>Връща броя на секундите в<tt><b> t</b>.</tt>
</td>
</tr>

<tr>
<td><b><tt>t.get_minutes()</tt></b></td>

<td>Връща броя на минутите в<tt><b> t</b>.</tt>
</td>
</tr>

<tr>
<td><b><tt>t.get_hours()</tt></b></td>

<td>Връща броя на часовете в<tt> <b>t</b>.</tt>
</td>
</tr>

<tr>
<td><b><tt>t.add_seconds(n)</tt></b></td>

<td>Премества <b><tt>t</tt> </b>с<b> <tt>n</tt> </b>секунди напред.</td>
</tr>

<tr>
<td nowrap><b><tt>t.seconds_from(t2) </tt></b></td>

<td>Пресмята броя на секундите между <b><tt>t</tt></b>  и <b><tt>t2.</tt></b>
</td>
</tr>
</table>

<p><font color="#000000">Колко секунди остават до края на деня?</font>
<br><b><tt><font color="#000099">// time2.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<br><b><tt><font color="#000099">#include "ccc_time.cpp"</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ Time now;</font></tt></b>
<br><b><tt><font color="#000099">  Time day_end(23, 59, 59);</font></tt></b>
<br><b><tt><font color="#000099">  long seconds_left = day_end.seconds_from(now);</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; "There are " &lt;&lt;
seconds_left</font></tt></b>
<br><b><tt><font color="#000099">      &lt;&lt;
" seconds left in this day.\n";</font></tt></b>
<br><b><tt><font color="#000099">  return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td><b><tt><font color="#990000">There are 44219 seconds left in this day.</font></tt></b></td>
</tr>
</table>

<p>     Тъй като денонощието съдържа <b><tt>24x3600
= 86400</tt></b> секунди, член-функцията <font color="#000000"><b><tt>seconds_from
</tt></b>връща
стойност от тип </font><b><tt>long.</tt></b>
<br>
</p>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20">Обекти от реалния свят.
<br>    Обект от тип <font color="#000000"><b><tt>Employee</tt></b>
(служител) ще съхранява име на служител и неговата (годишна) заплата. В
програмата се създава обект <b><tt>harry </tt></b>с начална заплата 45000
и след това му се повишава заплатата с още 3000.</font>
<br><b><tt><font color="#000099">// employee.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<br><b><tt><font color="#000099">#include "ccc_empl.cpp"</font></tt></b>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  Employee harry("Hacker, Harry",
45000.00);</font></tt></b>
<br><b><tt><font color="#000099">   double new_salary = harry.get_salary()
+ 3000;</font></tt></b>
<br><b><tt><font color="#000099">   harry.set_salary(new_salary);</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Name: " &lt;&lt;
harry.get_name() &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Salary: "
&lt;&lt; harry.get_salary() &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cols="1" width="100%">
<tr>
<td>
<b><tt><font color="#990000">Name: Hacker, Harry</font></tt></b>
<br><b><tt><font color="#990000">Salary: 48000</font></tt></b>
</td>
</tr>
</table>

<p>В таблицата са дадени всички член-функции, дефинирани в класа <b><tt>Employee:</tt></b>
<br> 
</p>
<table border cellspacing="0" cellpadding="4" width="100%">
<tr>
<td>Име</td>

<td>Действие</td>
</tr>

<tr>
<td><b><tt>Employee(n,s)</tt></b></td>

<td>Конструира обект, представящ служител с име <b><tt>n</tt></b> и заплата
<b><tt>s.</tt></b>
</td>
</tr>

<tr>
<td><b><tt>e.get_name()</tt></b></td>

<td>Връща името на <b><tt>e</tt></b>.</td>
</tr>

<tr>
<td><b><tt>e.get_salary()</tt></b></td>

<td>Връща заплатата на <b><tt>e</tt></b>.</td>
</tr>

<tr>
<td nowrap><b><tt>e.set_salary(s) </tt></b></td>

<td>Дава нова стойност <b><tt>s</tt></b> на заплатата на <b><tt>e.</tt></b>
</td>
</tr>
</table>

<p><img src="bullet.gif"><b> </b>Графични форми. Графични класове.
<br>** Изобразяване на графични форми.
<br>    В зависимост от организацията на входа и изхода
в С++ се различават два типа програми - текстови приложения и графични
приложения. Текстовите приложения приемат вход от клавиатурата (чрез <b><tt>cin</tt></b>)
и извеждат текст на екрана (чрез <b><tt>cout</tt></b>). Използва се текстов
екран (конзола), като текстът се разполага (най-често) на 25 реда по 80
символа на ред. Графичните програми приемат вход от клавиатура и мишка
и извеждат графични форми (напр. точки и окръжности) на  графичен
екран (в нашия случай чрез обекта <b><tt>cwin</tt></b>). На графичния екран
(прозорец) има дефинирана координатна система и обектите се разполагат
по зададени координати.
<br>    К. Хорстман създава малка графична библиотека, дефинирана
във файла <b><tt>ccc_win.cpp
</tt></b>с обекти:
<br> -- Точка:  <b><tt>Point(3,1)</tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  cwin &lt;&lt; Point(3,1);</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br> -- Окръжност: <b><tt>Circle(Point(2,3),1)</tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  Point p(1, 3);</font></tt></b>
<br><b><tt><font color="#000099">   cwin &lt;&lt; p &lt;&lt;
Circle(p, 2.5);</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br> -- Отсечка: <b><tt>Line(Point(1,3), Point(2,2))</tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ Point p(1, 3);</font></tt></b>
<br><b><tt><font color="#000099">  Point q(4, 7);</font></tt></b>
<br><b><tt><font color="#000099">  Line s(p, q);</font></tt></b>
<br><b><tt><font color="#000099">  cwin &lt;&lt; s;</font></tt></b>
<br><b><tt><font color="#000099">  return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br> -- Текст: <b><tt>Message(Point(4,4),"Hello")</tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  Point p(1, 3);</font></tt></b>
<br><b><tt><font color="#000099">   Message greeting(p, "Hello,
Window!");</font></tt></b>
<br><b><tt><font color="#000099">   cwin &lt;&lt; greeting;</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p>Следват таблици с всички дефинирани член-функции в графичните класове.
<br> 
<br> 
</p>
<table border cellspacing="0" cellpadding="4" cols="2" width="100%">
<tr>
<td>Име</td>

<td>Действие</td>
</tr>

<tr>
<td><b><tt>Point p=Point(x,y);</tt></b></td>

<td>Конструира точка <b><tt>p</tt></b> с координати<b><tt>(x,y)</tt></b>.</td>
</tr>

<tr>
<td><b><tt>p.get_x()</tt></b></td>

<td>Връща x-координатата на точката <b><tt>p</tt></b>. </td>
</tr>

<tr>
<td><b><tt>p.get_y()</tt></b></td>

<td>Връща y-координатата на точката <b><tt>p</tt></b>.</td>
</tr>

<tr>
<td><b><tt>p.move(dx,dy)</tt></b></td>

<td>Премества точката <b><tt>p</tt></b> с <b><tt>(dx,dy)</tt></b>.</td>
</tr>
</table>

<br> 
<table border cellspacing="0" cellpadding="4" cols="2" width="100%">
<tr>
<td>Име</td>

<td>Действие</td>
</tr>

<tr>
<td nowrap><b><tt>Circle c=Circle(p,r); </tt></b></td>

<td>Конструира окръжност с център <b><tt>p</tt></b> и радиус <b><tt>r</tt></b>.</td>
</tr>

<tr>
<td><b><tt>c.get_center()</tt></b></td>

<td>Връща центъра <b><tt>p</tt></b> на окръжността
<b><tt>c</tt></b>.</td>
</tr>

<tr>
<td><b><tt>c.get_radius()</tt></b></td>

<td>Връща радиуса <tt><b>r</b> </tt>на окръжността <b><tt>c</tt></b>.</td>
</tr>

<tr>
<td><b><tt>c.move(dx,dy)</tt></b></td>

<td>Премества окръжността <b><tt>c</tt></b> с <b><tt>(dx,dy).</tt></b>
</td>
</tr>
</table>

<br> 
<table border cellspacing="0" cellpadding="4" cols="2" width="100%">
<tr>
<td>Име</td>

<td>Действие</td>
</tr>

<tr>
<td><b><tt>Line l=Line(p,q); </tt></b></td>

<td>Конструира отсечка <tt><b>l</b>,</tt> свързваща точките
<b><tt>p</tt></b>
и
<tt><b>q</b>.</tt>
</td>
</tr>

<tr>
<td><b><tt>l.get_start()</tt></b></td>

<td>Връща началната точка <b><tt>p</tt></b> на отсечката
<b><tt>l</tt></b>.</td>
</tr>

<tr>
<td><b><tt>l.get_end()</tt></b></td>

<td>Връща крайната точка <b><tt>q</tt></b> на отсечката
<b><tt>l</tt></b>. </td>
</tr>

<tr>
<td><b><tt>l.move(dx,dy)</tt></b></td>

<td>Премества отсечката <b><tt>l</tt></b> с <b><tt>(dx,dy)</tt></b>.</td>
</tr>
</table>

<br> 
<table border cellspacing="0" cellpadding="4" cols="2" width="100%">
<tr>
<td>Име</td>

<td>Действие</td>
</tr>

<tr>
<td nowrap><b><tt>Message m=Message(p,s); </tt></b></td>

<td>Конструира съобщение <b><tt>m</tt></b> с начална точка <b><tt>p</tt></b>
и съдържание <b><tt>s</tt></b>.</td>
</tr>

<tr>
<td nowrap><b><tt>Message m=Message(p,x); </tt></b></td>

<td>Конструира съобщение <b><tt>m</tt></b> с начална точка <b><tt>p</tt></b>
и етикет числото <b><tt>x</tt></b>.</td>
</tr>

<tr>
<td><b><tt>m.get_start()</tt></b></td>

<td>Връща началната точка <b><tt>p</tt></b> на съобщението
<b><tt>m</tt></b>.</td>
</tr>

<tr>
<td><b><tt>m.get_text()</tt></b></td>

<td>Връща съдържанието <b><tt>s</tt></b> на съобщението
<b><tt>m</tt></b>.</td>
</tr>

<tr>
<td><b><tt>m.move(dx,dy)</tt></b></td>

<td>Премества съобщението <b><tt>m</tt></b> с <b><tt>(dx,dy)</tt></b>.</td>
</tr>
</table>

<p><img src="bullet.gif" height="18" width="20" align="ABSBOTTOM"> Избор на координатна
система.
<br>    По подразбиране центърът на координатната система
на графичния прозорец е в центъра на прозореца, като координатите на горния
ляв ъгъл  са <b><tt>-10,10</tt></b>, а на долния десен ъгъл <b><tt>10,-10</tt></b>:
<br><b><tt>  <font color="#006600">cwin.coord(-10,10,10,-10);</font></tt></b>
<br>Програмистът може да зададе нова координатна система като посочи координатите
на двете точки - горен ляв и долен десен ъгъл. Например
<br>горения ляв ъгъл:  <b><tt>0,100</tt></b> и долен десен ъгъл: <b><tt>50,0.</tt></b>
<br><b><tt>  <font color="#006600">cwin.coord(0,100,50,0);</font></tt></b>
<br>
</p>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20" align="ABSBOTTOM"><b> </b>Получаване
на вход от графичния прозорец.
<br><b><tt><font color="#006600">string name = cwin.get_string("Моля, въведете
своето име: ");</font></tt></b>
<br><b><tt><font color="#006600">Point center = cwin.get_mouse("Enter center
of the circle");</font></tt></b>
<br>    В следващия пример програмата пита за име и след
това въведеното име се извежда в графичния прозорец на зададено с мишката
място.
<br><b><tt><font color="#000099">// click.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ string name = cwin.get_string("Please
type your name:");</font></tt></b>
<br><b><tt><font color="#000099">  Circle c(Point(0, 0), 1);</font></tt></b>
<br><b><tt><font color="#000099">  cwin &lt;&lt; c;</font></tt></b>
<br><b><tt><font color="#000099">  Point m = cwin.get_mouse("Please
click inside the circle.");</font></tt></b>
<br><b><tt><font color="#000099">  cwin &lt;&lt; m &lt;&lt; Message(m,
name + " clicked here");</font></tt></b>
<br><b><tt><font color="#000099">  return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellspacing="0" cellpadding="4" width="100%">
<tr>
<td>Име</td>

<td>Действие</td>
</tr>

<tr>
<td nowrap> <b><tt>win.coord(x1,y1,x2,y2) </tt></b>
</td>

<td>Избира координатна система.</td>
</tr>

<tr>
<td> <b><tt>win &lt;&lt; x</tt></b>
</td>

<td>Изобразява обекта  <b><tt>x</tt></b> в прозореца.</td>
</tr>

<tr>
<td> <b><tt>win.clear()</tt></b>
</td>

<td>Изчиства прозореца <b><tt>win</tt></b>.</td>
</tr>

<tr>
<td> <b><tt>win.get_string(p)</tt></b>
</td>

<td>Извежда подканващ текст <b><tt>p</tt></b> и връща въведения низ</td>
</tr>

<tr>
<td> <b><tt>win.get_int(p)</tt></b>
</td>

<td>Извежда подканващ текст <b><tt>p</tt> </b>и връща въведеното цяло число</td>
</tr>

<tr>
<td> <b><tt>win.get_double(p)</tt></b>
</td>

<td>Извежда подканващ текст <b><tt>p</tt> </b>и връща въведеното число
с плаваща точка</td>
</tr>
</table>

<br> 
<table border cellspacing="0" cellpadding="4" width="100%">
<tr>
<td nowrap><b><tt>win.get_mouse(p)</tt></b></td>

<td>Извежда подканващ текст <b><tt>p</tt> </b>и връща точката, избрана
с мишката</td>
</tr>
</table>

<p><img src="bullet.gif"><b> </b>Сравняване на визуална и числова информация.
<br>    Намиране на пресечни точки на права и окръжност.
Окръжността е с център началото на координатната система и зададен радиус
- <b><tt>radius</tt></b>. Правата е успоредна на абсцисната ос и е на зададено
разстояние <b><tt>b</tt></b> от нея. Чертаем двата графични обекта и още
две точки, получени от пресмятането на пресечните точки на правата и окръжността.
Ако пресмятанията са верни, двете точки трябва да се появят точно на местата
на пресичане на двете графични форми.
<br><b><tt><font color="#000099">// intersect2.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  double radius = cwin.get_double("Radius:
");</font></tt></b>
<br><b><tt><font color="#000099">   Circle c(Point(0, 0), radius);</font></tt></b>
<br><b><tt><font color="#000099">   double b = cwin.get_double("Line
position: ");</font></tt></b>
<br><b><tt><font color="#000099">   Line s(Point(-10, b), Point(10,
b));</font></tt></b>
<br><b><tt><font color="#000099">   cwin &lt;&lt; c &lt;&lt;
s;</font></tt></b>
<br><b><tt><font color="#000099">   double root = sqrt(radius
* radius - b * b);</font></tt></b>
<br><b><tt><font color="#000099">   Point p1(root, b);</font></tt></b>
<br><b><tt><font color="#000099">   Point p2(-root, b);</font></tt></b>
<br><b><tt><font color="#000099">   Message m1(p1, p1.get_x());</font></tt></b>
<br><b><tt><font color="#000099">   Message m2(p2, p2.get_x());</font></tt></b>
<br><b><tt><font color="#000099">   cwin &lt;&lt; p1 &lt;&lt;
p2 &lt;&lt; m1 &lt;&lt; m2;</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>Какво става, ако правата не пресича окръжността?
<br>
</p>
<hr width="100%">
</body>
</html>
