<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre>
<tt>
001: <b><font color="#000080">#include</font></b> <font color="#FF0000">&lt;wx/wx.h&gt;</font>
002: <b><font color="#000080">#include</font></b> <font color="#FF0000">&lt;string&gt;</font>
003: <b><font color="#000080">#include</font></b> <font color="#FF0000">&lt;cstdlib&gt;</font>
004: 
005: <b><font color="#0000FF">const</font></b> <font color="#009900">double</font> PI <font color="#990000">=</font> <font color="#993399">3.141592653589793</font><font color="#990000">;</font>
006: 
007: <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> ID_GUESS <font color="#990000">=</font> <font color="#993399">1000</font><font color="#990000">;</font>
008: <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> ID_PLAYER_NAME <font color="#990000">=</font> <font color="#993399">1001</font><font color="#990000">;</font>
009: <b><font color="#0000FF">const</font></b> <font color="#009900">int</font> ID_PLAYER_LEVEL <font color="#990000">=</font> <font color="#993399">1002</font><font color="#990000">;</font>
010: 
011: <i><font color="#9A1900">/**</font></i>
012: <i><font color="#9A1900">   A clock that can draw its face.</font></i>
013: <i><font color="#9A1900">*/</font></i>
014: <b><font color="#0000FF">class</font></b> Clock
015: <font color="#FF0000">{</font>
016: <b><font color="#0000FF">public</font></b><font color="#990000">:</font>
017:    <i><font color="#9A1900">/**</font></i>
018: <i><font color="#9A1900">      Constructs a clock with a given center and radius.</font></i>
019: <i><font color="#9A1900">      @param x the x-coordinate of the center</font></i>
020: <i><font color="#9A1900">      @param y the y-coordinate of the center</font></i>
021: <i><font color="#9A1900">      @param r the radius of the clock</font></i>
022: <i><font color="#9A1900">   */</font></i>              
023:    <b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">int</font> x<font color="#990000">,</font> <font color="#009900">int</font> y<font color="#990000">,</font> <font color="#009900">int</font> r<font color="#990000">)</font><font color="#990000">;</font>
024: 
025:    <i><font color="#9A1900">/**</font></i>
026: <i><font color="#9A1900">      Sets the current time.</font></i>
027: <i><font color="#9A1900">      @param h the hours to set</font></i>
028: <i><font color="#9A1900">      @param m the minutes to set</font></i>
029: <i><font color="#9A1900">   */</font></i>
030:    <font color="#009900">void</font> <b><font color="#000000">set_time</font></b><font color="#990000">(</font><font color="#009900">int</font> h<font color="#990000">,</font> <font color="#009900">int</font> m<font color="#990000">)</font><font color="#990000">;</font>
031: 
032:    <i><font color="#9A1900">/**</font></i>
033: <i><font color="#9A1900">      Draws the clock face, with tick marks and hands.</font></i>
034: <i><font color="#9A1900">      @param dc the device context to draw on</font></i>
035: <i><font color="#9A1900">   */</font></i>
036:    <font color="#009900">void</font> <b><font color="#000000">draw</font></b><font color="#990000">(</font>wxDC<font color="#990000">&amp;</font> dc<font color="#990000">)</font> <b><font color="#0000FF">const</font></b><font color="#990000">;</font>
037: <b><font color="#0000FF">private</font></b><font color="#990000">:</font>
038:    <i><font color="#9A1900">/**</font></i>
039: <i><font color="#9A1900">      Draw a tick mark (hour or minute mark).</font></i>
040: <i><font color="#9A1900">      @param dc the device context to draw on</font></i>
041: <i><font color="#9A1900">      @param angle the angle in minutes (0...59, 0 = top)</font></i>
042: <i><font color="#9A1900">      @param length the length of the tick mark, as a fraction</font></i>
043: <i><font color="#9A1900">      of the radius (between 0.0 and 1.0)</font></i>
044: <i><font color="#9A1900">   */</font></i>
045:    <font color="#009900">void</font> <b><font color="#000000">draw_tick</font></b><font color="#990000">(</font>wxDC<font color="#990000">&amp;</font> dc<font color="#990000">,</font> <font color="#009900">double</font> angle<font color="#990000">,</font> <font color="#009900">double</font> length<font color="#990000">)</font> <b><font color="#0000FF">const</font></b><font color="#990000">;</font>
046: 
047:    <i><font color="#9A1900">/**</font></i>
048: <i><font color="#9A1900">      Draw a hand, starting from the center.</font></i>
049: <i><font color="#9A1900">      @param dc the device context to draw on</font></i>
050: <i><font color="#9A1900">      @param angle the angle in minutes (0...59, 0 = top)</font></i>
051: <i><font color="#9A1900">      @param length the length of the hand, as a fraction</font></i>
052: <i><font color="#9A1900">      of the radius (between 0.0 and 1.0)</font></i>
053: <i><font color="#9A1900">   */</font></i>
054:    <font color="#009900">void</font> <b><font color="#000000">draw_hand</font></b><font color="#990000">(</font>wxDC<font color="#990000">&amp;</font> dc<font color="#990000">,</font> <font color="#009900">double</font> angle<font color="#990000">,</font> <font color="#009900">double</font> length<font color="#990000">)</font> <b><font color="#0000FF">const</font></b><font color="#990000">;</font>
055: 
056:    <font color="#009900">int</font> hours<font color="#990000">;</font>
057:    <font color="#009900">int</font> minutes<font color="#990000">;</font>
058:    <font color="#009900">int</font> centerx<font color="#990000">;</font>
059:    <font color="#009900">int</font> centery<font color="#990000">;</font>
060:    <font color="#009900">int</font> radius<font color="#990000">;</font>
061: <font color="#FF0000">}</font><font color="#990000">;</font>
062: 
063: <i><font color="#9A1900">/**</font></i>
064: <i><font color="#9A1900">   The player of the clock game.</font></i>
065: <i><font color="#9A1900">*/</font></i>
066: <b><font color="#0000FF">class</font></b> Player
067: <font color="#FF0000">{</font>
068: <b><font color="#0000FF">public</font></b><font color="#990000">:</font>
069:    <i><font color="#9A1900">/**</font></i>
070: <i><font color="#9A1900">      Constructs a player with name "Player", </font></i>
071: <i><font color="#9A1900">      level 1, and score 0.</font></i>
072: <i><font color="#9A1900">   */</font></i>
073:    <b><font color="#000000">Player</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
074: 
075:    <i><font color="#9A1900">/**</font></i>
076: <i><font color="#9A1900">      Increments the score. Moves to next level if current </font></i>
077: <i><font color="#9A1900">      level complete</font></i>
078: <i><font color="#9A1900">   */</font></i>
079:    <font color="#009900">void</font> <b><font color="#000000">increment_score</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
080: 
081:    <i><font color="#9A1900">/**</font></i>
082: <i><font color="#9A1900">      Gets the current level.</font></i>
083: <i><font color="#9A1900">      @return the level</font></i>
084: <i><font color="#9A1900">   */</font></i>
085:    <font color="#009900">int</font> <b><font color="#000000">get_level</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000FF">const</font></b><font color="#990000">;</font>
086: 
087:    <i><font color="#9A1900">/**</font></i>
088: <i><font color="#9A1900">      Gets the player's name.</font></i>
089: <i><font color="#9A1900">      @return the name</font></i>
090: <i><font color="#9A1900">   */</font></i>
091:    string <b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000FF">const</font></b><font color="#990000">;</font>
092: 
093:    <i><font color="#9A1900">/**</font></i>
094: <i><font color="#9A1900">      Sets the player's level.</font></i>
095: <i><font color="#9A1900">      @param l the level</font></i>
096: <i><font color="#9A1900">   */</font></i>
097:    <font color="#009900">void</font> <b><font color="#000000">set_level</font></b><font color="#990000">(</font><font color="#009900">int</font> l<font color="#990000">)</font><font color="#990000">;</font>
098: 
099:    <i><font color="#9A1900">/**</font></i>
100: <i><font color="#9A1900">      Sets the player's name.</font></i>
101: <i><font color="#9A1900">      @param n the name</font></i>
102: <i><font color="#9A1900">   */</font></i>
103:    <font color="#009900">void</font> <b><font color="#000000">set_name</font></b><font color="#990000">(</font>string n<font color="#990000">)</font><font color="#990000">;</font>
104: <b><font color="#0000FF">private</font></b><font color="#990000">:</font>
105:    string name<font color="#990000">;</font>
106:    <font color="#009900">int</font> score<font color="#990000">;</font>
107:    <font color="#009900">int</font> level<font color="#990000">;</font>
108: <font color="#FF0000">}</font><font color="#990000">;</font>
109: 
110: <i><font color="#9A1900">/**</font></i>
111: <i><font color="#9A1900">   The window that shows the clock.</font></i>
112: <i><font color="#9A1900">*/</font></i>
113: <b><font color="#0000FF">class</font></b> ClockWindow <font color="#990000">:</font> <b><font color="#0000FF">public</font></b> wxWindow
114: <font color="#FF0000">{</font>
115: <b><font color="#0000FF">public</font></b><font color="#990000">:</font>
116:    <i><font color="#9A1900">/**</font></i>
117: <i><font color="#9A1900">      Constructs a clock window.</font></i>
118: <i><font color="#9A1900">      @param parent the parent window</font></i>
119: <i><font color="#9A1900">   */</font></i>
120:    <b><font color="#000000">ClockWindow</font></b><font color="#990000">(</font>wxWindow<font color="#990000">*</font> parent<font color="#990000">)</font><font color="#990000">;</font>
121:    <i><font color="#9A1900">/**</font></i>
122: <i><font color="#9A1900">      Sets the time of the clock and repaints it.</font></i>
123: <i><font color="#9A1900">      @param h the hours</font></i>
124: <i><font color="#9A1900">      @param m the minutes</font></i>
125: <i><font color="#9A1900">   */</font></i>
126:    <font color="#009900">void</font> <b><font color="#000000">set_time</font></b><font color="#990000">(</font><font color="#009900">int</font> h<font color="#990000">,</font> <font color="#009900">int</font> m<font color="#990000">)</font><font color="#990000">;</font>
127:    <i><font color="#9A1900">/**</font></i>
128: <i><font color="#9A1900">      Paints the clock.</font></i>
129: <i><font color="#9A1900">      @param event the event descriptor</font></i>
130: <i><font color="#9A1900">   */</font></i>      
131:    <font color="#009900">void</font> <b><font color="#000000">OnPaint</font></b><font color="#990000">(</font>wxPaintEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font><font color="#990000">;</font>
132: <b><font color="#0000FF">private</font></b><font color="#990000">:</font>
133:    Clock clock<font color="#990000">;</font>
134:    <b><font color="#000000">DECLARE_EVENT_TABLE</font></b><font color="#990000">(</font><font color="#990000">)</font>
135: <font color="#FF0000">}</font><font color="#990000">;</font>
136: 
137: <i><font color="#9A1900">/**</font></i>
138: <i><font color="#9A1900">   The frame that contains the clock window and the</font></i>
139: <i><font color="#9A1900">   fields for entering a guess.</font></i>
140: <i><font color="#9A1900">*/</font></i>
141: <b><font color="#0000FF">class</font></b> GameFrame <font color="#990000">:</font> <b><font color="#0000FF">public</font></b> wxFrame
142: <font color="#FF0000">{</font>
143: <b><font color="#0000FF">public</font></b><font color="#990000">:</font>
144:    <i><font color="#9A1900">/**</font></i>
145: <i><font color="#9A1900">      Constructs the game frame.</font></i>
146: <i><font color="#9A1900">   */</font></i>
147:    <b><font color="#000000">GameFrame</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
148: 
149:    <i><font color="#9A1900">/**</font></i>
150: <i><font color="#9A1900">      Starts a new round, with a new clock time.</font></i>
151: <i><font color="#9A1900">   */</font></i>
152:    <font color="#009900">void</font> <b><font color="#000000">new_round</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
153:    <i><font color="#9A1900">/**</font></i>
154: <i><font color="#9A1900">      Processes the player's guess.</font></i>
155: <i><font color="#9A1900">      @param event the event descriptor</font></i>
156: <i><font color="#9A1900">   */</font></i>         
157:    <font color="#009900">void</font> <b><font color="#000000">OnGuess</font></b><font color="#990000">(</font>wxCommandEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font><font color="#990000">;</font>
158:    <i><font color="#9A1900">/**</font></i>
159: <i><font color="#9A1900">      Prompts the player to enter a name.</font></i>
160: <i><font color="#9A1900">      @param event the event descriptor</font></i>
161: <i><font color="#9A1900">   */</font></i>         
162:    <font color="#009900">void</font> <b><font color="#000000">OnPlayerName</font></b><font color="#990000">(</font>wxCommandEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font><font color="#990000">;</font>
163:    <i><font color="#9A1900">/**</font></i>
164: <i><font color="#9A1900">      Prompts the player to enter a level.</font></i>
165: <i><font color="#9A1900">      @param event the event descriptor</font></i>
166: <i><font color="#9A1900">   */</font></i>         
167:    <font color="#009900">void</font> <b><font color="#000000">OnPlayerLevel</font></b><font color="#990000">(</font>wxCommandEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font><font color="#990000">;</font>
168: <b><font color="#0000FF">private</font></b><font color="#990000">:</font>
169:    ClockWindow<font color="#990000">*</font> window<font color="#990000">;</font>
170:    wxTextCtrl<font color="#990000">*</font> hour_text<font color="#990000">;</font>
171:    wxTextCtrl<font color="#990000">*</font> minute_text<font color="#990000">;</font>
172:    Player player<font color="#990000">;</font>
173:    <font color="#009900">int</font> current_hours<font color="#990000">;</font>
174:    <font color="#009900">int</font> current_minutes<font color="#990000">;</font>
175:    <font color="#009900">int</font> tries<font color="#990000">;</font>
176:    <b><font color="#000000">DECLARE_EVENT_TABLE</font></b><font color="#990000">(</font><font color="#990000">)</font>
177: <font color="#FF0000">}</font><font color="#990000">;</font>
178: 
179: <i><font color="#9A1900">/**</font></i>
180: <i><font color="#9A1900">   The clock game application.</font></i>
181: <i><font color="#9A1900">*/</font></i>
182: <b><font color="#0000FF">class</font></b> GameApp <font color="#990000">:</font> <b><font color="#0000FF">public</font></b> wxApp
183: <font color="#FF0000">{</font>
184: <b><font color="#0000FF">public</font></b><font color="#990000">:</font>
185:    <i><font color="#9A1900">/**</font></i>
186: <i><font color="#9A1900">      Constructs the application.</font></i>
187: <i><font color="#9A1900">   */</font></i>
188:    <b><font color="#000000">GameApp</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
189:    <b><font color="#0000FF">virtual</font></b> <font color="#009900">bool</font> <b><font color="#000000">OnInit</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
190: <b><font color="#0000FF">private</font></b><font color="#990000">:</font>
191:    GameFrame<font color="#990000">*</font> frame<font color="#990000">;</font>
192: <font color="#FF0000">}</font><font color="#990000">;</font>
193: 
194: <b><font color="#000000">DECLARE_APP</font></b><font color="#990000">(</font>GameApp<font color="#990000">)</font>
195: 
196: <b><font color="#000000">IMPLEMENT_APP</font></b><font color="#990000">(</font>GameApp<font color="#990000">)</font>
197: 
198: <b><font color="#000000">BEGIN_EVENT_TABLE</font></b><font color="#990000">(</font>ClockWindow<font color="#990000">,</font> wxWindow<font color="#990000">)</font>
199:    <b><font color="#000000">EVT_PAINT</font></b><font color="#990000">(</font>ClockWindow<font color="#990000">:</font><font color="#990000">:</font>OnPaint<font color="#990000">)</font>
200: <b><font color="#000000">END_EVENT_TABLE</font></b><font color="#990000">(</font><font color="#990000">)</font>
201: 
202: <b><font color="#000000">BEGIN_EVENT_TABLE</font></b><font color="#990000">(</font>GameFrame<font color="#990000">,</font> wxFrame<font color="#990000">)</font>
203:    <b><font color="#000000">EVT_BUTTON</font></b><font color="#990000">(</font>ID_GUESS<font color="#990000">,</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font>OnGuess<font color="#990000">)</font>
204:    <b><font color="#000000">EVT_MENU</font></b><font color="#990000">(</font>ID_PLAYER_NAME<font color="#990000">,</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font>OnPlayerName<font color="#990000">)</font>
205:    <b><font color="#000000">EVT_MENU</font></b><font color="#990000">(</font>ID_PLAYER_LEVEL<font color="#990000">,</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font>OnPlayerLevel<font color="#990000">)</font> 
206: <b><font color="#000000">END_EVENT_TABLE</font></b><font color="#990000">(</font><font color="#990000">)</font>
207: 
208: <i><font color="#9A1900">/**</font></i>
209: <i><font color="#9A1900">   Sets the seed of the random number generator.</font></i>
210: <i><font color="#9A1900">*/</font></i>
211: <font color="#009900">void</font> <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font>
212: <font color="#FF0000">{</font>  
213:    <font color="#009900">int</font> seed <font color="#990000">=</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
214:    <b><font color="#000000">srand</font></b><font color="#990000">(</font>seed<font color="#990000">)</font><font color="#990000">;</font>
215: <font color="#FF0000">}</font>
216: 
217: <i><font color="#9A1900">/**</font></i>
218: <i><font color="#9A1900">   Returns a random integer in a range.</font></i>
219: <i><font color="#9A1900">   @param a the bottom of the range</font></i>
220: <i><font color="#9A1900">   @param b the top of the range</font></i>
221: <i><font color="#9A1900">   @return a random number x, a &lt;= x and x &lt;= b</font></i>
222: <i><font color="#9A1900">*/</font></i>
223: <font color="#009900">int</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#009900">int</font> a<font color="#990000">,</font> <font color="#009900">int</font> b<font color="#990000">)</font>
224: <font color="#FF0000">{</font>  
225:    <b><font color="#0000FF">return</font></b> a <font color="#990000">+</font> <b><font color="#000000">rand</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">%</font> <font color="#990000">(</font>b <font color="#990000">-</font> a <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>
226: <font color="#FF0000">}</font>
227: 
228: Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">int</font> x<font color="#990000">,</font> <font color="#009900">int</font> y<font color="#990000">,</font> <font color="#009900">int</font> r<font color="#990000">)</font>
229: <font color="#FF0000">{</font>  
230:    centerx <font color="#990000">=</font> x<font color="#990000">;</font>
231:    centery <font color="#990000">=</font> y<font color="#990000">;</font>
232:    radius <font color="#990000">=</font> r<font color="#990000">;</font>
233: <font color="#FF0000">}</font>
234: 
235: <font color="#009900">void</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">set_time</font></b><font color="#990000">(</font><font color="#009900">int</font> h<font color="#990000">,</font> <font color="#009900">int</font> m<font color="#990000">)</font>
236: <font color="#FF0000">{</font>  
237:    hours <font color="#990000">=</font> h<font color="#990000">;</font>
238:    minutes <font color="#990000">=</font> m<font color="#990000">;</font>
239: <font color="#FF0000">}</font>
240: 
241: <font color="#009900">void</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">draw_tick</font></b><font color="#990000">(</font>wxDC<font color="#990000">&amp;</font> dc<font color="#990000">,</font> <font color="#009900">double</font> angle<font color="#990000">,</font> 
242:    <font color="#009900">double</font> length<font color="#990000">)</font> <b><font color="#0000FF">const</font></b>
243: <font color="#FF0000">{</font>  
244:    <font color="#009900">double</font> alpha <font color="#990000">=</font> <font color="#990000">-</font>PI <font color="#990000">/</font> <font color="#993399">2</font> <font color="#990000">+</font> <font color="#993399">6</font> <font color="#990000">*</font> angle <font color="#990000">*</font> PI <font color="#990000">/</font> <font color="#993399">180</font><font color="#990000">;</font>
245:    dc<font color="#990000">.</font><b><font color="#000000">DrawLine</font></b><font color="#990000">(</font>
246:       centerx <font color="#990000">+</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font>
247:          <b><font color="#000000">cos</font></b><font color="#990000">(</font>alpha<font color="#990000">)</font> <font color="#990000">*</font> radius <font color="#990000">*</font> <font color="#990000">(</font><font color="#993399">1</font> <font color="#990000">-</font> length<font color="#990000">)</font><font color="#990000">)</font><font color="#990000">,</font>
248:       centery <font color="#990000">+</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font>
249:          <b><font color="#000000">sin</font></b><font color="#990000">(</font>alpha<font color="#990000">)</font> <font color="#990000">*</font> radius <font color="#990000">*</font> <font color="#990000">(</font><font color="#993399">1</font> <font color="#990000">-</font> length<font color="#990000">)</font><font color="#990000">)</font><font color="#990000">,</font>
250:       centerx <font color="#990000">+</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">cos</font></b><font color="#990000">(</font>alpha<font color="#990000">)</font> <font color="#990000">*</font> radius<font color="#990000">)</font><font color="#990000">,</font>
251:       centery <font color="#990000">+</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">sin</font></b><font color="#990000">(</font>alpha<font color="#990000">)</font> <font color="#990000">*</font> radius<font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
252: <font color="#FF0000">}</font>
253: 
254: <font color="#009900">void</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">draw_hand</font></b><font color="#990000">(</font>wxDC<font color="#990000">&amp;</font> dc<font color="#990000">,</font> <font color="#009900">double</font> angle<font color="#990000">,</font> 
255:    <font color="#009900">double</font> length<font color="#990000">)</font> <b><font color="#0000FF">const</font></b>
256: <font color="#FF0000">{</font>  
257:    <font color="#009900">double</font> alpha <font color="#990000">=</font> <font color="#990000">-</font>PI <font color="#990000">/</font> <font color="#993399">2</font> <font color="#990000">+</font> <font color="#993399">6</font> <font color="#990000">*</font> angle <font color="#990000">*</font> PI <font color="#990000">/</font> <font color="#993399">180</font><font color="#990000">;</font>
258:    dc<font color="#990000">.</font><b><font color="#000000">DrawLine</font></b><font color="#990000">(</font>centerx<font color="#990000">,</font> centery<font color="#990000">,</font>
259:       centerx <font color="#990000">+</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">cos</font></b><font color="#990000">(</font>alpha<font color="#990000">)</font> <font color="#990000">*</font> radius <font color="#990000">*</font> length<font color="#990000">)</font><font color="#990000">,</font>
260:       centery <font color="#990000">+</font> <b><font color="#000000">static_cast</font></b><font color="#FF0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">sin</font></b><font color="#990000">(</font>alpha<font color="#990000">)</font> <font color="#990000">*</font> radius <font color="#990000">*</font> length<font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
261: <font color="#FF0000">}</font>
262: 
263: <font color="#009900">void</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">draw</font></b><font color="#990000">(</font>wxDC<font color="#990000">&amp;</font> dc<font color="#990000">)</font> <b><font color="#0000FF">const</font></b>
264: <font color="#FF0000">{</font>  
265:    dc<font color="#990000">.</font><b><font color="#000000">DrawEllipse</font></b><font color="#990000">(</font>centerx <font color="#990000">-</font> radius<font color="#990000">,</font> centery <font color="#990000">-</font> radius<font color="#990000">,</font> 
266:       <font color="#993399">2</font> <font color="#990000">*</font> radius<font color="#990000">,</font> <font color="#993399">2</font> <font color="#990000">*</font> radius<font color="#990000">)</font><font color="#990000">;</font>
267:    <b><font color="#0000FF">const</font></b> <font color="#009900">double</font> HOUR_TICK_LENGTH <font color="#990000">=</font> <font color="#993399">0.2</font><font color="#990000">;</font>
268:    <b><font color="#0000FF">const</font></b> <font color="#009900">double</font> MINUTE_TICK_LENGTH <font color="#990000">=</font> <font color="#993399">0.1</font><font color="#990000">;</font>
269:    <b><font color="#0000FF">const</font></b> <font color="#009900">double</font> HOUR_HAND_LENGTH <font color="#990000">=</font> <font color="#993399">0.6</font><font color="#990000">;</font>
270:    <b><font color="#0000FF">const</font></b> <font color="#009900">double</font> MINUTE_HAND_LENGTH <font color="#990000">=</font> <font color="#993399">0.75</font><font color="#990000">;</font>
271:    <b><font color="#0000FF">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> <font color="#993399">12</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
272:    <font color="#FF0000">{</font>  
273:       <b><font color="#000000">draw_tick</font></b><font color="#990000">(</font>dc<font color="#990000">,</font> i <font color="#990000">*</font> <font color="#993399">5</font><font color="#990000">,</font> HOUR_TICK_LENGTH<font color="#990000">)</font><font color="#990000">;</font>
274:       <font color="#009900">int</font> j<font color="#990000">;</font>
275:       <b><font color="#0000FF">for</font></b> <font color="#990000">(</font>j <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font> j <font color="#990000">&lt;</font><font color="#990000">=</font> <font color="#993399">4</font><font color="#990000">;</font> j<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
276:          <b><font color="#000000">draw_tick</font></b><font color="#990000">(</font>dc<font color="#990000">,</font> i <font color="#990000">*</font> <font color="#993399">5</font> <font color="#990000">+</font> j<font color="#990000">,</font> MINUTE_TICK_LENGTH<font color="#990000">)</font><font color="#990000">;</font>
277:    <font color="#FF0000">}</font>
278:    <b><font color="#000000">draw_hand</font></b><font color="#990000">(</font>dc<font color="#990000">,</font> minutes<font color="#990000">,</font> MINUTE_HAND_LENGTH<font color="#990000">)</font><font color="#990000">;</font>
279:    <b><font color="#000000">draw_hand</font></b><font color="#990000">(</font>dc<font color="#990000">,</font> <font color="#990000">(</font>hours <font color="#990000">+</font> minutes <font color="#990000">/</font> <font color="#993399">60.0</font><font color="#990000">)</font> <font color="#990000">*</font> <font color="#993399">5</font><font color="#990000">,</font> HOUR_HAND_LENGTH<font color="#990000">)</font><font color="#990000">;</font>
280: <font color="#FF0000">}</font>
281: 
282: Player<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Player</font></b><font color="#990000">(</font><font color="#990000">)</font>
283: <font color="#FF0000">{</font>
284:    name <font color="#990000">=</font> <font color="#FF0000">"Player"</font><font color="#990000">;</font>
285:    level <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
286:    score <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
287: <font color="#FF0000">}</font>
288: 
289: <font color="#009900">void</font> Player<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">set_level</font></b><font color="#990000">(</font><font color="#009900">int</font> l<font color="#990000">)</font>
290: <font color="#FF0000">{</font>  
291:    level <font color="#990000">=</font> l<font color="#990000">;</font>
292: <font color="#FF0000">}</font>
293: 
294: <font color="#009900">void</font> Player<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">set_name</font></b><font color="#990000">(</font>string n<font color="#990000">)</font>
295: <font color="#FF0000">{</font>  
296:    name <font color="#990000">=</font> n<font color="#990000">;</font>
297: <font color="#FF0000">}</font>
298: 
299: <font color="#009900">int</font> Player<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_level</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000FF">const</font></b>
300: <font color="#FF0000">{</font>  
301:    <b><font color="#0000FF">return</font></b> level<font color="#990000">;</font>
302: <font color="#FF0000">}</font>
303: 
304: string Player<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000FF">const</font></b>
305: <font color="#FF0000">{</font>  
306:    <b><font color="#0000FF">return</font></b> name<font color="#990000">;</font>
307: <font color="#FF0000">}</font>
308: 
309: <font color="#009900">void</font> Player<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">increment_score</font></b><font color="#990000">(</font><font color="#990000">)</font>
310: <font color="#FF0000">{</font>  
311:    score<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
312:    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>score <font color="#990000">%</font> <font color="#993399">5</font> <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font> <font color="#990000">&amp;</font><font color="#990000">&amp;</font> level <font color="#990000">&lt;</font> <font color="#993399">4</font><font color="#990000">)</font>
313:       level<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
314: <font color="#FF0000">}</font>
315: 
316: ClockWindow<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">ClockWindow</font></b><font color="#990000">(</font>wxWindow<font color="#990000">*</font> parent<font color="#990000">)</font>
317:    <font color="#990000">:</font> <b><font color="#000000">wxWindow</font></b><font color="#990000">(</font>parent<font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font><font color="#990000">,</font>
318:    <b><font color="#000000">clock</font></b><font color="#990000">(</font><font color="#993399">200</font><font color="#990000">,</font> <font color="#993399">200</font><font color="#990000">,</font> <font color="#993399">200</font><font color="#990000">)</font>
319: <font color="#FF0000">{</font>
320: <font color="#FF0000">}</font>
321: 
322: <font color="#009900">void</font> ClockWindow<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">OnPaint</font></b><font color="#990000">(</font>wxPaintEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font>
323: <font color="#FF0000">{</font>
324:    wxPaintDC <b><font color="#000000">dc</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#990000">;</font>
325:    dc<font color="#990000">.</font><b><font color="#000000">SetBrush</font></b><font color="#990000">(</font><font color="#990000">*</font>wxTRANSPARENT_BRUSH<font color="#990000">)</font><font color="#990000">;</font>
326:    clock<font color="#990000">.</font><b><font color="#000000">draw</font></b><font color="#990000">(</font>dc<font color="#990000">)</font><font color="#990000">;</font>
327: <font color="#FF0000">}</font>
328: 
329: <font color="#009900">void</font> ClockWindow<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">set_time</font></b><font color="#990000">(</font><font color="#009900">int</font> h<font color="#990000">,</font> <font color="#009900">int</font> m<font color="#990000">)</font>
330: <font color="#FF0000">{</font>
331:    clock<font color="#990000">.</font><b><font color="#000000">set_time</font></b><font color="#990000">(</font>h<font color="#990000">,</font> m<font color="#990000">)</font><font color="#990000">;</font>
332:    <b><font color="#000000">Refresh</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
333: <font color="#FF0000">}</font>
334: 
335: GameFrame<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">GameFrame</font></b><font color="#990000">(</font><font color="#990000">)</font> 
336:    <font color="#990000">:</font> <b><font color="#000000">wxFrame</font></b><font color="#990000">(</font>NULL<font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#FF0000">"GameFrame"</font><font color="#990000">)</font>
337: <font color="#FF0000">{</font>
338:    <i><font color="#9A1900">// initialize menu</font></i>
339:    wxMenu<font color="#990000">*</font> menu <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMenu</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
340:    menu<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Append</font></b><font color="#990000">(</font>ID_PLAYER_NAME<font color="#990000">,</font> <font color="#FF0000">"Name"</font><font color="#990000">)</font><font color="#990000">;</font>
341:    menu<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Append</font></b><font color="#990000">(</font>ID_PLAYER_LEVEL<font color="#990000">,</font> <font color="#FF0000">"Level"</font><font color="#990000">)</font><font color="#990000">;</font>
342: 
343:    <i><font color="#9A1900">// add menu to menu bar</font></i>
344:    wxMenuBar<font color="#990000">*</font> menu_bar <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMenuBar</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
345:    <b><font color="#000000">SetMenuBar</font></b><font color="#990000">(</font>menu_bar<font color="#990000">)</font><font color="#990000">;</font>
346:    menu_bar<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Append</font></b><font color="#990000">(</font>menu<font color="#990000">,</font> <font color="#FF0000">"Player"</font><font color="#990000">)</font><font color="#990000">;</font>   
347: 
348:    window <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">ClockWindow</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#990000">;</font>
349: 
350:    hour_text <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxTextCtrl</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>
351:    minute_text <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxTextCtrl</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>
352: 
353:    wxButton<font color="#990000">*</font> guess_button <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxButton</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font> 
354:       ID_GUESS<font color="#990000">,</font> <font color="#FF0000">"Guess"</font><font color="#990000">)</font><font color="#990000">;</font>
355: 
356:    wxBoxSizer<font color="#990000">*</font> bottom_sizer <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxBoxSizer</font></b><font color="#990000">(</font>wxHORIZONTAL<font color="#990000">)</font><font color="#990000">;</font>
357:    bottom_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font><b><font color="#0000FF">new</font></b> <b><font color="#000000">wxStaticText</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#FF0000">"Hours"</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
358:    bottom_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font>hour_text<font color="#990000">)</font><font color="#990000">;</font>
359:    bottom_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font><b><font color="#0000FF">new</font></b> <b><font color="#000000">wxStaticText</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#FF0000">"Minutes"</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
360:    bottom_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font>minute_text<font color="#990000">)</font><font color="#990000">;</font>
361:    bottom_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font>guess_button<font color="#990000">)</font><font color="#990000">;</font>
362: 
363:    wxBoxSizer<font color="#990000">*</font> frame_sizer <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxBoxSizer</font></b><font color="#990000">(</font>wxVERTICAL<font color="#990000">)</font><font color="#990000">;</font>
364:    frame_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font>window<font color="#990000">,</font> <font color="#993399">1</font><font color="#990000">,</font> wxGROW<font color="#990000">)</font><font color="#990000">;</font>
365:    frame_sizer<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Add</font></b><font color="#990000">(</font>bottom_sizer<font color="#990000">,</font> <font color="#993399">0</font><font color="#990000">,</font> wxALIGN_CENTER<font color="#990000">)</font><font color="#990000">;</font>
366: 
367:    <b><font color="#000000">SetAutoLayout</font></b><font color="#990000">(</font><b><font color="#0000FF">true</font></b><font color="#990000">)</font><font color="#990000">;</font>
368:    <b><font color="#000000">SetSizer</font></b><font color="#990000">(</font>frame_sizer<font color="#990000">)</font><font color="#990000">;</font>
369: 
370:    <b><font color="#000000">new_round</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
371: <font color="#FF0000">}</font>
372: 
373: <font color="#009900">void</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">OnGuess</font></b><font color="#990000">(</font>wxCommandEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font>
374: <font color="#FF0000">{</font>
375:    tries<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
376:    <font color="#009900">int</font> hours <font color="#990000">=</font> <b><font color="#000000">atoi</font></b><font color="#990000">(</font>hour_text<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">GetValue</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">c_str</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
377:    <font color="#009900">int</font> minutes <font color="#990000">=</font> <b><font color="#000000">atoi</font></b><font color="#990000">(</font>minute_text<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">GetValue</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">c_str</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
378:    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>hours <font color="#990000">&lt;</font> <font color="#993399">1</font> <font color="#990000">|</font><font color="#990000">|</font> hours <font color="#990000">&gt;</font> <font color="#993399">12</font><font color="#990000">)</font>
379:    <font color="#FF0000">{</font>
380:       wxMessageDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
381:          <font color="#FF0000">"Hours must be between 1 and 12"</font><font color="#990000">)</font><font color="#990000">;</font>
382:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>      
383:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
384:       <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
385:    <font color="#FF0000">}</font>
386:    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>minutes <font color="#990000">&lt;</font> <font color="#993399">0</font> <font color="#990000">|</font><font color="#990000">|</font> minutes <font color="#990000">&gt;</font> <font color="#993399">59</font><font color="#990000">)</font>
387:    <font color="#FF0000">{</font>
388:       wxMessageDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
389:          <font color="#FF0000">"Hours must be between 1 and 12"</font><font color="#990000">)</font><font color="#990000">;</font>
390:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>      
391:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
392:       <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
393:    <font color="#FF0000">}</font>
394:    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>current_hours <font color="#990000">=</font><font color="#990000">=</font> hours <font color="#990000">&amp;</font><font color="#990000">&amp;</font> current_minutes <font color="#990000">=</font><font color="#990000">=</font> minutes<font color="#990000">)</font>
395:    <font color="#FF0000">{</font>
396:       string text <font color="#990000">=</font> <font color="#FF0000">"Congratulations, "</font> <font color="#990000">+</font> player<font color="#990000">.</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font>
397:          <font color="#990000">+</font> <font color="#FF0000">"! That is correct."</font><font color="#990000">;</font>     
398:       wxMessageDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
399:          text<font color="#990000">.</font><b><font color="#000000">c_str</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
400:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
401:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
402:       player<font color="#990000">.</font><b><font color="#000000">increment_score</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
403:       <b><font color="#000000">new_round</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
404:    <font color="#FF0000">}</font>
405:    <b><font color="#0000FF">else</font></b>
406:    <font color="#FF0000">{</font>
407:       string text <font color="#990000">=</font> <font color="#FF0000">"Sorry, "</font> <font color="#990000">+</font> player<font color="#990000">.</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font>
408:          <font color="#990000">+</font> <font color="#FF0000">"! That is not correct."</font><font color="#990000">;</font>
409:       wxMessageDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
410:          text<font color="#990000">.</font><b><font color="#000000">c_str</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
411:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
412:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
413:       <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>tries <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">)</font> <b><font color="#000000">new_round</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>   
414:    <font color="#FF0000">}</font>
415: <font color="#FF0000">}</font>
416: 
417: <font color="#009900">void</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">new_round</font></b><font color="#990000">(</font><font color="#990000">)</font>
418: <font color="#FF0000">{</font>
419:    tries <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
420:    <font color="#009900">int</font> level <font color="#990000">=</font> player<font color="#990000">.</font><b><font color="#000000">get_level</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
421:    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>level <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">)</font> current_minutes <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font>
422:    <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>level <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">2</font><font color="#990000">)</font> current_minutes <font color="#990000">=</font> <font color="#993399">15</font> <font color="#990000">*</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font> <font color="#993399">3</font><font color="#990000">)</font><font color="#990000">;</font>
423:    <b><font color="#0000FF">else</font></b> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>level <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">3</font><font color="#990000">)</font> current_minutes <font color="#990000">=</font> <font color="#993399">5</font> <font color="#990000">*</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font> <font color="#993399">11</font><font color="#990000">)</font><font color="#990000">;</font>
424:    <b><font color="#0000FF">else</font></b> current_minutes <font color="#990000">=</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">,</font> <font color="#993399">59</font><font color="#990000">)</font><font color="#990000">;</font>
425:    current_hours <font color="#990000">=</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#993399">12</font><font color="#990000">)</font><font color="#990000">;</font>
426:    window<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">set_time</font></b><font color="#990000">(</font>current_hours<font color="#990000">,</font> current_minutes<font color="#990000">)</font><font color="#990000">;</font>
427: <font color="#FF0000">}</font>
428: 
429: <font color="#009900">void</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">OnPlayerName</font></b><font color="#990000">(</font>wxCommandEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font>
430: <font color="#FF0000">{</font>
431:    wxTextEntryDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxTextEntryDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
432:       <font color="#FF0000">"What is your name?"</font><font color="#990000">)</font><font color="#990000">;</font>
433:    dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
434:    player<font color="#990000">.</font><b><font color="#000000">set_name</font></b><font color="#990000">(</font>dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">GetValue</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">c_str</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
435:    dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
436: <font color="#FF0000">}</font>
437: 
438: <font color="#009900">void</font> GameFrame<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">OnPlayerLevel</font></b><font color="#990000">(</font>wxCommandEvent<font color="#990000">&amp;</font> event<font color="#990000">)</font>
439: <font color="#FF0000">{</font>
440:    wxTextEntryDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxTextEntryDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
441:       <font color="#FF0000">"At what level do you want to play? (1-4)"</font><font color="#990000">)</font><font color="#990000">;</font>
442:    dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
443:    <font color="#009900">int</font> level <font color="#990000">=</font> <b><font color="#000000">atoi</font></b><font color="#990000">(</font>dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">GetValue</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">c_str</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
444:    dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
445:    <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>level <font color="#990000">&lt;</font> <font color="#993399">1</font> <font color="#990000">|</font><font color="#990000">|</font> level <font color="#990000">&gt;</font> <font color="#993399">4</font><font color="#990000">)</font>
446:    <font color="#FF0000">{</font>
447:       wxMessageDialog<font color="#990000">*</font> dialog <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">wxMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">,</font>
448:          <font color="#FF0000">"The level must be between 1 and 4"</font><font color="#990000">)</font><font color="#990000">;</font>
449:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">ShowModal</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>      
450:       dialog<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Destroy</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
451:       <b><font color="#0000FF">return</font></b><font color="#990000">;</font>
452:    <font color="#FF0000">}</font>
453:    player<font color="#990000">.</font><b><font color="#000000">set_level</font></b><font color="#990000">(</font>level<font color="#990000">)</font><font color="#990000">;</font>
454: <font color="#FF0000">}</font>
455: 
456: GameApp<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">GameApp</font></b><font color="#990000">(</font><font color="#990000">)</font>
457: <font color="#FF0000">{</font>
458:    <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
459:    frame <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">GameFrame</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
460: <font color="#FF0000">}</font>
461: 
462: <font color="#009900">bool</font> GameApp<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">OnInit</font></b><font color="#990000">(</font><font color="#990000">)</font>
463: <font color="#FF0000">{</font>
464:    frame<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">Show</font></b><font color="#990000">(</font><b><font color="#0000FF">true</font></b><font color="#990000">)</font><font color="#990000">;</font>
465:    <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">true</font></b><font color="#990000">;</font>
466: <font color="#FF0000">}</font>
467: 
</tt>
</pre>
</body></html>
