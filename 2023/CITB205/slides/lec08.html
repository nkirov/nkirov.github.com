<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="Author" content="Nikolay Kirov">
    <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U)
      [Netscape]">
    <title>lec08</title>
  </head>
  <body>
    <center>
      <h3 align="left"> <b>8. Реализация на свързани списъци</b> </h3>
    </center>
    <i>План:</i><br <p="">
    Реализация на свързани списъци - класове, итератори,&nbsp; операции
    <hr width="100%" size="2">
    <p>* Ще реализираме свързан списък с елементи - низове. <br>
    </p>
    <p><img
        src="../../../2014/NETB151/slides/ch16/images/linked_list_1.png"
        alt="list" width="809" height="163"><br>
      * Всеки връх на списъка съдържа низ и два указателя - адреси на
      предишен и следващ връх на свързания списък.<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 255); font-weight: bold;">class</span> <span style="font-weight: bold;">Node</span> {<br><span style="color: rgb(51, 102, 255); font-weight: bold;">public:</span><br>   <span style="font-weight: bold;">Node</span>(string s);<br><span style="color: rgb(51, 102, 255); font-weight: bold;">private:</span><br>   string data;     // данна (низ)<br>   <span style="font-weight: bold;">Node</span>* previous;  // адрес на предишния връх<br>   <span style="font-weight: bold;">Node</span>* next;      // адрес на следващия връх<span style="color: rgb(51, 51, 255); font-weight: bold;"><br>friend class</span> <span style="font-weight: bold;">List</span>;<br><span style="color: rgb(51, 51, 255); font-weight: bold;">friend class</span> <span style="font-weight: bold;">Iterator</span>;<br>};</pre>
    <p>* Ключовата дума <tt>friend</tt> означава, че класът <tt>Node</tt>
      дава на член-функциите на класовете <tt>List</tt> и <tt>Iterator</tt>
      достъп до частните си членове. <br>
      * Указателят <tt>previous</tt> на първия елемент на свързния
      списък има стойност <tt>NULL</tt>.<br>
      * Указателят <tt>next</tt> на последния елемент на свързния
      списък има стойност <tt>NULL</tt>. </p>
    <hr width="100%" size="2">* Свързан списък се задава, като се посочи
    адресът на първия му елемент.<br>
    * Всеки обект от класа <tt>List</tt> ще съдържа адресите на първия
    (задължително) и последния (за удобство) елементи на свързания
    списък.<br>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">class</span> <span style="font-weight: bold;">List</span> {<br><span style="color: rgb(51, 51, 255); font-weight: bold;">public:</span><br>   <span style="font-weight: bold;">List</span>();<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">void</span> push_back(string s);<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">void</span> insert(<span style="font-weight: bold;">Iterator</span> pos, string s);<br>   <span style="font-weight: bold;">Iterator</span> erase(<span style="font-weight: bold;">Iterator</span> pos);<br>   <span style="font-weight: bold;">Iterator</span> begin();<br>   <span style="font-weight: bold;">Iterator</span> end();<br><span style="font-weight: bold; color: rgb(51, 51, 255);">private:</span><br>   <span style="font-weight: bold;">Node</span>* first;  // адрес на първия елемент (връх, възел)<br>   <span style="font-weight: bold;">Node</span>* last;   // адрес на последния елемент (връх, възел)<br>};</pre>
    <p>* Когатo свързният списък е празен, двата указателя <tt>first</tt>
      и <tt>las</tt>t имат стойност <tt>NULL</tt>. <br>
    </p>
    <hr width="100%" size="2">
    <p>* Итераторът задава позиция (на връх) в свързания списък -
      указател <tt>position</tt>.<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 255); font-weight: bold;">class</span> <span style="font-weight: bold;">Iterator</span> {<br><span style="font-weight: bold; color: rgb(51, 51, 255);">public:</span><br>   <span style="font-weight: bold;">Iterator</span>();<br>   string get() <span style="font-weight: bold; color: rgb(51, 51, 255);">const</span>;     /* use instead of operator * of the STL iterator */<br>   <span style="font-weight: bold; color: rgb(51, 102, 255);">void</span> next();            /* use instead of operator ++ of the STL iterator */<br>   <span style="font-weight: bold; color: rgb(51, 102, 255);">void</span> previous();        /* use instead of operator -- of the STL iterator */<br>   <span style="font-weight: bold; color: rgb(51, 102, 255);">bool</span> equals(<span style="font-weight: bold;">Iterator</span> b) <span style="font-weight: bold; color: rgb(51, 51, 255);">const</span>; /* use instead of operator == of the STL iterator */<br><span style="font-weight: bold; color: rgb(51, 51, 255);">private:</span><br>   <span style="font-weight: bold;">Node</span>* position;    // адрес на връх в свързания списък<br>   <span style="font-weight: bold;">Node</span>* last;        // адрес на последния елемент на свързания списък<br><span style="font-weight: bold; color: rgb(51, 51, 255);">friend class</span> <span style="font-weight: bold;">List</span>;<br>};</pre>
    <p>* Когато итераторът задава позиция "след последния елемент",
      стойността на&nbsp; <tt>position</tt> е <tt>NULL</tt>.&nbsp; <br>
    </p>
    <hr width="100%" size="2">
    <p>** Функциите <tt>begin</tt> и <tt>end</tt> от класа <tt>List</tt>&nbsp;





















      връщат итератори:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold;">Iterator</span> <span style="font-weight: bold;">List</span>::begin() <br>{<br>   <span style="font-weight: bold;">Iterator</span> iter;<br>   iter.position = first;<br>   iter.last = last;<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">return</span> iter;<br>}<br><br><span style="font-weight: bold;">Iterator</span> <span style="font-weight: bold;">List</span>::end() <br>{<br>   <span style="font-weight: bold;">Iterator</span> iter;<br>   iter.position = NULL;<br>   iter.last = last;<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">return</span> iter;<br>}<br></pre>
    <hr width="100%" size="2">
    <p>** Функцията <tt>next</tt> от класа <tt>Iterator</tt> премества
      итератора на следващия елемент на списъка:<br>
    </p>
    <img alt=""
      src="../../../2014/NETB151/slides/ch16/images/iterator_next.png"
      width="775" height="473">
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">void</span> <span style="font-weight: bold;">Iterator</span>::next()<br>{  <br>   assert(position != NULL)<br>   position = position-&gt;next;<br>}</pre>
    <p>* Подобна е функцията <tt>previous</tt>:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">void</span> <span style="font-weight: bold;">Iterator</span>::previous()<br>{  <span style="font-weight: bold; color: rgb(51, 51, 255);"><br>   if</span> (position == NULL) position = last;<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">else</span>    position = position-&gt;previous;<br>   assert(position != NULL);<br>}</pre>
    <hr width="100%" size="2">
    <p>** Реализация на функция <tt>push_back</tt> от класа <tt>List</tt>:<br>
    </p>
    <img alt=""
      src="../../../2014/NETB151/slides/ch16/images/appending.png"
      width="784" height="326">
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">void</span> <span style="font-weight: bold;">List</span>::push_back(string s)<br>{  <br>   <span style="font-weight: bold;">Node</span>* newnode = <span style="font-weight: bold; color: rgb(51, 102, 255);">new</span> <span style="font-weight: bold;">Node</span>(s);<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">if</span> (last == NULL) /* list is empty */<br>   {   <br>      first = newnode;<br>      last = newnode;<br>   }<br>   <span style="font-weight: bold; color: rgb(51, 51, 255);">else         </span>/* list is nonempty */   <br>  {  <br>      newnode-&gt;previous = last;<br>      last-&gt;next = newnode;<br>      last = newnode;<br>   }<br>}</pre>
    <hr width="100%" size="2">
    <p>** Функцията <tt>insert</tt> променя данни на предишния (<tt>next</tt>)
      и следващия (<tt>previous</tt>) върхове - важен е редът на
      присвояванията.<img alt=""
        src="../../../2014/NETB151/slides/ch16/images/insert_node.png"
        width="760" height="366"> </p>
    <p>* Специален случай за празен списък:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">if</span> (iter.position == NULL)<br>{  <br>   push_back(s);<br>   <span style="font-weight: bold;"><span style="color: rgb(51, 51, 255);">return</span></span>;<br>}</pre>
    <p>* Създаваме указатели към двата съседни върха:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold;">Node</span>* after = iter.position;<br><span style="font-weight: bold;">Node</span>* before = after-&gt;previous;</pre>
    <p>* Инициализираме адресите на новия връх:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">newnode-&gt;previous = before; // (1)<br>newnode-&gt;next = after;      // (2)</pre>
    <p>* Променяме указателите за следващ и предишен на съседните
      върхове:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">after-&gt;previous = newnode;  // (3)<br><span style="font-weight: bold; color: rgb(51, 51, 255);">if</span> (before == NULL) /* insert at beginning */<br>   first = newnode;<br><span style="font-weight: bold; color: rgb(51, 51, 255);">else</span><br>   before-&gt;next = newnode;  // (4)</pre>
    <hr width="100%" size="2">
    <p>** Реализация на функцията за изтриване на връх.<br>
      <img alt=""
        src="../../../2014/NETB151/slides/ch16/images/remove_node.png"
        width="851" height="251"><br>
    </p>
    <p>* Дефинираме указатели за трите върха:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold;">Node</span>* remove = iter.position;<br><span style="font-weight: bold;">Node</span>* before = remove-&gt;previous;<br><span style="font-weight: bold;">Node</span>* after = remove-&gt;next;</pre>
    <p>* Променяме предишния връх - "откачваме" върха, който ще трием, и
      "закачваме" следващия връх.<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">if</span> (remove == first) first = after;<br><span style="font-weight: bold; color: rgb(51, 51, 255);">else</span>   before-&gt;next = after;</pre>
    <p>* Аналогично и за следвашия връх:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">if</span> (remove == last) last = before;<br><span style="font-weight: bold; color: rgb(51, 51, 255);">else</span>   after-&gt;previous = before;</pre>
    <p>* Накрая изтриваме върха.<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-weight: bold; color: rgb(51, 51, 255);">delete</span> remove;</pre>
    <hr width="100%" size="2">
    <p>* Ето и целия текст на програмата: <br>
    </p>
    <p> <b><tt><font color="#000099">// <a
              href="../../../2014/NETB151/sources/ch16/list2.cpp">list2.cpp</a><br>
          </font></tt></b><a
        href="../../../2014/NETB151/sources/ch16/list2.cpp">&nbsp;</a><br>
      <b><tt><font color="#000099">#include &lt;string&gt;</font></tt></b>
      <br>
      <b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
      <br>
      <b><tt><font color="#000099">#include &lt;cassert&gt;</font></tt></b>
      <br>
      <b><tt><font color="#000099">using namespace std;</font></tt></b>
    </p>
    <p><b><tt>/* <font color="#993300">декларации на класовете List и
            Iterator за да могат да бъдат използвани при дефиниране на
            List</font>*/</tt></b> <br>
      <b><tt><font color="#000099">class List;</font></tt></b> <br>
      <b><tt><font color="#000099">class Iterator;<br>
          </font></tt></b>&nbsp;<br>
      <b><tt>/* <font color="#993300">елемент на свързания списък</font>
          */</tt></b> <br>
      <b><tt><font color="#000099">class Node {</font></tt></b> <br>
      <b><tt><font color="#000099">public:</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node(string);</font></tt></b>
      <br>
      <b><tt><font color="#000099">private:</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; string data;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node* previous;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node* next;</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* член-функциите на класовете List и
            Iterator имат достъп до частните членове на класа Node */</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; friend class List;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; friend class Iterator;</font></tt></b>
      <br>
      <b><tt><font color="#000099">};</font></tt></b> </p>
    <p><b><tt><font color="#000099">class List {</font></tt></b> <br>
      <b><tt><font color="#000099">public:</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; List();</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; void push_back(string);</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; void insert(Iterator,
            string);</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; void erase(Iterator);</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Iterator begin(); /*
            начало на свързания списък */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Iterator
            end();&nbsp;&nbsp; /* край на свързания списък */</font></tt></b>
      <br>
      <b><tt><font color="#000099">private:</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node* first;&nbsp; /*
            първи елемент на свързания списък */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node* last;&nbsp;&nbsp;
            /* последен елемент на свързания списък */</font></tt></b> <br>
      <b><tt><font color="#000099">};</font></tt></b> </p>
    <p><b><tt><font color="#000099">class Iterator {</font></tt></b> <br>
      <b><tt><font color="#000099">public:</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Iterator();</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; string get() const; /*
            реализира операция * за итератори */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; void
            next();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /*
            реализира операция ++ за итератори */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; void
            previous();&nbsp;&nbsp;&nbsp; /* реализира операция -- за
            итератори */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; bool not_equal(Iterator)
            const; /* реализира операция != */</font></tt></b> <br>
      <b><tt><font color="#000099">private:</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node* position; /* текущ
            елемент на свързания списък */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Node*
            last;&nbsp;&nbsp;&nbsp;&nbsp; /* последен елемент на
            свързания списък */<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">/* член-функциите на класа List имат
            достъп до частните членове на Iterator */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; friend class List;</font></tt></b>
      <br>
      <b><tt><font color="#000099">};</font></tt></b> </p>
    <p><b><tt><font color="#000099">Node::Node(string s)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ПОЛУЧАВА: s - данната, която ще се
            съхранява в този елемент */</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp;&nbsp; data = s;&nbsp; <br>
            &nbsp;&nbsp; previous = NULL;&nbsp; next = NULL; <br>
            }</font></tt></b> </p>
    <p><b><tt><font color="#000099">List::List()</font></tt></b> <br>
      <b><tt><font color="#000099">/* ЦЕЛ: </font>конструира празен
          свързан списък */</tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp;&nbsp; first = NULL; last = NULL; <br>
            }</font></tt></b> </p>
    <p><b><tt><font color="#000099">void List::push_back(string s)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: добавя елемент към свързан
            спесък</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: s - данната,
            която ще се добави</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; Node* newnode = new Node(s);</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; if (last ==
            NULL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            /* </font>празен свързан списък<font color="#000099"> */</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; { <br>
            &nbsp;&nbsp;&nbsp;&nbsp; first = </font></tt></b><b><tt><font
            color="#000099"><b><tt><font color="#000099">newnode</font></tt></b>;
            last = </font></tt></b><b><tt><font color="#000099"><b><tt><font
                  color="#000099">newnode</font></tt></b>; <br>
            &nbsp; }</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; else</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; { </font></tt></b><b><tt><font
            color="#000099"><b><tt><font color="#000099"><br>
                  &nbsp;&nbsp;&nbsp; newnode</font></tt></b>-&gt;previous




















            = last;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; last-&gt;next = </font></tt></b><b><tt><font
            color="#000099"><b><tt><font color="#000099">newnode</font></tt></b>;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; last = </font></tt></b><b><tt><font
            color="#000099"><b><tt><font color="#000099">newnode</font></tt></b>;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; }</font></tt></b> <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">void List::insert(Iterator iter,
            string s)</font></tt></b> <br>
      <b><tt><font color="#000099">/* ЦЕЛ: вмъква елемент в свързан
            списък</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: iter -
            позицията, преди която да се вмъкне</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
s























            - данната, която ще се вмъкне</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; if (iter.position == NULL) /* вмъкване в края */</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; { <br>
            &nbsp;&nbsp;&nbsp;&nbsp; push_back(s);&nbsp; return;&nbsp; <br>
            &nbsp; }</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; Node* after = iter.position;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; Node* before =
            after-&gt;previous;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; Node* </font></tt></b><b><tt><font
            color="#000099"><b><tt><font color="#000099">newnode </font></tt></b>=
            new Node(s);<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">&nbsp; newnode-&gt;previous = before;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; newnode-&gt;next = after;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; after-&gt;previous = newnode;<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">&nbsp; if (before == NULL) first =
            newnode; /* вмъкване в началото */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; else before-&gt;next =
            newnode;</font></tt></b> <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">void List::erase(Iterator iter)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: отстранява елемент от свързан
            списък</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: iter -
            позицията на елемента, който ще се отстрани</font></tt></b>
      <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; assert(iter.position != NULL);<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">&nbsp; Node* remove = iter.position;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; Node* before =
            remove-&gt;previous;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; Node* after = remove-&gt;next;<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">&nbsp; if (remove == first) first =
            after;/* изтриване на първия елемент */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;
            else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            before-&gt;next = after;<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">&nbsp; if (remove == last)&nbsp; last
            = before;/* изтриване на последния елемент */</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;
            else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; after-&gt;previous =
            before;<br>
          </font></tt></b>&nbsp;<br>
      <b><tt><font color="#000099">&nbsp; iter.position = after;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; delete remove;</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">Iterator List::begin()</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ВРЪЩА: итератор, сочещ към
            началната позиция на свързан списък */</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; Iterator iter;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; iter.position = first;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; iter.last = last;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; return iter;</font></tt></b> <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">Iterator List::end()</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ВРЪЩА: итератор, сочещ след края
            на списъка (NULL) */</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; Iterator iter;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; iter.position = NULL;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; iter.last = last;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp; return iter;</font></tt></b> <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">Iterator::Iterator()</font></tt></b>
      <br>
      <b><tt><font color="#000099">{&nbsp; <br>
            &nbsp; position = NULL;&nbsp;&nbsp; last = NULL;&nbsp; <br>
            }</font></tt></b> </p>
    <p><b><tt><font color="#000099">string Iterator::get() const</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ВРЪЩА: данната на елемента, който
            сочи итератора */</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; assert(position != NULL);</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; return position-&gt;data;</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">void Iterator::next()</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: да премести итератора на
            следващия елемент от списъка */</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; assert(position != NULL);</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; position = position-&gt;next;</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">void Iterator::previous()</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: да премести итератора на
            предишния елемент от списъка */</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; if (position == NULL)&nbsp; position = last;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;
            else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
position























            = position-&gt;previous;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; assert(position != NULL);</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <p><b><tt><font color="#000099">bool Iterator::not_equal(Iterator b)
            const</font></tt></b> <br>
      <b><tt><font color="#000099">/* ЦЕЛ: сравнява два итератора</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: b - вторият
            итератор за сравнението</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: true ако този
            итератор и b не са равни</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{ <br>
            &nbsp; return position != b.position; <br>
            }</font></tt></b></p>
    <table width="100%" cellspacing="2" cellpadding="2" border="1">
      <tbody>
        <tr>
          <td valign="top">
            <p><b><tt><font color="#000099">int main()</font></tt></b> <br>
              <b><tt><font color="#000099">{ <br>
                    &nbsp; List staff;&nbsp; <br>
                    /* обект от класа List */<br>
                  </font></tt></b>&nbsp;<br>
              <b><tt><font color="#000099">&nbsp;
                    staff.push_back("Cracker, Carl");</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;
                    staff.push_back("Hacker, Harry");</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp; staff.push_back("Lam,
                    Larry");</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;
                    staff.push_back("Sandman, Susan");<br>
                  </font></tt></b></p>
            <p><b><tt><font color="#000099">&nbsp; Iterator pos; </font></tt></b>
              <b><tt><font color="#000000"><br>
                    /* итератор на списък */</font></tt></b> </p>
            <p><b><tt><font color="#000099">/* добавя елемент на
                    четвърто място */</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp; pos = staff.begin();</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;
                    pos.next();&nbsp;&nbsp; <br>
                    &nbsp; pos.next();&nbsp;&nbsp; <br>
                    &nbsp; pos.next();</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp; staff.insert(pos,
                    "Reindeer, Rudolf");</font></tt></b> </p>
            <p><b><tt><font color="#000099">/* отстранява втория елемент
                    */</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp; pos = staff.begin();</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp; pos.next();</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp; staff.erase(pos);</font></tt></b>
            </p>
            <b><tt><font color="#000099">/* отпечатва свързания списък
                  */</font></tt></b> <br>
            <b><tt><font color="#000099">&nbsp; for (pos =
                  staff.begin(); pos.not_equal(staff.end());</font></tt></b>
            <br>
            <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;





                  pos.next()) cout &lt;&lt; pos.get() &lt;&lt; "\n";<br>
                </font></tt></b><b><tt>&nbsp;/* извежда данната на
                текущата позиция */<br>
                <br>
              </tt></b> <b><tt><font color="#000099">&nbsp; return 0;</font></tt></b>
            <br>
            <b><tt><font color="#000099">}</font></tt></b></td>
          <td valign="top">
            <p><b><tt><font color="#000099">int main()</font></tt></b> <br>
              <b><tt><font color="#000099">{&nbsp; <br>
                    &nbsp;&nbsp; list&lt;string&gt; staff;</font><font
                    color="#000000"><br>
                    /* шаблон за списък */</font></tt></b> </p>
            <p><b><tt><font color="#000099">&nbsp;&nbsp;
                    staff.push_back("Cracker, Carl");</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp;
                    staff.push_back("Hacker, Harry");</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp;
                    staff.push_back("Lam, Larry");</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp;
                    staff.push_back("Sandman, Susan");</font></tt></b> </p>
            <p><b><tt><font color="#000099">&nbsp;&nbsp;
                    list&lt;string&gt;::iterator pos;</font></tt></b> <b><tt><font
                    color="#000000"><br>
                    /* итератор на списък */</font></tt></b> </p>
            <p><b><tt><font color="#000099">/* добавя елемент на
                    четвърто място */</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; pos =
                    staff.begin();</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;&nbsp;
                    staff.insert(pos, "Reindeer, Rudolf");</font></tt></b>
            </p>
            <p><b><tt><font color="#000099">/* отстранява втория елемент
                    */</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; pos =
                    staff.begin();</font></tt></b> <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;&nbsp;
                    staff.erase(pos);</font></tt></b> </p>
            <p><b><tt><font color="#000000">/* обхождане на списък */</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;&nbsp; for (pos =
                    staff.begin(); pos != staff.end(); pos++)</font></tt></b>
              <br>
              <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;




                    cout &lt;&lt; *pos &lt;&lt; "\n";</font></tt></b>&nbsp;




              <br>
              <b><tt><font color="#000000">/* извежда данната на
                    текущата позиция */<br>
                  </font></tt></b>&nbsp;<br>
              <b><tt><font color="#000099">&nbsp;&nbsp; return 0;</font></tt></b>
              <br>
              <b><tt><font color="#000099">}</font></tt></b> </p>
          </td>
        </tr>
      </tbody>
    </table>
    <p>Резултат от работата на програмата:<br>
    </p>
    <table width="100%" cellpadding="4" border="">
      <tbody>
        <tr>
          <td> <b><tt><font color="#993300">Cracker, Carl</font></tt></b>
            <br>
            <b><tt><font color="#993300">Lam, Larry</font></tt></b> <br>
            <b><tt><font color="#993300">Reindeer, Rudolf</font></tt></b>
            <br>
            <b><tt><font color="#993300">Sandman, Susan</font></tt></b>
          </td>
        </tr>
      </tbody>
    </table>
    <p>Начално състояние на списъка: </p>
    <table cols="5" width="548" height="71">
      <tbody>
        <tr>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Cracker, Carl</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">NULL</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Hacker, Harry</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Lam, Larry</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Sandman, Susan</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">NULL</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td> <br>
          </td>
        </tr>
      </tbody>
    </table>
    <p><font color="#000000">След добавяне на елемент на четвърто място:<br>
      </font></p>
    <table width="674" cellspacing="2" cellpadding="2" border="0"
      height="99">
      <tbody>
        <tr>
          <td valign="top">
            <table width="100%" cellspacing="2" cellpadding="2"
              border="1">
              <tbody>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">Cracker,
                          Carl</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">NULL</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
            <br>
          </td>
          <td valign="top">
            <table width="100%" cellspacing="2" cellpadding="2"
              border="1">
              <tbody>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">Hacker,
                          Harry</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
            <br>
          </td>
          <td valign="top">
            <table width="100%" cellspacing="2" cellpadding="2"
              border="1">
              <tbody>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">Lam,
                          Larry</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
            <br>
          </td>
          <td valign="top">
            <table width="100%" cellspacing="2" cellpadding="2"
              border="1">
              <tbody>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">Reindeer,

                          Rudolf</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
            <br>
          </td>
          <td valign="top">
            <table width="100%" cellspacing="2" cellpadding="2"
              border="1">
              <tbody>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">Sandman,
                          Susan</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td valign="top"><b><tt><font color="#000099">NULL</font></tt></b></td>
                </tr>
              </tbody>
            </table>
            <br>
          </td>
          <td valign="top"><br>
          </td>
        </tr>
      </tbody>
    </table>
    <font color="#000000">След отстраняване на втория елемент:</font>
    <table cols="5" width="557" height="83">
      <tbody>
        <tr>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Cracker, Carl</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">NULL</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Lam, Larry</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Reindeer, Rudolf</font></tt></b></td>
                </tr>
                <tr>
                  <td><tt><b><font color="#000099">&lt;-</font></b></tt></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">-&gt;</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table width="100%" cellspacing="0" cellpadding="2"
              border="">
              <tbody>
                <tr>
                  <td><b><tt><font color="#000099">Sandman, Susan</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">&lt;-</font></tt></b></td>
                </tr>
                <tr>
                  <td><b><tt><font color="#000099">NULL</font></tt></b></td>
                </tr>
              </tbody>
            </table>
          </td>
          <td> <br>
          </td>
        </tr>
      </tbody>
    </table>
    <hr width="100%">
  </body>
</html>
