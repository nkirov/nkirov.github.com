<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>lec08</title>
  </head>
  <body>
    <h3 align="center"> 8. Сортиране и търсене</h3>
    <b> ** Сортиране чрез селекция (пряка селекция)</b>
    <ul>
      <li><font size="+1"><span style="color: rgb(0, 0, 0); font-family:
            Times; font-size: medium; font-style: normal; font-variant:
            normal; font-weight: normal; letter-spacing: normal;
            line-height: normal; orphans: auto; text-align: start;
            text-indent: 0px; text-transform: none; white-space: normal;
            widows: 1; word-spacing: 0px; -webkit-text-stroke-width:
            0px; display: inline !important; float: none;">Алгоритъмът
            се състои в следното: на всяка стъпка намираме най-малкия
            елемент (от ненаредената част на масива) и го поставяме на
            място (чрез размяна) в наредения масив.<span
              class="Apple-converted-space"> </span></span><br>
        </font></li>
      <li><font size="+1">Пример:
          <blockquote>
            <table bgcolor="black" border="1" cellpadding="6">
              <tbody>
                <tr bgcolor="#ffffff">
                  <td style="font-weight: bold;" width="40">
                    <div align="center"><tt><font size="+1">11</font></tt></div>
                  </td>
                  <td width="40">
                    <div align="center"><tt><font size="+1">9</font></tt></div>
                  </td>
                  <td width="40">
                    <div align="center"><tt><font size="+1">17</font></tt></div>
                  </td>
                  <td style="font-weight: bold; text-decoration:
                    underline;" width="40">
                    <div align="center"><tt><font size="+1">5</font></tt></div>
                  </td>
                  <td width="40">
                    <div align="center"><tt><font size="+1">12</font></tt></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </blockquote>
        </font></li>
      <li><font size="+1">Най-малкият елемент е 5 - поставяме го на
          първо място в масива. За да не загубим (изтрием) първия
          елемент 11, ние резменяме (<i>swap)</i><tt> </tt>двата
          елемента.
          <blockquote><font size="+1">
              <table bgcolor="black" border="1" cellpadding="6">
                <tbody>
                  <tr bgcolor="#ffffff">
                    <td bgcolor="#00ffff" width="40">
                      <div align="center"><tt><font size="+1">5</font></tt></div>
                    </td>
                    <td style="font-weight: bold; text-decoration:
                      underline;" width="40">
                      <div align="center"><tt><font size="+1">9</font></tt></div>
                    </td>
                    <td width="40">
                      <div align="center"><tt><font size="+1">17</font></tt></div>
                    </td>
                    <td width="40">
                      <div align="center"><tt><font size="+1">11</font></tt></div>
                    </td>
                    <td width="40">
                      <div align="center"><tt><font size="+1">12</font></tt></div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </font></blockquote>
        </font></li>
      <li><font size="+1">Вземаме минимума на останалите 4 елемента a[1]
          ... a[4]. Той е на правилното място и не разменяме.
          <blockquote><font size="+1"><font size="+1">
                <table bgcolor="black" border="1" cellpadding="6">
                  <tbody>
                    <tr bgcolor="#ffffff">
                      <td bgcolor="#00ffff" width="40">
                        <div align="center"><tt><font size="+1">5</font></tt></div>
                      </td>
                      <td bgcolor="#00ffff" width="40">
                        <div align="center"><tt><font size="+1">9</font></tt></div>
                      </td>
                      <td style="font-weight: bold;" width="40">
                        <div align="center"><tt><font size="+1">17</font></tt></div>
                      </td>
                      <td style="font-weight: bold; text-decoration:
                        underline;" width="40">
                        <div align="center"><tt><font size="+1">11</font></tt></div>
                      </td>
                      <td width="40">
                        <div align="center"><tt><font size="+1">12</font></tt></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </font></font></blockquote>
        </font></li>
      <li><font size="+1">Повтаряме процеса с несортираната част от
          масива.
          <blockquote><font size="+1"><font size="+1">
                <table bgcolor="black" border="1" cellpadding="6">
                  <tbody>
                    <tr bgcolor="#ffffff">
                      <td bgcolor="#00ffff" width="40">
                        <div align="center"><tt><font size="+1">5</font></tt></div>
                      </td>
                      <td bgcolor="#00ffff" width="40">
                        <div align="center"><tt><font size="+1">9</font></tt></div>
                      </td>
                      <td bgcolor="#00ffff" width="40">
                        <div align="center"><tt><font size="+1">11</font></tt></div>
                      </td>
                      <td style="font-weight: bold;" width="40">
                        <div align="center"><tt><font size="+1">17</font></tt></div>
                      </td>
                      <td style="font-weight: bold; text-decoration:
                        underline;" width="40">
                        <div align="center"><tt><font size="+1">12</font></tt></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </font></font></blockquote>
        </font></li>
      <li><font size="+1">Продължаваме докато остане само един
          "несортиран" елемент.
          <blockquote><font size="+1"><font size="+1"><font size="+1">
                  <table bgcolor="black" border="1" cellpadding="6">
                    <tbody>
                      <tr bgcolor="#ffffff">
                        <td bgcolor="#00ffff" width="40">
                          <div align="center"><tt><font size="+1">5</font></tt></div>
                        </td>
                        <td bgcolor="#00ffff" width="40">
                          <div align="center"><tt><font size="+1">9</font></tt></div>
                        </td>
                        <td bgcolor="#00ffff" width="40">
                          <div align="center"><tt><font size="+1">11</font></tt></div>
                        </td>
                        <td bgcolor="#00ffff" width="40">
                          <div align="center"><tt><font size="+1">12</font></tt></div>
                        </td>
                        <td width="40">
                          <div align="center"><tt><font size="+1">17</font></tt></div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </font></font></font></blockquote>
        </font></li>
    </ul>
    <h2>
      <meta charset="utf-8">
    </h2>
    <pre><tt>// <a href="../../../2014/NETB151/sources/ch15/selsort.cpp">selsort.cpp</a><br>01: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
02: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;vector&gt;</font>
03: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;cstdlib&gt;</font>
04: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;ctime&gt;</font>
06: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
08: <i><font color="#9a1900">/**</font></i>
09: <i><font color="#9a1900">   Swaps two integers.</font></i>
10: <i><font color="#9a1900">   @param x the first integer to swap</font></i>
11: <i><font color="#9a1900">   @param y the second integer to swap</font></i>
12: <i><font color="#9a1900">*/</font></i>
13: <font color="#009900">void</font> <b><font color="#000000">swap</font></b><font color="#990000">(</font><font color="#009900">int</font><font color="#990000">&amp;</font> x<font color="#990000">,</font> <font color="#009900">int</font><font color="#990000">&amp;</font> y<font color="#990000">)</font>
14: <font color="#ff0000">{</font>  <font color="#009900">int</font> temp <font color="#990000">=</font> x<font color="#990000">;</font>
16:    x <font color="#990000">=</font> y<font color="#990000">;</font>
17:    y <font color="#990000">=</font> temp<font color="#990000">;</font>
18: <font color="#ff0000">}</font>
20: <i><font color="#9a1900">/** </font></i>
21: <i><font color="#9a1900">    Gets the position of the smallest element in a vector range.</font></i>
22: <i><font color="#9a1900">    @param a the vector</font></i>
23: <i><font color="#9a1900">    @param from the beginning of the range</font></i>
24: <i><font color="#9a1900">    @param to the beginning of the range</font></i>
25: <i><font color="#9a1900">    @return the position of the smallest element in </font></i>
26: <i><font color="#9a1900">    the range a[from]...a[to]</font></i>
27: <i><font color="#9a1900">*/</font></i>
28: <font color="#009900">int</font> <b><font color="#000000">min_position</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font><font color="#990000">&amp;</font> a<font color="#990000">,</font> <font color="#009900">int</font> from<font color="#990000">,</font> <font color="#009900">int</font> to<font color="#990000">)</font>
29: <font color="#ff0000">{</font>  <font color="#009900">int</font> min_pos <font color="#990000">=</font> from<font color="#990000">;</font>
31:    <font color="#009900">int</font> i<font color="#990000">;</font>
32:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font>i <font color="#990000">=</font> from <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font> i <font color="#990000">&lt;</font><font color="#990000">=</font> to<font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
33:       <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>a<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">&lt;</font> a<font color="#990000">[</font>min_pos<font color="#990000">]</font><font color="#990000">)</font> min_pos <font color="#990000">=</font> i<font color="#990000">;</font>
34:    <b><font color="#0000ff">return</font></b> min_pos<font color="#990000">;</font>
35: <font color="#ff0000">}</font>
37: <i><font color="#9a1900">/** </font></i>
38: <i><font color="#9a1900">   Sorts a vector using the selection sort algorithm</font></i>
39: <i><font color="#9a1900">   @param a the vector to sort</font></i>
40: <i><font color="#9a1900">*/</font></i>
41: <font color="#009900">void</font> <b><font color="#000000">selection_sort</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font><font color="#990000">&amp;</font> a<font color="#990000">)</font>
42: <font color="#ff0000">{</font>  <font color="#009900">int</font> next<font color="#990000">;</font> <i><font color="#9a1900">/* the next position to be set to the minimum */</font></i>
44: 
45:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font>next <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> next <font color="#990000">&lt;</font> a<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">;</font> next<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
46:    <font color="#ff0000">{</font>  <i><font color="#9a1900">/* find the position of the minimum */</font></i>
48:       <font color="#009900">int</font> min_pos <font color="#990000">=</font> <b><font color="#000000">min_position</font></b><font color="#990000">(</font>a<font color="#990000">,</font> next<font color="#990000">,</font> a<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>
49:       <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>min_pos <font color="#990000">!</font><font color="#990000">=</font> next<font color="#990000">)</font>
50:          <b><font color="#000000">swap</font></b><font color="#990000">(</font>a<font color="#990000">[</font>min_pos<font color="#990000">]</font><font color="#990000">,</font> a<font color="#990000">[</font>next<font color="#990000">]</font><font color="#990000">)</font><font color="#990000">;</font>
51:    <font color="#ff0000">}</font>
52: <font color="#ff0000">}</font>
54: <i><font color="#9a1900">/** </font></i>
55: <i><font color="#9a1900">   Prints all elements in a vector</font></i>
56: <i><font color="#9a1900">   @param a the vector to print</font></i>
57: <i><font color="#9a1900">*/</font></i>
58: <font color="#009900">void</font> <b><font color="#000000">print</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font> a<font color="#990000">)</font>
59: <font color="#ff0000">{</font>  <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> a<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
61:       cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> a<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" "</font><font color="#990000">;</font>
62:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
63: <font color="#ff0000">}</font>
65: <i><font color="#9a1900">/**</font></i>
66: <i><font color="#9a1900">   Sets the seed of the random number generator.</font></i>
67: <i><font color="#9a1900">*/</font></i>
68: <font color="#009900">void</font> <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font>
69: <font color="#ff0000">{</font>  <font color="#009900">int</font> seed <font color="#990000">=</font> <b><font color="#000000">static_cast</font></b><font color="#ff0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
71:    <b><font color="#000000">srand</font></b><font color="#990000">(</font>seed<font color="#990000">)</font><font color="#990000">;</font>
72: <font color="#ff0000">}</font>
74: <i><font color="#9a1900">/** </font></i>
75: <i><font color="#9a1900">   Computes a random integer in a range.</font></i>
76: <i><font color="#9a1900">   @param a the bottom of the range</font></i>
77: <i><font color="#9a1900">   @param b the top of the range</font></i>
78: <i><font color="#9a1900">   @return a random integer x, a &lt;= x and x &lt;= b</font></i>
79: <i><font color="#9a1900">*/</font></i>
80: <font color="#009900">int</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#009900">int</font> a<font color="#990000">,</font> <font color="#009900">int</font> b<font color="#990000">)</font>
81: <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> a <font color="#990000">+</font> <b><font color="#000000">rand</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">%</font> <font color="#990000">(</font>b <font color="#990000">-</font> a <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>  <font color="#ff0000">}</font>
84: 
85: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
86: <font color="#ff0000">{</font>  <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
88:    vector<font color="#ff0000">&lt;int&gt;</font> <b><font color="#000000">v</font></b><font color="#990000">(</font><font color="#993399">20</font><font color="#990000">)</font><font color="#990000">;</font>
89:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
90:       v<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#993399">100</font><font color="#990000">)</font><font color="#990000">;</font>
91:    <b><font color="#000000">print</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font>
92:    <b><font color="#000000">selection_sort</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font>
93:    <b><font color="#000000">print</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font>
94:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
95: <font color="#ff0000">}</font>
</tt></pre>
    <hr size="2" width="100%"><b>** Оценка на ефективността на
      алгоритъма за пряка селеция</b><br>
    <ul>
      <li><font size="+1">To measure the performance of a program, one
          could simply run it and measure how long it takes by using a
          stopwatch. </font></li>
      <li><font size="+1">Recall that default construction for the <tt>Time</tt>
          class initializes the object to the current time.
          <blockquote>
            <pre>Time now</pre>
          </blockquote>
        </font></li>
      <li> <font size="+1">We can use <tt>Time</tt> objects to measure
          the performance of the sorting algorithm. </font>
        <blockquote>
          <pre><font size="+1">Time before;<br>selection_sort(v);<br>Time after;<br><br>cout &lt;&lt; "Elapsed time = " &lt;&lt; after.seconds_from(before)<br>     &lt;&lt; " seconds\n";<br></font></pre>
        </blockquote>
      </li>
    </ul>
    <ul>
      <li> <a href="../../../2014/NETB151/sources/ch15/sorttime.cpp"><big><span
              style="font-family: monospace;">sorttime.cpp</span></big></a><br>
      </li>
      <li> <font size="+1">Here are results obtained on a Pentium III
          processor with a clock speed of 750 MHz running Linux.
          <table border="0" cellpadding="6">
            <tbody>
              <tr>
                <td><img alt=""
                    src="../../../2014/NETB151/slides/ch15/images/selection_times.png"
                    height="377" width="348"></td>
                <td width="10%">&nbsp;</td>
                <td><img alt=""
                    src="../../../2014/NETB151/slides/ch15/images/selection_graph.png"
                    height="422" width="582"></td>
              </tr>
            </tbody>
          </table>
        </font> </li>
      <li> <font size="+1">Actually numbers will look different, but
          the relationship between the numbers will be the same.
          Doubling the size of the data more than doubles the time
          needed to sort it. </font> <br>
        <table height="174" border="0" cellpadding="2" cellspacing="2"
          width="100%">
          <tbody>
            <tr>
              <td valign="top"> <font size="+1">
                  <table style="text-align: left; width: 328px;"
                    border="1" cellpadding="2" cellspacing="0">
                    <tbody>
                      <tr>
                        <td style="vertical-align: top;" align="right"><big><span
                              style="font-style: italic;">n</span><br>
                          </big></td>
                        <td style="vertical-align: top;" align="right"><big>seconds<br>
                          </big></td>
                      </tr>
                      <tr>
                        <td style="vertical-align: top;" align="right"><big>5000<br>
                          </big></td>
                        <td style="vertical-align: top;" align="right"><big>1<br>
                          </big></td>
                      </tr>
                      <tr>
                        <td style="vertical-align: top;" align="right"><big>10000<br>
                          </big></td>
                        <td style="vertical-align: top;" align="right"><big>4<br>
                          </big></td>
                      </tr>
                      <tr>
                        <td style="vertical-align: top;" align="right"><big>20000<br>
                          </big></td>
                        <td style="vertical-align: top;" align="right"><big>15<br>
                          </big></td>
                      </tr>
                      <tr>
                        <td style="vertical-align: top;" align="right"><big>40000<br>
                          </big></td>
                        <td style="vertical-align: top;" align="right"><big>61<br>
                          </big></td>
                      </tr>
                    </tbody>
                  </table>
                </font> </td>
              <td valign="top">&nbsp; &nbsp; &nbsp; <br>
              </td>
              <td valign="top"><font size="+1"><br>
                  The results obtained on a Intel Core2 CPU T7200
                  processor with a clock speed of 2 GHz running MS
                  Windows. </font></td>
            </tr>
          </tbody>
        </table>
      </li>
      <li> <font size="+1">To analyze the selection sort algorithm, we
          will count how often an array element is <i>visited</i>.</font>
      </li>
      <li> <font size="+1">For a vector with <i>n</i> elements, we
          must visit all <i>n</i> of them to find the smallest one.
          Then visit two elements to swap them.</font> </li>
      <li><font size="+1">In the next step, we visit <i>n</i> - 1
          elements to find the minimum, plus two elements to swap.</font></li>
      <li> <font size="+1">In the next step, we visit (<i>n</i> - 2) +
          2 elements.</font> </li>
      <li><font size="+1">The total elements visited is
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/selection_computation.png"
              height="158" width="731"></blockquote>
          because
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/sumation_formula.png"
              height="86" width="394"></blockquote>
        </font></li>
    </ul>
    <ul>
      <li> <font size="+1">The formula for the number of visits in the
          selection sort algorithm is (1/2)&nbsp;<i>n</i><sup>2</sup>&nbsp;+&nbsp;(5/2)&nbsp;<i>n</i>&nbsp;-&nbsp;3.</font>
      </li>
      <li><font size="+1">For large values of <i>n</i>, the latter
          terms in the formula have no significant contribution, so we
          just ignore them.
          <blockquote>
            <table border="1" cellpadding="6" cellspacing="0">
              <tbody>
                <tr>
                  <td width="90">
                    <div align="center"><font size="+1"><i>n</i></font></div>
                  </td>
                  <td width="90">
                    <div align="center"><font size="+1">(1/2) <i>n</i><sup>2</sup></font></div>
                  </td>
                  <td width="90">
                    <div align="center"><font size="+1">(5/2) <i>n</i>
                        - 3</font></div>
                  </td>
                </tr>
                <tr>
                  <td width="90">
                    <div align="center"><font size="+1">1000</font></div>
                  </td>
                  <td width="90">
                    <div align="center"><font size="+1">500 000</font></div>
                  </td>
                  <td width="90">
                    <div align="center"><font size="+1">2 497</font></div>
                  </td>
                </tr>
                <tr>
                  <td width="90">
                    <div align="center"><font size="+1">2000</font></div>
                  </td>
                  <td width="90">
                    <div align="center"><font size="+1">2 000 000</font></div>
                  </td>
                  <td width="90">
                    <div align="center"><font size="+1">4 997</font></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </blockquote>
        </font></li>
      <li> <font size="+1">When comparing the ratios of counts for
          different values of <i>n</i>, the coefficient 1/2 cancels
          out.</font> </li>
      <li> <font size="+1">We simply say "The number of visits is of
          order <i>n</i><sup>2</sup>" and use <i>big-Oh notation</i>:
          The number of visits is <i>O</i>(<i>n</i><sup>2</sup>).</font>
      </li>
      <li><font size="+1">For selection sort, <span style="font-style:
            italic;">doubling</span> the number of elements increases
          the time needed for sorting <span style="font-style: italic;">fourfold</span>.</font></li>
      <li><font size="+1">If a <i>n</i> = 10000 element vector takes 4
          seconds, a <i>m</i> = 1 million element vector will require
          over 11 hours!<br>
          (<i>m</i> = 100<i>n</i>, <i>t<sub>m</sub></i> = 100<sup>2</sup><i>t<sub>n</sub></i>
          = 4.100<sup>2</sup> seconds = 4.100.100/3600 &gt; 11 hours!)</font></li>
    </ul>
    <hr style="width: 100%; height: 2px;"> ** <b>Сортиране чрез сливане</b><br>
    <ul>
      <li><font size="+1">Suppose you have a vector of 10 integers, with
          the first and second half already sorted:
          <blockquote><img
src="file:///Users/nkirov/nkirov.github.com/2014/NETB151/slides/ch15/images/sorted_halves.png"></blockquote>
        </font></li>
      <li> <font size="+1">It is an easy matter to merge the two sorted
          halves by taking a new element form either the first or second
          subvector and choosing the smaller of the elements each time:
        </font>
        <p><font size="+1"><img
src="file:///Users/nkirov/nkirov.github.com/2014/NETB151/slides/ch15/images/merge.png"></font></p>
      </li>
    </ul>
    <ul>
      <li><font size="+1">The computer keeps dividing the vector into
          smaller and smaller subvectors, sorting each half and merging
          them back together.
          <blockquote>
            <pre>void merge_sort(vector&lt;int&gt;&amp; a, int from, int to)<br>{  if (from == to) return;<br>   int mid = (from + to) / 2;<br>   /* sort the first and second half */<br>   merge_sort(a, from, mid);<br>   merge_sort(a, mid + 1, to);<br>   merge(a, from, mid, to);<br>}</pre>
          </blockquote>
        </font></li>
      <li><font size="+1">The merge procedure then merges the two sorted
          halves of the vector.</font></li>
    </ul>
    <h2> </h2>
    <pre><tt>// <a href="../../../2014/NETB151/sources/ch15/mergsort.cpp">mergsort.cpp</a><br>001: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
002: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;vector&gt;</font>
003: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;cstdlib&gt;</font>
004: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;ctime&gt;</font>
006: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
008: <i><font color="#9a1900">/** </font></i>
009: <i><font color="#9a1900">   Merges two adjacent ranges in a vector</font></i>
010: <i><font color="#9a1900">   @param a the vector with the elements to merge</font></i>
011: <i><font color="#9a1900">   @param from the start of the first range</font></i>
012: <i><font color="#9a1900">   @param mid the end of the first range</font></i>
013: <i><font color="#9a1900">   @param to the end of the second range</font></i>
014: <i><font color="#9a1900">*/</font></i>
015: <font color="#009900">void</font> <b><font color="#000000">merge</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font><font color="#990000">&amp;</font> a<font color="#990000">,</font> <font color="#009900">int</font> from<font color="#990000">,</font> <font color="#009900">int</font> mid<font color="#990000">,</font> <font color="#009900">int</font> to<font color="#990000">)</font>
016: <font color="#ff0000">{</font>  <font color="#009900">int</font> n <font color="#990000">=</font> to <font color="#990000">-</font> from <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font> <i><font color="#9a1900">/* size of the range to be merged */</font></i>
018:    <i><font color="#9a1900">/* merge both halves into a temporary vector b */</font></i>
019:    vector<font color="#ff0000">&lt;int&gt;</font> <b><font color="#000000">b</font></b><font color="#990000">(</font>n<font color="#990000">)</font><font color="#990000">;</font>
020: 
021:    <font color="#009900">int</font> i1 <font color="#990000">=</font> from<font color="#990000">;</font>
022:       <i><font color="#9a1900">/* next element to consider in the first half */</font></i>
023:    <font color="#009900">int</font> i2 <font color="#990000">=</font> mid <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">;</font>
024:       <i><font color="#9a1900">/* next element to consider in the second half */</font></i>
025:    <font color="#009900">int</font> j <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> <i><font color="#9a1900">/* next open position in b */</font></i>
027:    <i><font color="#9a1900">/* </font></i>
028: <i><font color="#9a1900">      As long as neither i1 nor i2 past the end, move the smaller</font></i>
029: <i><font color="#9a1900">      element into b</font></i>
030: <i><font color="#9a1900">   */</font></i>
031:    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>i1 <font color="#990000">&lt;</font><font color="#990000">=</font> mid <font color="#990000">&amp;</font><font color="#990000">&amp;</font> i2 <font color="#990000">&lt;</font><font color="#990000">=</font> to<font color="#990000">)</font>
032:    <font color="#ff0000">{</font>  <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>a<font color="#990000">[</font>i1<font color="#990000">]</font> <font color="#990000">&lt;</font> a<font color="#990000">[</font>i2<font color="#990000">]</font><font color="#990000">)</font>
034:       <font color="#ff0000">{</font>  b<font color="#990000">[</font>j<font color="#990000">]</font> <font color="#990000">=</font> a<font color="#990000">[</font>i1<font color="#990000">]</font><font color="#990000">;</font>
036:          i1<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
037:       <font color="#ff0000">}</font>
038:       <b><font color="#0000ff">else</font></b>
039:       <font color="#ff0000">{</font>  b<font color="#990000">[</font>j<font color="#990000">]</font> <font color="#990000">=</font> a<font color="#990000">[</font>i2<font color="#990000">]</font><font color="#990000">;</font>
041:          i2<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
042:       <font color="#ff0000">}</font>
043:       j<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
044:    <font color="#ff0000">}</font>
046:    <i><font color="#9a1900">/* </font></i>
047: <i><font color="#9a1900">      Note that only one of the two while loops below is executed</font></i>
048: <i><font color="#9a1900">   */</font></i>
050:    <i><font color="#9a1900">/* Copy any remaining entries of the first half */</font></i>
051:    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>i1 <font color="#990000">&lt;</font><font color="#990000">=</font> mid<font color="#990000">)</font>
052:    <font color="#ff0000">{</font>  b<font color="#990000">[</font>j<font color="#990000">]</font> <font color="#990000">=</font> a<font color="#990000">[</font>i1<font color="#990000">]</font><font color="#990000">;</font>
054:       i1<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
055:       j<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
056:    <font color="#ff0000">}</font>
057:    <i><font color="#9a1900">/* Copy any remaining entries of the second half */</font></i>
058:    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>i2 <font color="#990000">&lt;</font><font color="#990000">=</font> to<font color="#990000">)</font>
059:    <font color="#ff0000">{</font>  b<font color="#990000">[</font>j<font color="#990000">]</font> <font color="#990000">=</font> a<font color="#990000">[</font>i2<font color="#990000">]</font><font color="#990000">;</font>
061:       i2<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
062:       j<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">;</font>
063:    <font color="#ff0000">}</font>
065:    <i><font color="#9a1900">/* Copy back from the temporary vector */</font></i>
066:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font>j <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> j <font color="#990000">&lt;</font> n<font color="#990000">;</font> j<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font> a<font color="#990000">[</font>from <font color="#990000">+</font> j<font color="#990000">]</font> <font color="#990000">=</font> b<font color="#990000">[</font>j<font color="#990000">]</font><font color="#990000">;</font>
068: <font color="#ff0000">}</font>
070: <i><font color="#9a1900">/**  </font></i>
071: <i><font color="#9a1900">   Sorts the elements in a range of a vector.</font></i>
072: <i><font color="#9a1900">   @param a the vector with the elements to sort</font></i>
073: <i><font color="#9a1900">   @param from start of the range to sort</font></i>
074: <i><font color="#9a1900">   @param to end of the range to sort</font></i>
075: <i><font color="#9a1900">*/</font></i>
076: <font color="#009900">void</font> <b><font color="#000000">merge_sort</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font><font color="#990000">&amp;</font> a<font color="#990000">,</font> <font color="#009900">int</font> from<font color="#990000">,</font> <font color="#009900">int</font> to<font color="#990000">)</font>
077: <font color="#ff0000">{</font>  <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>from <font color="#990000">=</font><font color="#990000">=</font> to<font color="#990000">)</font> <b><font color="#0000ff">return</font></b><font color="#990000">;</font>
079:    <font color="#009900">int</font> mid <font color="#990000">=</font> <font color="#990000">(</font>from <font color="#990000">+</font> to<font color="#990000">)</font> <font color="#990000">/</font> <font color="#993399">2</font><font color="#990000">;</font>
080:    <i><font color="#9a1900">/* sort the first and the second half */</font></i>
081:    <b><font color="#000000">merge_sort</font></b><font color="#990000">(</font>a<font color="#990000">,</font> from<font color="#990000">,</font> mid<font color="#990000">)</font><font color="#990000">;</font>
082:    <b><font color="#000000">merge_sort</font></b><font color="#990000">(</font>a<font color="#990000">,</font> mid <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">,</font> to<font color="#990000">)</font><font color="#990000">;</font>
083:    <b><font color="#000000">merge</font></b><font color="#990000">(</font>a<font color="#990000">,</font> from<font color="#990000">,</font> mid<font color="#990000">,</font> to<font color="#990000">)</font><font color="#990000">;</font>
084: <font color="#ff0000">}</font>
086: <i><font color="#9a1900">/** </font></i>
087: <i><font color="#9a1900">   Prints all elements in a vector</font></i>
088: <i><font color="#9a1900">   @param a the vector to print</font></i>
089: <i><font color="#9a1900">*/</font></i>
090: <font color="#009900">void</font> <b><font color="#000000">print</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font> a<font color="#990000">)</font>
091: <font color="#ff0000">{</font>  <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> a<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font> cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> a<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" "</font><font color="#990000">;</font>
094:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
095: <font color="#ff0000">}</font>
097: <i><font color="#9a1900">/**</font></i>
098: <i><font color="#9a1900">   Sets the seed of the random number generator.</font></i>
099: <i><font color="#9a1900">*/</font></i>
100: <font color="#009900">void</font> <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font>
101: <font color="#ff0000">{</font>  <font color="#009900">int</font> seed <font color="#990000">=</font> <b><font color="#000000">static_cast</font></b><font color="#ff0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
103:    <b><font color="#000000">srand</font></b><font color="#990000">(</font>seed<font color="#990000">)</font><font color="#990000">;</font>
104: <font color="#ff0000">}</font>
106: <i><font color="#9a1900">/** </font></i>
107: <i><font color="#9a1900">   Computes a random integer in a range.</font></i>
108: <i><font color="#9a1900">   @param a the bottom of the range</font></i>
109: <i><font color="#9a1900">   @param b the top of the range</font></i>
110: <i><font color="#9a1900">   @return a random integer x, a &lt;= x and x &lt;= b</font></i>
111: <i><font color="#9a1900">*/</font></i>
112: <font color="#009900">int</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#009900">int</font> a<font color="#990000">,</font> <font color="#009900">int</font> b<font color="#990000">)</font>
113: <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> a <font color="#990000">+</font> <b><font color="#000000">rand</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">%</font> <font color="#990000">(</font>b <font color="#990000">-</font> a <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>  <font color="#ff0000">}</font>
116: 
117: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
118: <font color="#ff0000">{</font>  <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
120:    vector<font color="#ff0000">&lt;int&gt;</font> <b><font color="#000000">v</font></b><font color="#990000">(</font><font color="#993399">20</font><font color="#990000">)</font><font color="#990000">;</font>
121:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
122:       v<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#993399">100</font><font color="#990000">)</font><font color="#990000">;</font>
123:    <b><font color="#000000">print</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font>
124:    <b><font color="#000000">merge_sort</font></b><font color="#990000">(</font>v<font color="#990000">,</font> <font color="#993399">0</font><font color="#990000">,</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>
125:    <b><font color="#000000">print</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font>
126:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
127: <font color="#ff0000">}</font></tt></pre>
    <hr size="2" width="100%"><b>** Анализ на ефективността на
      алгоритъма за сортиране чрез сливане</b><br>
    <ul>
      <li> <a href="../../../2014/NETB151/sources/ch15/mergtime.cpp"><big><span
              style="font-family: monospace;">mergetime.cpp</span></big></a><br>
      </li>
      <li> <font size="+1">Despite appearing to be a much more
          complicated algorithm, merge sort performs much better than
          selection sort. </font>
        <p> </p>
        <table border="0" cellpadding="6">
          <tbody>
            <tr>
              <td width="244"><img alt=""
                  src="../../../2014/NETB151/slides/ch15/images/merge_times.png"
                  height="239" width="245"></td>
              <td width="10%">&nbsp;</td>
              <td width="446"><img alt=""
                  src="../../../2014/NETB151/slides/ch15/images/merge_graph.png"
                  height="323" width="446"></td>
            </tr>
          </tbody>
        </table>
      </li>
      <li><font size="+1">Note that the graph does not have a parabolic
          shape; instead it appears as if running time grows
          approximately linearly with the size of the array. </font></li>
      <li><font size="+1">
          <table style="width: 380px; height: 128px;" border="1"
            cellpadding="1" cellspacing="0">
            <tbody>
              <tr>
                <td style="vertical-align: top;" align="right"><big><i>n</i><br>
                  </big></td>
                <td style="vertical-align: top;" align="right"><big>seconds<br>
                  </big></td>
              </tr>
              <tr>
                <td style="vertical-align: top;" align="right"><big>&nbsp;200000<br>
                  </big></td>
                <td style="vertical-align: top;" align="right"><big>&nbsp;1<br>
                  </big></td>
              </tr>
              <tr>
                <td align="right"><big>&nbsp;400000<br>
                  </big></td>
                <td style="vertical-align: top;" align="right"><big>&nbsp;2<br>
                  </big></td>
              </tr>
              <tr>
                <td style="vertical-align: top;" align="right"><big>&nbsp;800000<br>
                  </big></td>
                <td style="vertical-align: top;" align="right"><big>&nbsp;4<br>
                  </big></td>
              </tr>
              <tr>
                <td style="vertical-align: top;" align="right"><big>1600000<br>
                  </big></td>
                <td style="vertical-align: top;" align="right"><big>&nbsp;8<br>
                  </big></td>
              </tr>
              <tr>
                <td align="right" valign="top"><big>3200000</big></td>
                <td align="right" valign="top"> <big>18</big><br>
                </td>
              </tr>
            </tbody>
          </table>
        </font></li>
    </ul>
    <ul>
      <li><font size="+1">To understand why the merge sort algorithm is
          such a tremendous improvement, estimate the number of array
          element visits.</font></li>
      <li> <font size="+1">First we consider the merge process. For a
          vector of <i>n</i> elements,</font>
        <ul>
          <li><font size="+1">We must visit the first two elements of
              the halves and decide which is smaller (2 visits)</font></li>
          <li><font size="+1">We must copy the smaller element to it's
              place in the sorted vector (1 visit)</font></li>
          <li><font size="+1">We must copy the sort vector back into the
              original vector (2 visits)</font></li>
        </ul>
      </li>
      <li><font size="+1">So the merge process takes 5<i>n</i> visits.</font></li>
    </ul>
    <ul>
      <li><font size="+1">To analyze the full algorithm, let <i>T</i>(<i>n</i>)
          denote the number of visits required to sort a range of <i>n</i>
          elements through the merge sort process.</font></li>
      <li><font size="+1">For each of calculation we will assume <i>n</i>
          = 2<sup><i>m</i></sup>.</font></li>
      <li><font size="+1">Because sorting each half will take <i>T</i>(<i>n</i>/2)
visits,








          we have:
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/merge_equation1.png"
              height="88" width="293"></blockquote>
        </font></li>
      <li><font size="+1">A similar analysis yields:
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/merge_equation2.png"
              height="88" width="330"></blockquote>
        </font></li>
      <li><font size="+1">Putting these two results together gives us
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/merge_equation3.png"
              height="88" width="406"></blockquote>
        </font></li>
      <li><font size="+1">Repeating the process gives us:
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/merge_equation4.png"
              height="199" width="527"></blockquote>
        </font></li>
    </ul>
    <ul>
      <li><font size="+1">This analysis generalizes to the formula
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/merge_equation5.png"
              height="113" width="359"></blockquote>
        </font></li>
      <li><font size="+1">Since we assumed <i>n</i> = 2<sup><i>m</i></sup>
          we have
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/merge_equation_solved.png"
              height="184" width="359"></blockquote>
        </font></li>
      <li><font size="+1">To establish growth order, we drop the lower
          order term and the constant factor.</font></li>
      <li><font size="+1">The change of base formula for logarithms
          allows us to drop the base of the logarithm.
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/log_change_of_base.png"
              height="51" width="570"></blockquote>
        </font></li>
      <li><font size="+1">Hence merge sort is an <i>O</i>(<i>n</i> log
          <i>n</i>) algorithm.</font></li>
    </ul>
    <ul>
      <li><font size="+1">How does <i>O</i>(<i>n</i><sup>2</sup>)
          compare to <i>O</i>(<i>n</i> log <i>n</i>)?</font></li>
      <li><font size="+1">Recall that it takes 100<sup>2</sup> = 10 000
          times longer to sort 1 000 000 records than it takes to sort
          10 000 records with the <i>O</i>(<i>n</i><sup>2</sup>)
          algorithm.</font></li>
      <li><font size="+1">With the <i>O</i>(<i>n</i> log <i>n</i>)
          algorithm, the ratio is
          <blockquote><img alt=""
              src="../../../2014/NETB151/slides/ch15/images/n_log_n_ratio.png"
              height="110" width="570"></blockquote>
        </font></li>
      <li> <font size="+1">If it takes 4 seconds to sort 10 000 records
          for both sorts (merge sort is really faster, of course) then</font>
        <ul>
          <li><font size="+1">it will take 10 minutes to <span
                style="font-style: italic;">merge</span> sort 1 000 000
              records</font></li>
          <li><font size="+1">it will take 11 hours to <span
                style="font-style: italic;">selection</span> sort 1 000
              000 records</font></li>
        </ul>
      </li>
    </ul>
    <hr style="width: 100%; height: 2px;"> <b>** Линейно търсене </b>
    <ul>
      <li><font size="+1">If you want to find a number in a sequence of
          values that occur in arbitrary order, you must look through
          all elements until you have found a match or until you reach
          the end.</font></li>
      <li><font size="+1">This is called a <i>linear</i> or <i>sequential</i>
          search.</font></li>
      <li><font size="+1">There is nothing you can do to speed up the
          search, the algorithm is <span style="font-style: italic;">O</span>(<span
            style="font-style: italic;">n</span>).<br>
        </font></li>
      <li><font size="+1">The procedure returns the index of the match,
          or a -1 if the value cannot be found.</font></li>
    </ul>
    <p><br>
    </p>
    <pre><tt>// lsearch.cpp  <br>01: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iostream&gt;</font><br>02: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;vector&gt;</font><br>03: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;cstdlib&gt;</font><br>04: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;ctime&gt;</font><br>06: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font><br>08: <i><font color="#9a1900">/**</font></i><br>09: <i><font color="#9a1900">   Finds an element in a vector</font></i><br>10: <i><font color="#9a1900">   @param v the vector with the elements to search</font></i><br>11: <i><font color="#9a1900">   @param a the value to search for</font></i><br>12: <i><font color="#9a1900">   @return the index of the first match, or -1 if not found</font></i><br>13: <i><font color="#9a1900">*/</font></i><br>14: <font color="#009900">int</font> <b><font color="#000000">linear_search</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font> v<font color="#990000">,</font> <font color="#009900">int</font> a<font color="#990000">)</font><br>15: <font color="#ff0000">{</font>  <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font><br>17:       <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>v<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">=</font><font color="#990000">=</font> a<font color="#990000">)</font> <b><font color="#0000ff">return</font></b> i<font color="#990000">;</font><br>21:    <b><font color="#0000ff">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font><br>22: <font color="#ff0000">}</font><br>24: <i><font color="#9a1900">/** </font></i><br>25: <i><font color="#9a1900">   Prints all elements in a vector</font></i><br>26: <i><font color="#9a1900">   @param a the vector to print</font></i><br>27: <i><font color="#9a1900">*/</font></i><br>28: <font color="#009900">void</font> <b><font color="#000000">print</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font> a<font color="#990000">)</font><br>29: <font color="#ff0000">{</font>  <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> a<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font><br>31:       cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> a<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" "</font><font color="#990000">;</font><br>32:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font><br>33: <font color="#ff0000">}</font><br>35: <i><font color="#9a1900">/**</font></i><br>36: <i><font color="#9a1900">   Sets the seed of the random number generator.</font></i><br>37: <i><font color="#9a1900">*/</font></i><br>38: <font color="#009900">void</font> <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font><br>39: <font color="#ff0000">{</font>  <font color="#009900">int</font> seed <font color="#990000">=</font> <b><font color="#000000">static_cast</font></b><font color="#ff0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font><br>41:    <b><font color="#000000">srand</font></b><font color="#990000">(</font>seed<font color="#990000">)</font><font color="#990000">;</font><br>42: <font color="#ff0000">}</font><br>44: <i><font color="#9a1900">/** </font></i><br>45: <i><font color="#9a1900">   Computes a random integer in a range.</font></i><br>46: <i><font color="#9a1900">   @param a the bottom of the range</font></i><br>47: <i><font color="#9a1900">   @param b the top of the range</font></i><br>48: <i><font color="#9a1900">   @return a random integer x, a &lt;= x and x &lt;= b</font></i><br>49: <i><font color="#9a1900">*/</font></i><br>50: <font color="#009900">int</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#009900">int</font> a<font color="#990000">,</font> <font color="#009900">int</font> b<font color="#990000">)</font><br>51: <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> a <font color="#990000">+</font> <b><font color="#000000">rand</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">%</font> <font color="#990000">(</font>b <font color="#990000">-</font> a <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>  <font color="#ff0000">}</font><br>54: <br>55: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font><br>56: <font color="#ff0000">{</font>  <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font><br>58:    vector<font color="#ff0000">&lt;int&gt;</font> <b><font color="#000000">v</font></b><font color="#990000">(</font><font color="#993399">20</font><font color="#990000">)</font><font color="#990000">;</font><br>59:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font><br>60:       v<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#993399">100</font><font color="#990000">)</font><font color="#990000">;</font><br>61:    <b><font color="#000000">print</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font><br>62:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Enter number to search for: "</font><font color="#990000">;</font><br>63:    <font color="#009900">int</font> n<font color="#990000">;</font><br>64:    cin <font color="#990000">&gt;</font><font color="#990000">&gt;</font> n<font color="#990000">;</font><br>65:    <font color="#009900">int</font> j <font color="#990000">=</font> <b><font color="#000000">linear_search</font></b><font color="#990000">(</font>v<font color="#990000">,</font> n<font color="#990000">)</font><font color="#990000">;</font><br>66:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Found in position "</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> j <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font><br>67:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font><br>68: <font color="#ff0000">}</font></tt></pre>
    <p><br>
    </p>
    <br>
    <hr size="2" width="100%"><b>** Двоично търсене </b>
    <ul>
      <li><font size="+1">Now search for an item in a data sequence that
          has been previously <span style="font-style: italic;">sorted</span>.
        </font></li>
      <li><font size="+1">Rather than a linear search, we will do a <i>binary</i>
          search.</font></li>
      <li><font size="+1">The search is called binary because the size
          of the search area is cut in half in each step.</font></li>
      <li><font size="+1">The cutting in half works only because the
          sequence of values has been sorted.</font></li>
    </ul>
    <ul>
      <li> <font size="+1">Suppose we want to search the following data
          for 123. </font>
        <p><font size="+1"> </font></p>
        <table bgcolor="black" border="1" cellpadding="6">
          <tbody>
            <tr bgcolor="#00ffff">
              <td width="50">
                <div align="center"><tt><font size="+1">v[0]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[1]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[2]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[3]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[4]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[5]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[6]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[7]</font></tt></div>
              </td>
            </tr>
            <tr bgcolor="#ffffff">
              <td width="50">
                <div align="center"><font size="+1"><tt>14</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>43</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>76</tt></font></div>
              </td>
              <td style="text-decoration: underline;" width="50">
                <div align="center"><font size="+1"><tt>100</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>115</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>290</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>400</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>511</tt></font></div>
              </td>
            </tr>
          </tbody>
        </table>
        <font size="+1"> </font> </li>
      <li> <font size="+1">The last point in the first half of the data
          set, <tt>v[3]</tt>, is 100. That means we should look in the
          second half for a match. </font>
        <p><font size="+1"> </font></p>
        <table bgcolor="black" border="1" cellpadding="6">
          <tbody>
            <tr bgcolor="#00ffff">
              <td width="50">
                <div align="center"><tt><font size="+1">v[4]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[5]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[6]</font></tt></div>
              </td>
              <td width="50">
                <div align="center"><tt><font size="+1">v[7]</font></tt></div>
              </td>
            </tr>
            <tr bgcolor="#ffffff">
              <td width="50">
                <div align="center"><font size="+1"><tt>115</tt></font></div>
              </td>
              <td style="text-decoration: underline;" width="50">
                <div align="center"><font size="+1"><tt>290</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>400</tt></font></div>
              </td>
              <td width="50">
                <div align="center"><font size="+1"><tt>511</tt></font></div>
              </td>
            </tr>
          </tbody>
        </table>
        <font size="+1"> </font> </li>
      <li> <font size="+1">The last value in the first half of this
          sequence is 290; hence, the value must be located in the
          sequence
          <table bgcolor="black" border="1" cellpadding="6">
            <tbody>
              <tr bgcolor="#00ffff">
                <td width="50">
                  <div align="center"><tt><font size="+1">v[5]</font></tt></div>
                </td>
              </tr>
              <tr style="text-decoration: underline;" bgcolor="#ffffff">
                <td width="50">
                  <div align="center"><font size="+1"><tt>115</tt></font></div>
                </td>
              </tr>
            </tbody>
          </table>
        </font> </li>
      <li><font size="+1">Since there is only one element, the search
          easily shows that there is no match.</font></li>
    </ul>
    <br>
    <pre><tt>// <a href="../../../2014/NETB151/sources/ch15/bsearch.cpp">bsearch.cpp</a><br>01: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
02: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;vector&gt;</font>
03: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;cstdlib&gt;</font>
04: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;ctime&gt;</font>
06: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
08: <i><font color="#9a1900">/**</font></i>
09: <i><font color="#9a1900">   Finds an element in a sorted vector.</font></i>
10: <i><font color="#9a1900">   @param v the sorted vector with the elements to search</font></i>
11: <i><font color="#9a1900">   @param from the start of the range to search</font></i>
12: <i><font color="#9a1900">   @param to the end of the range to search</font></i>
13: <i><font color="#9a1900">   @param a the value to search for</font></i>
14: <i><font color="#9a1900">   @return the index of the first match, or -1 if not found</font></i>
15: <i><font color="#9a1900">*/</font></i>
16: <font color="#009900">int</font> <b><font color="#000000">binary_search</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font> v<font color="#990000">,</font> <font color="#009900">int</font> from<font color="#990000">,</font> <font color="#009900">int</font> to<font color="#990000">,</font> <font color="#009900">int</font> a<font color="#990000">)</font>
17: <font color="#ff0000">{</font>  <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>from <font color="#990000">&gt;</font> to<font color="#990000">)</font>  <b><font color="#0000ff">return</font></b> <font color="#990000">-</font><font color="#993399">1</font><font color="#990000">;</font>
20:    <font color="#009900">int</font> mid <font color="#990000">=</font> <font color="#990000">(</font>from <font color="#990000">+</font> to<font color="#990000">)</font> <font color="#990000">/</font> <font color="#993399">2</font><font color="#990000">;</font>
21:    <font color="#009900">int</font> diff <font color="#990000">=</font> v<font color="#990000">[</font>mid<font color="#990000">]</font> <font color="#990000">-</font> a<font color="#990000">;</font>
22:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>diff <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <i><font color="#9a1900">/* v[mid] == a */</font></i>
23:       <b><font color="#0000ff">return</font></b> mid<font color="#990000">;</font>
24:    <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>diff <font color="#990000">&lt;</font> <font color="#993399">0</font><font color="#990000">)</font> <i><font color="#9a1900">/* v[mid] &lt; a */</font></i>
25:       <b><font color="#0000ff">return</font></b> <b><font color="#000000">binary_search</font></b><font color="#990000">(</font>v<font color="#990000">,</font> mid <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">,</font> to<font color="#990000">,</font> a<font color="#990000">)</font><font color="#990000">;</font>
26:    <b><font color="#0000ff">else</font></b>
27:       <b><font color="#0000ff">return</font></b> <b><font color="#000000">binary_search</font></b><font color="#990000">(</font>v<font color="#990000">,</font> from<font color="#990000">,</font> mid <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">,</font> a<font color="#990000">)</font><font color="#990000">;</font>
28: <font color="#ff0000">}</font>
30: <i><font color="#9a1900">/** </font></i>
31: <i><font color="#9a1900">   Prints all elements in a vector</font></i>
32: <i><font color="#9a1900">   @param a the vector to print</font></i>
33: <i><font color="#9a1900">*/</font></i>
34: <font color="#009900">void</font> <b><font color="#000000">print</font></b><font color="#990000">(</font>vector<font color="#ff0000">&lt;int&gt;</font> a<font color="#990000">)</font>
35: <font color="#ff0000">{</font>  <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> a<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
37:       cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> a<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" "</font><font color="#990000">;</font>
38:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
39: <font color="#ff0000">}</font>
41: <i><font color="#9a1900">/**</font></i>
42: <i><font color="#9a1900">   Sets the seed of the random number generator.</font></i>
43: <i><font color="#9a1900">*/</font></i>
44: <font color="#009900">void</font> <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font>
45: <font color="#ff0000">{ </font> <font color="#009900">int</font> seed <font color="#990000">=</font> <b><font color="#000000">static_cast</font></b><font color="#ff0000">&lt;int&gt;</font><font color="#990000">(</font><b><font color="#000000">time</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
47:    <b><font color="#000000">srand</font></b><font color="#990000">(</font>seed<font color="#990000">)</font><font color="#990000">;</font>
48: <font color="#ff0000">}</font>
50: <i><font color="#9a1900">/** </font></i>
51: <i><font color="#9a1900">   Computes a random integer in a range.</font></i>
52: <i><font color="#9a1900">   @param a the bottom of the range</font></i>
53: <i><font color="#9a1900">   @param b the top of the range</font></i>
54: <i><font color="#9a1900">   @return a random integer x, a &lt;= x and x &lt;= b</font></i>
55: <i><font color="#9a1900">*/</font></i>
56: <font color="#009900">int</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#009900">int</font> a<font color="#990000">,</font> <font color="#009900">int</font> b<font color="#990000">)</font>
57: <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> a <font color="#990000">+</font> <b><font color="#000000">rand</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">%</font> <font color="#990000">(</font>b <font color="#990000">-</font> a <font color="#990000">+</font> <font color="#993399">1</font><font color="#990000">)</font><font color="#990000">;</font>  <font color="#ff0000">}</font>
60: 
61: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
62: <font color="#ff0000">{</font>  <b><font color="#000000">rand_seed</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
64:    vector<font color="#ff0000">&lt;int&gt;</font> <b><font color="#000000">v</font></b><font color="#990000">(</font><font color="#993399">20</font><font color="#990000">)</font><font color="#990000">;</font>
65:    v<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font>
66:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">1</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
67:       v<font color="#990000">[</font>i<font color="#990000">]</font> <font color="#990000">=</font> v<font color="#990000">[</font>i <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">+</font> <b><font color="#000000">rand_int</font></b><font color="#990000">(</font><font color="#993399">1</font><font color="#990000">,</font> <font color="#993399">10</font><font color="#990000">)</font><font color="#990000">;</font>
68: 
69:    <b><font color="#000000">print</font></b><font color="#990000">(</font>v<font color="#990000">)</font><font color="#990000">;</font>
70:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Enter number to search for: "</font><font color="#990000">;</font>
71:    <font color="#009900">int</font> n<font color="#990000">;</font>
72:    cin <font color="#990000">&gt;</font><font color="#990000">&gt;</font> n<font color="#990000">;</font>
73:    <font color="#009900">int</font> j <font color="#990000">=</font> <b><font color="#000000">binary_search</font></b><font color="#990000">(</font>v<font color="#990000">,</font> <font color="#993399">0</font><font color="#990000">,</font> v<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">-</font> <font color="#993399">1</font><font color="#990000">,</font> n<font color="#990000">)</font><font color="#990000">;</font>
74:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Found in position "</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> j <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
75:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
76: <font color="#ff0000">}</font>
</tt></pre>
    <br>
    <br>
    B<font size="+1">inary search is a <i>O</i>(log <i>n</i>)
      algorithm. </font>
    <ul>
      <li> <font size="+1">Suppose <i>n</i> = 100, after each search
          the size of the search range is cut in half to 50, 25, 12, 6,
          3, and 1.</font>
        <ul>
          <li><font size="+1">After seven comparisons we are done.</font></li>
          <li><font size="+1">log<sub>2</sub>100 is about 6.64386, note
              that 2<sup>7</sup> = 128.</font></li>
        </ul>
      </li>
      <li> <font size="+1">Since binary search is so much faster, is it
          worthwhile to always sort data before searching?</font>
        <ul>
          <li><font size="+1">An <i>O</i>(<i>n</i>) search is less work
              that a <i>O</i>(<i>n</i> log <i>n</i>) sort, so it is
              not worth it if you only have to perform one search.</font></li>
          <li><font size="+1">Sorting first might be worth it if you
              perform a number of searches of the same vector.</font></li>
        </ul>
      </li>
    </ul>
    <hr style="width: 100%; height: 2px;"><br>
    <br>
  </body>
</html>
