<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="Author" content="Nikolay Kirov">
    <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U)
      [Netscape]">
    <title>l09</title>
  </head>
  <body>
    <center>
      <h3>9. Въведение в структури от данни I</h3>
    </center>
    <p> <img alt="" src="../b5.gif" height="18" width="20">&nbsp; <b>Свързани





        списъци. </b><br>
      * В линейната структура свързан списък всяка стойност се съхранява
      в отделен блок от паметта, заедно с местоположението на съседните
      блокове в редицата. Този начин на съхранение позволява лесно да се
      вмъкне или отстрани елемент, без да се местят другите елементи.
      Както знаем, това е невъзможно, ако се използва вектор. <br>
      * Във всеки елемент на свързания списък се съхранява една данна и
      две връзки - съм следващия елемент от списъка и към предишнея
      елемент от списъка. &nbsp; </p>
    <div align="center"><img alt=""
        src="../../../2014/NETB151/slides/ch16/images/linked_list_1.png"
        height="163" width="809"></div>
    <p>* Вмъкването и изтриването на елемент от свързания списък става
      лесно - променят се стойностите на няколко връзки. </p>
    <center> <img alt=""
        src="../../../2014/NETB151/slides/ch16/images/insert_node.png"
        height="402" width="834"><br>
      <br>
    </center>
    * Изтриването на елемент от свързан списък не изисква преместване на
    елементи на списъка.<br>
    <br>
    <div align="center"><img alt=""
        src="../../../2014/NETB151/slides/ch16/images/remove_node.png"
        height="251" width="851"><br>
    </div>
    <p> За разлика от линейната структура вектора, където има пряк
      достъп до елементите на вектора (с операция индекс), свързаният
      списък не осигурява пряк достъп (не поддържа операция индекс). <br>
    </p>
    <p>В стандартната библиотека шаблони (STL) на С++ има реализация на
      линейната структура свързан списък - <a
        href="http://www.cplusplus.com/reference/list/list/">шаблонът <b><tt><font
              color="#000099">list</font></tt></b></a>.&nbsp; </p>
    <p><b><tt><font color="#000099">// <a
              href="../../NETB151/sources/ch16/list1.cpp">list1.cpp</a></font></tt></b><a
        href="../../NETB151/sources/ch16/list1.cpp"> </a><br>
      <b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
      <br>
      <b><tt><font color="#000099">#include &lt;string&gt;</font></tt></b>
      <br>
      <b><tt><font color="#000099">#include &lt;list&gt;</font></tt></b>
      <br>
      <b><tt><font color="#000099">using namespace std;</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">int main()</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; list&lt;string&gt;
            staff;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#000000">/*






            шаблон за списък */</font></tt></b> </p>
    <p><b><tt><font color="#000099">&nbsp;&nbsp;
            staff.push_back("Cracker, Carl");</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; staff.push_back("Hacker,
            Harry");</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; staff.push_back("Lam,
            Larry");</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;
            staff.push_back("Sandman, Susan");</font></tt></b> </p>
    <p><b><tt><font color="#000099">&nbsp;&nbsp;
            list&lt;string&gt;::iterator pos;</font></tt></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;







      <b><tt><font color="#000000">/* итератор на списък */</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">/* добавя елемент на четвърто място
            */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos = staff.begin();</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; staff.insert(pos,
            "Reindeer, Rudolf");</font></tt></b> </p>
    <p><b><tt><font color="#000099">/* отстранява втория елемент */</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos = staff.begin();</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos++;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; staff.erase(pos);</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">/* добавя елемент на последно място
            */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; pos = staff.end();</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; staff.insert(pos,
            "Zeider, Zeev");</font></tt></b> </p>
    <p><b><tt><font color="#000000">/* обхождане на списък */</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; for (pos =
            staff.begin(); pos != staff.end(); pos++)</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout
            &lt;&lt; *pos &lt;&lt; "\n";</font></tt></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;







      <b><tt><font color="#000000">/* извежда съдържание на текущата
            позиция */</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; return 0;</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> </p>
    <table border="" cellpadding="4" width="100%">
      <tbody>
        <tr>
          <td> <b><tt><font color="#993300">Cracker, Carl</font></tt></b>
            <br>
            <b><tt><font color="#993300">Lam, Larry</font></tt></b> <br>
            <b><tt><font color="#993300">Reindeer, Rudolf</font></tt></b>
            <br>
            <b><tt><font color="#993300">Sandman, Susan</font></tt></b>
            <br>
            <b><tt><font color="#993300">Zeider, Zeev</font></tt></b> </td>
        </tr>
      </tbody>
    </table>
    <img alt="" src="../b5.gif" height="18" width="20"><b>Стек и опашка</b><br>
    Стекът е линейна структура с добавяне и изтриване на елементи само
    от единия край, наречен връх на стека. Нарича се още LIFO от last
    in, first out. Две са основните операции: добавяне на елемент - <tt>push</tt>
    и изтриване на елемент <tt>pop</tt>.<br>
    <a href="http://www.cplusplus.com/reference/list/list/">Реализация в
      STL</a>.<br>
    <font size="+1">
      <pre><span style="color: rgb(255, 0, 0); font-weight: bold;">stack</span>&lt;<span style="font-weight: bold; color: rgb(255, 0, 0);">string</span>&gt; s;<br>s.<span style="color: rgb(255, 0, 0);">push</span>("Tom");<br>s.<span style="color: rgb(255, 0, 0);">push</span>("Dick");<br>s.<span style="color: rgb(255, 0, 0);">push</span>("Harry");<br><span style="color: rgb(51, 51, 255); font-weight: bold;">while</span> (s.<span style="color: rgb(255, 0, 0);">size</span>() &gt; 0)<br>{  cout &lt;&lt; s.<span style="color: rgb(255, 0, 0);">top</span>() &lt;&lt; "\n";<br>   s.<span style="color: rgb(255, 0, 0);">pop</span>()<br>}</pre>
    </font>Опашката е линейна структура от данни с добавяне на елементи
    от единия край и изтриване на елементи от другия край. Нарича се още
    FIFO от first in, first out. <a
      href="http://www.cplusplus.com/reference/queue/queue/">Реализация
      в STL</a>:<br>
    <font size="+1">
      <pre><span style="font-weight: bold; color: rgb(255, 0, 0);">queue</span>&lt;<span style="color: rgb(255, 0, 0); font-weight: bold;">string</span>&gt; q;<br>q.<span style="color: rgb(255, 0, 0);">push</span>("Tom");<br>q.<span style="color: rgb(255, 0, 0);">push</span>("Dick");<br>q.<span style="color: rgb(255, 0, 0);">push</span>("Harry");<br><span style="color: rgb(51, 102, 255); font-weight: bold;">while</span> (q.<span style="color: rgb(255, 0, 0);">size</span>() &gt; 0)<br>{  cout &lt;&lt; q.<span style="color: rgb(255, 0, 0);">front</span>() &lt;&lt; "\n";<br>   q.<span style="color: rgb(255, 0, 0);">pop</span>();<br>}</pre>
    </font>Пример: <br>
    <pre><tt><b><font color="#000080">// <a href="../../NETB151/sources/ch16/fifolifo.cpp">fifolifo.cpp</a><br>01: #include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
<b><font color="#000080">02: #include</font></b> <font color="#ff0000">&lt;string&gt;<br></font>03: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;queue&gt;</font>
04: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;stack&gt;</font>
06: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
07: 
08: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
09: <font color="#ff0000">{</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"FIFO order:\n"</font><font color="#990000">;</font>
11: 
12:    queue<font color="#ff0000">&lt;string&gt;</font> q<font color="#990000">;</font>
13:    q<font color="#990000">.</font><b><font color="#000000">push</font></b><font color="#990000">(</font><font color="#ff0000">"Tom"</font><font color="#990000">)</font><font color="#990000">;</font>
14:    q<font color="#990000">.</font><b><font color="#000000">push</font></b><font color="#990000">(</font><font color="#ff0000">"Dick"</font><font color="#990000">)</font><font color="#990000">;</font>
15:    q<font color="#990000">.</font><b><font color="#000000">push</font></b><font color="#990000">(</font><font color="#ff0000">"Harry"</font><font color="#990000">)</font><font color="#990000">;</font>
16: 
17:    stack<font color="#ff0000">&lt;string&gt;</font> s<font color="#990000">;</font>
18:    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>q<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font><font color="#990000">)</font>
19:    <font color="#ff0000">{</font>  string name <font color="#990000">=</font> q<font color="#990000">.</font><b><font color="#000000">front</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
21:       q<font color="#990000">.</font><b><font color="#000000">pop</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
22:       cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> name <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
23:       s<font color="#990000">.</font><b><font color="#000000">push</font></b><font color="#990000">(</font>name<font color="#990000">)</font><font color="#990000">;</font>
24:    <font color="#ff0000">}</font>
26:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"LIFO order:\n"</font><font color="#990000">;</font>
28:    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>s<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&gt;</font> <font color="#993399">0</font><font color="#990000">)</font>
29:    <font color="#ff0000">{</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> s<font color="#990000">.</font><b><font color="#000000">top</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
31:       s<font color="#990000">.</font><b><font color="#000000">pop</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
32:    <font color="#ff0000">}</font>
34:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
35: <font color="#ff0000">}</font></tt></pre>
    <hr size="2" width="100%"> <img alt="" src="../b5.gif" height="18"
      width="20"><b>Други стандартни контейнери</b><br>
    <br>
    Контейнерът множество (<tt><b><a
          href="http://www.cplusplus.com/reference/set/set/?kw=set">set</a></b>)</tt>
    поддържа наредба на елементите, независимо в какъв ред са въведени.<br>
    <pre><b>// <a href="../../NETB151/sources/ch16/set.cpp">set.cpp</a></b><b><br></b><b>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;set&gt;
using namespace std;

int main()
{ set&lt;string&gt; s;
  s.insert("Tom");
  s.insert("Dick");
  s.insert("Tom"); // !!!
  s.insert("Harry");

  cout &lt;&lt; "set: " &lt;&lt; endl;
  set&lt;string&gt;::iterator p;
  for (p = s.begin(); p!= s.end(); p++)
     cout &lt;&lt; *p &lt;&lt; "\n";
      
  multiset&lt;string&gt; ms;
  ms.insert("Tom");
  ms.insert("Dick");
  ms.insert("Tom"); // !!!
  ms.insert("Harry");

  cout &lt;&lt; "multiset: " &lt;&lt; endl;
  multiset&lt;string&gt;::iterator mp;
  for (mp = ms.begin(); mp!= ms.end(); mp++)
     cout &lt;&lt; *mp &lt;&lt; "\n";
  cout &lt;&lt; ms.size() &lt;&lt; endl;  
  cout &lt;&lt; ms.count("Tom"); 
        
  return 0;   
}    </b></pre>
    Контейнерът <a href="http://www.cplusplus.com/reference/map/map/"><b><tt>map</tt></b></a>
    прилича на вектор с различен тип на индексите.<br>
    <span class="Apple-style-span" style="border-collapse: separate;
      color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-style:
      normal; font-variant: normal; font-weight: normal; letter-spacing:
      normal; line-height: normal; orphans: 2; text-indent: 0px;
      text-transform: none; white-space: normal; widows: 2;
      word-spacing: 0px; font-size: medium;"><font size="+1">
        <pre>map&lt;string, double&gt; scores;<br>scores["Tom"] = 90;<br>scores["Dick"] = 86;<br>scores["Harry"] = 100;</pre>
      </font></span>Осигурява пряк и ефективен достъп до елементите.<br>
    <pre><b>// <a href="../../NETB151/sources/ch16/map.cpp">map.cpp</a><br>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
using namespace std;

int main()
{ map&lt;string, int&gt; scores;
  scores["Tom"] = 90;
  scores["Dick"] = 86;
  scores["Harry"] = 100;
  
  map&lt;string, int&gt;::iterator p;
  for (p = scores.begin(); p!= scores.end(); p++)
     cout &lt;&lt; p-&gt;first &lt;&lt; " " &lt;&lt; p-&gt;second &lt;&lt; "\n";
  cout &lt;&lt; scores.size() &lt;&lt; endl;   
  
  multimap&lt;string, int&gt; mmap;
  mmap.insert(pair&lt;string, int&gt;("Tom", 90));
  mmap.insert(pair&lt;string, int&gt;("Dick", 86));
  mmap.insert(pair&lt;string, int&gt;("Harry", 100));
  mmap.insert(pair&lt;string, int&gt;("Tom", 190));
  
  multimap&lt;string, int&gt;::iterator q;
  for (q = mmap.begin(); q!= mmap.end(); q++)
     cout &lt;&lt; q-&gt;first &lt;&lt; " " &lt;&lt; q-&gt;second &lt;&lt; "\n";
  cout &lt;&lt; mmap.size() &lt;&lt; endl;   

  return 0;</b>
}   <br><br><a href="http://www.cplusplus.com/reference/map/multimap/">Multimap</a> е контайнер от двойки елементи - ключ, стойност.<br><span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><font size="+1"><pre>multimap&lt;string, double&gt; mmap;<br>mmap.insert(pair<string int="">("Tom", 90));<br>mmap.insert(pair<string int="">("Dick", 86));<br>mmap.insert(pair<string int="">("Harry", 100));<br>mmap.insert(pair<string int="">("Tom", 190));</string></string></string></string></pre></font></span></pre>
    <hr size="2" width="100%"> <img alt="" src="../b5.gif" height="18"
      width="20"><b>Алгоритми в STL</b><br>
    Причината за въвеждане и използване на итератори е отделянето на
    алгоритмите от структурите от данни. <a
      href="http://www.cplusplus.com/reference/algorithm/">Алгоритмите в
      STL</a> са реализирани от функции, които работят само с итератори
    и по такъв начин са независими от контейнерите, където се съхраняват
    данните. <br>
    Пример: Функция, която намира сумата на елементите на контейнер -
    вектор или списък. <br>
    <span class="Apple-style-span" style="border-collapse: separate;
      color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-style:
      normal; font-variant: normal; font-weight: normal; letter-spacing:
      normal; line-height: normal; orphans: 2; text-indent: 0px;
      text-transform: none; white-space: normal; widows: 2;
      word-spacing: 0px; font-size: medium;"><font size="+1">
        <pre><b>vector</b>&lt;double&gt; data;<br>/* do something with data */<br><br>double vsum = 0;<br><b>accumulate</b>(data.begin(), data.end(), vsum);<br>/* now vsum contains the sum of the elements in the vector */<br><b>list</b>&lt;double&gt; salaries;<br>/* do something with salaries */<br><br>double lsum = 0;<br><b>accumulate</b>(salaries.begin(), salaries.end(), lsum);<br>/* now lsum contains the sum of the elements in the list */</pre>
      </font></span>Библиотеката поддържа няколко функции за търсене.<br>
    <span class="Apple-style-span" style="border-collapse: separate;
      color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-style:
      normal; font-variant: normal; font-weight: normal; letter-spacing:
      normal; line-height: normal; orphans: 2; text-indent: 0px;
      text-transform: none; white-space: normal; widows: 2;
      word-spacing: 0px; font-size: medium;"><font size="+1">
        <pre>/* search for a certain name on the staff */<br><b>list</b>&lt;string&gt;::<b>iterator</b> it =<br>   <b>find</b>(staff.begin(), staff.end(), name);<br><font size="+1"><font size="+1">   </font></font>cout &lt;&lt; *it &lt;&lt; endl;<br><br></pre>
      </font></span><br>
    <hr width="100%">
  </body>
</html>
