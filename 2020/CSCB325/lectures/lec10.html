<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>lec10</title>
  </head>
  <body>
    <h2>10. Алчни алгоритми</h2>
    <p>Ще разглеждаме задачи,&nbsp; в които се търси оптималното в
      множество от възможни решения. <br>
      - При метода търсене с връщане, за да се намери оптималното
      решение, е необходимо да се намерят решенията на всички подслучаи
      на задачата (не непременно оптимални). Основен недостатък е, че
      някои от тях евентуално биват пресмятани многократно. <br>
      - Повторното пресмятане на едни и същи подслучаи може да се
      избегне, като се приложи динамично оптимиране, но за нещастие
      последното е свързано с необходимост от достатъчно памет за
      запазване на резултатите.<br>
      &nbsp;- Евристичният алгоритъм се насочва към един от всичките
      подслучаи на задачата и решава единствено него с надеждата, че той
      ще се окаже правилният. Изборът на този подслучай се извършва въз
      основата на локален критерий за оптималност. <br>
    </p>
    <p>Алчните алгоритми (greedy algorithms) правят най-добрия за
      момента избор:<br>
      - локално е съвсем лесно и разумно, <br>
      - глобално, на по-късен етап може да се окаже, че този избор не е
      бил най-подходящият.<br>
    </p>
    <p>Алчните алгоритми:<br>
      +&nbsp; се съставят лесно, обикновено реализацията на алгоритъма
      не е сложна;<br>
      &nbsp;- не винаги намират оптималното решение на задачата; <br>
      + бързо намират решение, близко до оптималното. <br>
    </p>
    <hr size="2" width="100%"><b>&nbsp;Задача за монети - минимален брой</b>
    [9.1]<i><br>
      Задача: </i>Да се намери начин за получаване на дадена сума <i>m</i>,
    като се използват минимален брой банкноти и монети, с номинали от
    множеството <i>C</i> = {<i>a</i><sub>1</sub>, <i>a</i><sub>2</sub>,
    ..., <i>a</i><i><sub>n</sub></i>}. <br>
    <p> <i>Алгоритъм:&nbsp; </i>На всяка стъпка избираме най-голямата
      възможна стойност<i>. <br>
      </i></p>
    <p><i> Пример:&nbsp; </i>Стойностите са 1, 2, 5, 10, 20, 50 лева, <i>m
      </i>= 134.<i><br>
      </i><i><i>Решение:</i> s </i>= 0<i>;<br>
      </i>134 &gt; 50, <i>s =</i> 50; <br>
      134-50 = 84 &gt; 50<i>; s&nbsp; </i>= 100<i>; <br>
      </i>84-50 = 34 &gt; 20, <i>s = </i>120; <br>
      34-20 = 14 &gt; 10<i>, s = </i>130; <i><br>
      </i>14-10 = 4 &gt; 2<i>, s </i>= 132<i>;<br>
      </i>4-2 = 2<i>, s </i>= 134<i>.<br>
        &nbsp; </i> 2x50 + 20 + 10 + 2x2 = 134 (6 банкноти) - оптимално
      решение</p>
    <p><i>Пример:&nbsp; </i>Стойностите са 2, 5, 20, 30 лева, <i>m </i>=
      40.<i><br>
      </i><i><i>Решение:</i> s </i>= 0<i>;<br>
      </i>40 &gt; 30,<i> s = </i>30<i>;<br>
      </i>40-30 = 10 &gt; 5,<i> s =</i> 35;<i><br>
      </i>10-5 = 5<i>, s </i>= 40.<br>
      &nbsp;&nbsp; 30 + 2x5 = 40 (3 банкноти) - не е оптимално; 2x20 =
      40 (2 банкноти) - оптимално решение.<br>
    </p>
    <p><i>Пример:&nbsp; </i>Стойностите са 2, 5, 20, 30 лева, <i>m </i>=
      6.<i><br>
      </i><i><i>Решение:</i> s </i>= 0<i>;<br>
      </i>6 &gt; 5<i>, s = 5;<br>
      </i>6-5 = 1 <i>&lt; 2<br>
        &nbsp;</i>&nbsp; няма решение; 3x2 = 6 - оптимално (единствено)
      решение<i>.</i><i><br>
      </i></p>
    <p><i>Пример:&nbsp; </i>Стойностите са 2, 5, 20, 30 лева, <i>m </i>=
      11.<i><br>
      </i><i><i>Решение:</i> s </i>= 0<i>;<br>
      </i>11 &gt; 5<i>, s </i>= 5;<i><br>
      </i>11-5 = 6 &gt; 5, <i>s </i>= 10;<br>
      6-1 = 1 &lt; 2<br>
      &nbsp;&nbsp; няма решение<br>
    </p>
    <p>Общо решение с пълно изчерпване (генериране на всички
      подмножества).<br>
      <a href="lec02.html">Решение с динамично оптимиране.</a><br>
    </p>
    <hr size="2" width="100%"><b>Египетски дроби </b>[9.1.1]<br>
    Древните египтяни са използвали означение само за дробите с числител
    единица. Всяка друга дроб <i>p/q</i> представяли и записвали като
    сума от такива дроби (с числител единица). Например, 7/9 може да се
    представи като сума по някой от следните начини:<br>
    7/9 = 1/3 + 1/3 + 1/9<br>
    7/9 = 1/2 + 1/4 + 1/36<br>
    7/9 = 1/9 + 1/9 + 1/9 + 1/9 + 1/9 + 1/9 + 1/9<br>
    <br>
    <i>Задача:</i> Дадени са две естествени числа <i>p</i> и <i>q </i>(0



    &lt; <i>p &lt; q</i>; ). Да се намери представяне на дробта <i>p/q</i>
    във вид на сума:<br>
    <i>p/q</i> = 1/<i>a</i><sub>1</sub> + 1/<i>a</i><sub>2</sub> + ... +
    1/<i>a</i><i><sub>n</sub></i>,<br>
    при което знаменателите <i>a</i><sub>1</sub>, <i>a</i><sub>2</sub>,
    ..., <i>a</i><sub><i>n</i> </sub>да бъдат различни.<br>
    <br>
    <i>Алгоритъм:&nbsp; </i>На всяка стъпка избираме поредният член в
    сумата да бъде максималната дроб, която може да се добави към
    текущата сума така, че резултатът да не надвишава <i>p/q</i>
    (дробта с най-малък знаменател).<br>
    <br>
    <i>Пример:&nbsp; </i><i>p/q</i> = 7/9 най-голямата възможна дроб е
    1/2. <br>
    7/9 &gt; 1/2, <i>a</i><sub>1</sub> = 2;<br>
    1/2 + 1/<i>a</i><sub>2</sub>&nbsp; &lt; 7/9,&nbsp; 1/<i>a</i><sub>2</sub>&nbsp;



    &lt; 7/9 – 1/2,&nbsp; 1/<i>a</i><sub>2</sub> &lt; 5/18;<br>
    1/3 &gt; 5/18 (1x18 &gt; 3x5), 1/4 &lt; 5/18 (18 &lt; 20), <i>a</i><sub>2</sub>&nbsp;



    = 4;<br>
    1/<i>a</i><sub>3</sub> = 7/9 – 1/2 – 1/4 = 5/18 – 1/4 = 2/72 = 1/36;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1/2 + 1/4 + 1/36 =
    7/9.<br>
    <br>
    Алгоритъмът винаги решава задачата - намира търсеното представяне с
    най-малък брой дроби.<br>
    <hr size="2" width="100%"><b>Дробна задача за раницата</b> [9.1.5]<br>
    <i>Задача: </i>Дадени са <i>n</i> предмета, всеки от които с тегло
    <i>m<sub>i</sub></i> и стойност <i>c<sub>i</sub></i>,<i> i</i> = 1,
    2, ..., <i>n</i>, които можем да поставяме в раницата и ограничено
    тегло <i>m</i> на раницата. Задачата е да поставим в раницата
    предмети с най-голяма обща стойност.<br>
    <br>
    * Класическа <a href="../../CSCB324/lectures/lec12.html">задача за
      раницата</a>: предметите не могат да се делят на части&nbsp; (0-1
    задача за раницата: всеки един предмет или се взема, или - не).<br>
    * Дробна задача за раницата: може да вземе произволна част от всеки
    предмет (напр. брашно, сол, вода, ...).<br>
    <br>
    <i>Алгоритъм</i>: Взема се максимална част от най-скъпия предмет (с
    най-висока цена за единица тегло).<br>
    <br>
    <i>Пример:</i> Раница с тегло 16.<br>
    <table cellspacing="2" cellpadding="2" width="100%" border="1">
      <tbody>
        <tr>
          <td valign="top">Предмет<br>
            номер<br>
          </td>
          <td valign="top">Обща стойност<br>
            <i>c<sub>i</sub></i></td>
          <td valign="top">Общо тегло<br>
            <i>m<sub>i</sub></i></td>
          <td valign="top">Стойност за единица тегло<i><br>
            </i><i><i>c<sub>i</sub></i>/m<sub>i</sub></i></td>
        </tr>
        <tr>
          <td valign="top">1<br>
          </td>
          <td valign="top">25<br>
          </td>
          <td valign="top">10<br>
          </td>
          <td valign="top">25/10 = 2.5<br>
          </td>
        </tr>
        <tr>
          <td valign="top">2<br>
          </td>
          <td valign="top">12<br>
          </td>
          <td valign="top">8<br>
          </td>
          <td valign="top">12/8 = 1.5<br>
          </td>
        </tr>
        <tr>
          <td valign="top">3<br>
          </td>
          <td valign="top">16<br>
          </td>
          <td valign="top">8<br>
          </td>
          <td valign="top">16/8 = 2.0<br>
          </td>
        </tr>
      </tbody>
    </table>
    2.5 &gt; 2 &gt; 1.5<br>
    10 &lt; 16 =&gt; слагаме в раницата 10 от предмет 1;<br>
    8&nbsp; &gt; (16 - 10) = 6 =&gt; слагаме 6 от предмет 3;<br>
    раницата е пълна, обща стойност = 25 + 6*2 = 25 + 12 = 37 <br>
    Получаваме оптимална стойност (решение на задачата) за време <i>O</i>(<i>n</i>
    log <i>n</i>).<br>
    <br>
    Ако приложим същия алгоритъм за класическата задача за раницата,
    получаваме само предмет номер 1 в раницата (тегло 10 &lt; 16) и
    стойност 25. Това не е решение на задачата, защото може да сложим
    двата предмета с номера 2 и 3 (тегло 8+8 =16) и да получим стойност
    на раницата 28.<br>
    <hr size="2" width="100%"><b>Разходката на коня</b> [9.1.8] (<a
      href="https://en.wikipedia.org/wiki/Knight%27s_tour">Wiki</a>)<br>
    <i>Задача:</i> Може ли шахматният кон да обходи всички полета на
    шахматната дъска, като стъпи само по веднъж във всяко поле на
    дъската? Варианти:<br>
    * начална позиция на коня:<br>
    - конят се намира в най-горното ляво поле на шахматната дъска;<br>
    - конят се намира в произволно поле на шахматната дъска.<br>
    * размер на шахматната дъска.<br>
    <br>
    Решение по метода "<a href="../../CSCB324/lectures/lec10.html">търсене



      с връщане</a>" - <i>O</i>(2<sup><i>n</i></sup>), решава задача до
    размер 7х7.<br>
    <br>
    <i>Алгоритъм на Варнсдорф: </i>Следващото поле на коня се избира
    това, от което има най-малко възможни следващи ходове.<br>
    <br>
    <i>Пример:&nbsp; </i>Начално поле (1,1) -&gt; (2,3), (3,2). Конят
    може да стъпи на 8 различни полета, ако е в средата на дъската. И от
    двете полета (2,3), (3,2) две полета са извън дъската и не трябва да
    се връща в (1,1), следователно има 5 възможни полета. Избираме
    (2,3). И т.н.<br>
    <img src="images/knight.png" alt="knight" width="502" height="410"><br>
    Сложност на алгоритъма <i>O</i>(<i>n</i><sup>2</sup>). Има и <a
href="https://www.sciencedirect.com/science/article/pii/S0166218X04003488">алгоритъм</a>,
    който намира пътя на коня за дъска mxn за време <i>O</i>(<i>mn</i>),


    ако задачата има решение.<br>
    <hr size="2" width="100%"><b>Задания и крайни срокове</b> [AL p. 60]<br>
    <i>Задача:</i> Имаме да направим <i>n</i> задания (задачи, проекти)
    с дадени продължителност и краен срок за всяко задание. Заданията се
    изпълняват последователно - следващото задание може да започне,
    когато е завършило прдходното.&nbsp; За всяко задание печелим <i>d
      - x</i> точки, където <i>d</i> е крайният срок на задачата, а <i>x</i>
    е моментът на завършване на заданието. Колко най-много точки можем
    да получим след изпълнението на всички задания?<br>
    <br>
    <i>Алгоритъм:</i> Оптималното решение не зависи от крайните срокове
    изобщо, а заданията се изпълняват по нарастващ ред според тяхната
    продължителност.<br>
    <br>
    <i>Пример:</i><br>
    <table cellspacing="0" cellpadding="2" width="298" border="1"
      height="124">
      <tbody>
        <tr>
          <td valign="top" align="center">Задание<br>
          </td>
          <td valign="top" align="center">Продължителност<br>
          </td>
          <td valign="top" align="center">Краен срок<br>
          </td>
        </tr>
        <tr>
          <td valign="top" align="center">A<br>
          </td>
          <td valign="top" align="center">4<br>
          </td>
          <td valign="top" align="center">2<br>
          </td>
        </tr>
        <tr>
          <td valign="top" align="center">B<br>
          </td>
          <td valign="top" align="center">3<br>
          </td>
          <td valign="top" align="center">5<br>
          </td>
        </tr>
        <tr>
          <td valign="top" align="center">C<br>
          </td>
          <td valign="top" align="center">2<br>
          </td>
          <td valign="top" align="center">7<br>
          </td>
        </tr>
        <tr>
          <td valign="top" align="center">D<br>
          </td>
          <td valign="top" align="center">4<br>
          </td>
          <td valign="top" align="center">5<br>
          </td>
        </tr>
      </tbody>
    </table>
    Редът на изпълнение на заданията е: C, B, A, D.<br>
    <img src="images/tasks.png" alt="tasks" width="405" height="75"><br>
    Спечелените точки са:&nbsp; 7-2=5 за C; 5-5=0 за B; 2-9=-7 за A;
    5-13=-8 за D. Общо -10. <br>
    <br>
    Обосновка на алгоритъма. Нека имаме две задания X и Y с
    продължителност <i>a</i> и <i>b</i> (<i>a</i> &gt; <i>b</i>). Има
    два варианта за изпълнението им:<br>
    <img src="images/xy.png" alt="XY" width="180" height="57"><br>
    <img src="images/yx.png" alt="YX" width="196" height="51"><br>
    Във втория вариант X дава <i>b</i> точки по-малко, а Y дава <i>a</i>
    точки повече, следователно общият брой точки се променя с <i>a - b</i>
    &gt; 0.<br>
    <br>
    Сложност на алгоритъма <i>O</i>(<i>n</i> log <i>n</i>) поради
    сортировката.<br>
    <hr size="2" width="100%">
  </body>
</html>
