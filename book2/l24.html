<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>l24</title>
</head>
<body>

<center>
<h3>
<b>24. Други реализации на линейни структури от данни</b></h3></center>

<div align=right><i>Програмите са конкретни формулировки</i>
<br><i>на абстрактни алгоритми, които се базират</i>
<br><i>на определено представяне и структури от данни.</i>
<br><i>Никлаус Уирт</i></div>
<i></i>
<p><img SRC="bullet.gif" height=18 width=20 align=TEXTTOP>&nbsp; Едносвързан
списък.
<br>&nbsp;&nbsp;&nbsp; Ще разгледаме най-икономичната (относно памет) реализация
на линейна структура от данни - едносвързан списък. Всеки елемент на този
списък съдържа данна и адреса на следващия елемент от списъка.
<p><b><tt><font color="#000099">// slist.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream></font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<p><b><tt><font color="#000099">struct Node {</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; char data; Node *next;</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b>
<br><b><tt><font color="#000099">Node *top;</font></tt></b>
<p><b><tt><font color="#000099">bool insert(Node *pt, char c)&nbsp; /*
insert after pt */</font></tt></b>
<br><b><tt><font color="#000099">{ if (pt == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *node = new Node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; if (node == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; node -> data = c;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; node -> next = pt -> next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; pt -> next = node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">bool erase(Node *pt)&nbsp;&nbsp;&nbsp;&nbsp;
/* erase pt->next */</font></tt></b>
<br><b><tt><font color="#000099">{ if ((pt == NULL) || (pt->next == NULL))
return false;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *node = pt->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; pt->next = node->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; delete node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void print()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "The list contains: ";</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *pt = top;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (pt != NULL)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { cout &lt;&lt; pt->data &lt;&lt;
" ";</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; pt = pt->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void create()</font></tt></b>
<br><b><tt><font color="#000099">{ char ch;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *pt = NULL, *ptold = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; top = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (cin >> ch)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { pt = new Node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; if (pt == NULL) return;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; pt->data = ch;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; pt->next = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; if (top == NULL) top
= pt;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; else&nbsp;&nbsp; ptold->next
= pt;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; ptold = pt;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "Enter some chars: ;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; create();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
print();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *pt = top;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; pt=pt->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; insert(pt, 'A'); print();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; pt=pt->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; erase(pt);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
print();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>&nbsp;
<table BORDER CELLPADDING=4 WIDTH="100%" >
<tr>
<td><b><tt><font color="#993300">Enter some chars: </font><font color="#006600">1
2 3 4 5 6 7 8 9</font></tt></b>
<br><b><tt><font color="#006600">^Z</font></tt></b>
<br><b><tt><font color="#993300">The list contains: 1 2 3 4 5 6 7 8 9</font></tt></b>
<br><b><tt><font color="#993300">The list contains: 1 2 A 3 4 5 6 7 8 9</font></tt></b>
<br><b><tt><font color="#993300">The list contains: 1 2 A 4 5 6 7 8 9</font></tt></b></td>
</tr>
</table>

<p>Начално състояние на списъка:
<table COLS=9 WIDTH="100%" >
<tr>
<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">1</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">2</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">3</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">4</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">5</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">6</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">7</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">8</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">9</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>
</tr>
</table>

<p><font color="#000000">След добавяне на елемент на след втория:</font>
<table COLS=10 WIDTH="100%" >
<tr>
<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">1</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">2</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">A</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">3</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">4</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">5</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">6</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">7</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">8</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">9</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>
</tr>
</table>

<p><font color="#000000">След изтриване на елемент след третия:</font>
<table COLS=9 WIDTH="100%" >
<tr>
<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">1</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">2</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">A</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">4</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">5</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">6</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">7</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">8</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000099">9</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000099">-></font></tt></b></td>
</tr>
</table>
</td>
</tr>
</table>

<hr WIDTH="100%">
<p><img SRC="bullet.gif" height=18 width=20 align=TEXTTOP>&nbsp; Опашка.
<br>&nbsp;&nbsp;&nbsp; Линейна структура от данни, в която се добавя елемент
само накрая и се изтрива елемент само от началото (пръв влязъл, пръв излязъл)
се нарича опашка.
<br><b><tt><font color="#000099">// squeue.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream></font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<p><b><tt><font color="#000099">struct Node {</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp; char data; Node *next;</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b>
<br><b><tt><font color="#000099">Node *top, *end;</font></tt></b>
<p><b><tt><font color="#000099">bool append(char c)&nbsp;&nbsp;&nbsp;&nbsp;
/* insert after last */</font></tt></b>
<br><b><tt><font color="#000099">{ if (end == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *node = new Node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; if (node == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; node->data = c;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; node->next = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; end->next = node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; end = node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">bool erase()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* erase first */</font></tt></b>
<br><b><tt><font color="#000099">{ if (top == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *node=top;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; top = top->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; delete node;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void print()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "The queue contains: ";</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *pt = top;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (pt != NULL)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { cout &lt;&lt; pt->data &lt;&lt;
" ";</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; pt = pt->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void create()</font></tt></b>
<br><b><tt><font color="#000099">{ char ch;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Node *pt = NULL, *ptold = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; top = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (cin >> ch)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { pt = new Node;</font></tt></b>
<br><b><tt><font color="#000099">//&nbsp; if (pt==NULL) break;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; pt->data = ch;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; pt->next = NULL;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; if (top == NULL) top
= pt;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; else&nbsp;&nbsp;&nbsp;&nbsp;
ptold->next = pt;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; ptold = pt;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; end = pt;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "Enter some chars: ";</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; create();&nbsp;&nbsp;&nbsp; print();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; append('A'); print();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; erase();&nbsp;&nbsp;&nbsp;&nbsp;
print();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>&nbsp;
<table BORDER CELLPADDING=4 WIDTH="100%" >
<tr>
<td><b><tt><font color="#993300">Enter some chars: </font><font color="#006600">1
2 3 4 5 ^Z</font></tt></b>
<br><b><tt><font color="#993300">The queue contains: 1 2 3 4 5&nbsp;</font></tt></b>
<br><b><tt><font color="#993300">The queue contains: 1 2 3 4 5 A</font></tt></b>
<br><b><tt><font color="#993300">The queue contains: 2 3 4 5 A</font></tt></b></td>
</tr>
</table>

<p><img SRC="bullet.gif" height=18 width=20 align=TEXTTOP><font color="#000000">
Топологично сортиране.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Дадено е частично наредено
множество, т.е. между някои от елементите му е дадена релация&nbsp; <b><i>R</i></b>,
със следните 3 свойства:</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 1. ако <b><i>xRy</i></b> и
<b><i>yRz</i></b>,
то <b><i>xRz</i></b> (транзитивност);</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 2. ако <b><i>xRy</i></b>,
то <b><i>yRx</i></b> не е вярно (несиметричност);</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 3. <b><i>xRx</i></b> не е
вярно (нерефлексивност).</font>
<br><font color="#000000">Частичната наредба може да се опише с граф.</font>
<br><font color="#000000">Пример. Множеството е: 1, 2, 3, 4, 5, 6, 7, 8,
9, а частичната наредба е:</font>
<br><font color="#000000">1<b><i>R</i></b>2, 2<b><i>R</i></b>4, 4<b><i>R</i></b>5,
4<b><i>R</i></b>8, 6<b><i>R</i></b>3, 1<b><i>R</i></b>3, 3<b><i>R</i></b>5,
5<b><i>R</i></b>8, 7<b><i>R</i></b>5, 7<b><i>R</i></b>9, 9<b><i>R</i></b>4.</font>
<p><img SRC="tsort1.gif" height=198 width=294>
<p>&nbsp;&nbsp; Задачата е да се изрази частичната наредба с линейна, т.е.
да се подредят елементите на множеството в редица, така, че ако<b><i> <font color="#000000">xRy</font></i></b><font color="#000000">,
то <b><i>x</i></b> е преди <b><i>y</i></b> в редицата.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Алгоритъмът за решаване на
задачата е от Н. Вирт и използва свързани списъци. Данните се задават като
наредени двойки ключове - цели числа.</font>
<br><font color="#000000">Пример: (1,2), (2,4), (4,5), (4,8), (6,3), (1,3),
(3,5), (5,8), (7,5), (7,9), (9,4)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Входна фаза:</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Формира се свързан списък
от постъпващите данни с елементи от клас <b><tt>Leader</tt></b>. За да
се укажат всички "наследници" (т.е. втори аргументи на наредбата) на даден
елемент, се създава втори свързан списък от обекти от клас <b><tt>Trailer</tt></b>.</font>
<p><img SRC="tsort2.gif" height=239 width=500>
<br>&nbsp;&nbsp;&nbsp; Процес на топологично сортиране:
<br>&nbsp;&nbsp;&nbsp; За следващ елемент в редицата се избира елемент
с 0 предшественици.
<p>.
<br><b><tt><font color="#000099">// topsort.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream></font></tt></b>
<br><b><tt><font color="#000099">using std::cin;</font></tt></b>
<br><b><tt><font color="#000099">using std::cout;</font></tt></b>
<p><b><tt><font color="#000099">struct Trailer;</font></tt></b>
<p><b><tt><font color="#000099">struct Leader {</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int
key;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int
count;&nbsp;&nbsp;&nbsp; /* брой предшественици */</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Trailer
*tr;&nbsp; /* списък от наследници */</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Leader
*next; /* следващ елемент от входа*/</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b>
<br><b><tt><font color="#000099">struct Trailer {</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Leader
*id;&nbsp;&nbsp;&nbsp; /* наследник */</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Trailer
*next; /* следващ от списъка с наследници */</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b>
<br><b><tt><font color="#000099">Leader *head=new Leader;</font></tt></b>
<p><b><tt><font color="#000099">void Create();</font></tt></b>
<br><b><tt><font color="#000099">Leader *L(int);</font></tt></b>
<br><b><tt><font color="#000099">void Zero();</font></tt></b>
<br><b><tt><font color="#000099">void Tsort();</font></tt></b>
<p><b><tt><font color="#000099">void main()</font></tt></b>
<br><b><tt><font color="#000099">{ Create();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Zero();</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Tsort();</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<p><b><tt><font color="#000099">void Create()</font></tt></b>
<br><b><tt><font color="#000099">{ Leader *p, *q;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; int x, y;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; head = 0;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (cin >> x &amp;&amp; cin
>> y &amp;&amp; !cin.eof())</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { p = L(x); q = L(y);</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; Trailer *t = new Trailer;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; t->id = q;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; t->next = p->tr;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; p->tr = t;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; (q->count)++;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<p><b><tt><font color="#000099">Leader *L(int x)</font></tt></b>
<br><b><tt><font color="#000099">{ Leader *p = head, *q;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; q = p;&nbsp;&nbsp;&nbsp;&nbsp;
/* q is the last element of the list */</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (p)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { if ((p->key) == x) return p;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; q = p;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; p = p->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; p = new Leader;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; p->key = x; p->count = 0;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; p->tr = 0; p->next = 0;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; if (q) q->next = p;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
head = p;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; return p;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<p><b><tt><font color="#000099">void Zero()</font></tt></b>
<br><b><tt><font color="#000099">{ Leader *p = head, *q;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; head = 0;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (p)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { q = p; p = p->next;</font></tt></b>
<br><b><tt><font color="#000099">/* нова задача за полето next и указателя
head */</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; if (!(q->count)) {
q->next = head; head = q; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<p><b><tt><font color="#000099">void Tsort()</font></tt></b>
<br><b><tt><font color="#000099">{ Trailer *t;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; Leader *q = head, *p;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; while (q)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; { cout &lt;&lt; (q->key) &lt;&lt;
' ';</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; t = q->tr;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; q = q->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; while (t)</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; { p = t->id; (p->count)--;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!(p->count))
{ p->next = q; q = p; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t = t->next;</font></tt></b>
<br><b><tt><font color="#000099">&nbsp;&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">&nbsp; }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<table BORDER CELLPADDING=4 WIDTH="100%" >
<tr>
<td><b><tt><font color="#993300">7 9 6 1 2 4 3 5 8&nbsp;</font></tt></b></td>
</tr>
</table>

</body>
</html>
