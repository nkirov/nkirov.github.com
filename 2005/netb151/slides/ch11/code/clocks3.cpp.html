<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0070)http://www.horstmann.com/sjsu/CMPE46/slides/ch11/code/clocks3.cpp.html --><html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="MSHTML 5.00.3103.1000" name="GENERATOR">
</head>
<body><pre><tt>
253: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
254: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iomanip&gt;</font>
255: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;string&gt;</font>
256: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;vector&gt;</font>
257: 
258: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
259: 
260: <b><font color="#000080">#include</font></b> <font color="#ff0000">"ccc_time.h"</font>
261: 
262: <b><font color="#0000ff">class</font></b> Clock
263: <font color="#ff0000">{</font>
264: <b><font color="#0000ff">public</font></b><font color="#990000">:</font>
265:    <i><font color="#9a1900">/**</font></i>
266: <i><font color="#9a1900">      Constructs a clock that can tell the local time.</font></i>
267: <i><font color="#9a1900">      @param use_military true if the clock uses military format</font></i>
268: <i><font color="#9a1900">   */</font></i>
269:    <b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font><font color="#990000">;</font>
270:    
271:    <i><font color="#9a1900">/**</font></i>
272: <i><font color="#9a1900">      Gets the location of this clock.</font></i>
273: <i><font color="#9a1900">      @return the location</font></i>
274: <i><font color="#9a1900">   */</font></i>
275:    <b><font color="#0000ff">virtual</font></b> string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
276: 
277:    <i><font color="#9a1900">/**</font></i>
278: <i><font color="#9a1900">      Gets the hours of this clock.</font></i>
279: <i><font color="#9a1900">      @return the hours, in military or am/pm format</font></i>
280: <i><font color="#9a1900">   */</font></i>
281:    <b><font color="#0000ff">virtual</font></b> <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
282: 
283:    <i><font color="#9a1900">/**</font></i>
284: <i><font color="#9a1900">      Gets the minutes of this clock.</font></i>
285: <i><font color="#9a1900">      @return the minutes</font></i>
286: <i><font color="#9a1900">   */</font></i>
287:    <font color="#009900">int</font> <b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
288: 
289:    <i><font color="#9a1900">/**</font></i>
290: <i><font color="#9a1900">      Checks whether this clock uses miltary format.</font></i>
291: <i><font color="#9a1900">      @return true if miltary format</font></i>
292: <i><font color="#9a1900">   */</font></i>
293:    <font color="#009900">bool</font> <b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
294: <b><font color="#0000ff">private</font></b><font color="#990000">:</font>
295:    <font color="#009900">bool</font> military<font color="#990000">;</font>
296: <font color="#ff0000">}</font><font color="#990000">;</font>
297: 
298: Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font>
299: <font color="#ff0000">{</font>
300:    military <font color="#990000">=</font> use_military<font color="#990000">;</font>
301: <font color="#ff0000">}</font>
302: 
303: string Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
304: <font color="#ff0000">{</font>
305:    <b><font color="#0000ff">return</font></b> <font color="#ff0000">"Local"</font><font color="#990000">;</font>
306: <font color="#ff0000">}</font>
307: 
308: <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
309: <font color="#ff0000">{</font>
310:    Time now<font color="#990000">;</font>
311:    <font color="#009900">int</font> hours <font color="#990000">=</font> now<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
312:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>military<font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font>
313:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> 
314:       <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font>
315:    <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">&gt;</font> <font color="#993399">12</font><font color="#990000">)</font>
316:       <b><font color="#0000ff">return</font></b> hours <font color="#990000">-</font> <font color="#993399">12</font><font color="#990000">;</font>
317:    <b><font color="#0000ff">else</font></b>
318:       <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font>
319: <font color="#ff0000">}</font>
320: 
321: <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
322: <font color="#ff0000">{</font>
323:    Time now<font color="#990000">;</font>
324:    <b><font color="#0000ff">return</font></b> now<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
325: <font color="#ff0000">}</font>
326: 
327: <font color="#009900">bool</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
328: <font color="#ff0000">{</font>
329:    <b><font color="#0000ff">return</font></b> military<font color="#990000">;</font>
330: <font color="#ff0000">}</font>
331: 
332: <b><font color="#0000ff">class</font></b> TravelClock <font color="#990000">:</font> <b><font color="#0000ff">public</font></b> Clock
333: <font color="#ff0000">{</font>
334: <b><font color="#0000ff">public</font></b><font color="#990000">:</font>
335:    <i><font color="#9a1900">/**</font></i>
336: <i><font color="#9a1900">      Constructs a travel clock that can tell the time</font></i>
337: <i><font color="#9a1900">      at a specified location</font></i>
338: <i><font color="#9a1900">      @param mil true if the clock uses military format</font></i>
339: <i><font color="#9a1900">      @param loc the location</font></i>
340: <i><font color="#9a1900">      @param diff the time difference from the local time</font></i>
341: <i><font color="#9a1900">   */</font></i>
342:    <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><font color="#009900">bool</font> mil<font color="#990000">,</font> string loc<font color="#990000">,</font> <font color="#009900">int</font> diff<font color="#990000">)</font><font color="#990000">;</font>
343:    string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
344:    <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
345: <b><font color="#0000ff">private</font></b><font color="#990000">:</font>
346:    string location<font color="#990000">;</font>
347:    <font color="#009900">int</font> time_difference<font color="#990000">;</font>
348: <font color="#ff0000">}</font><font color="#990000">;</font>
349: 
350: TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><font color="#009900">bool</font> mil<font color="#990000">,</font> string loc<font color="#990000">,</font> <font color="#009900">int</font> diff<font color="#990000">)</font>
351:    <font color="#990000">:</font> <b><font color="#000000">Clock</font></b><font color="#990000">(</font>mil<font color="#990000">)</font>
352: <font color="#ff0000">{</font>
353:    location <font color="#990000">=</font> loc<font color="#990000">;</font>
354:    time_difference <font color="#990000">=</font> diff<font color="#990000">;</font>
355:    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>time_difference <font color="#990000">&lt;</font> <font color="#993399">0</font><font color="#990000">)</font> 
356:       time_difference <font color="#990000">=</font> time_difference <font color="#990000">+</font> <font color="#993399">24</font><font color="#990000">;</font>
357: <font color="#ff0000">}</font>
358: 
359: string TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
360: <font color="#ff0000">{</font>
361:    <b><font color="#0000ff">return</font></b> location<font color="#990000">;</font>
362: <font color="#ff0000">}</font>
363: 
364: <font color="#009900">int</font> TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
365: <font color="#ff0000">{</font>
366:    <font color="#009900">int</font> h <font color="#990000">=</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
367:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font>
368:       <b><font color="#0000ff">return</font></b> <font color="#990000">(</font>h <font color="#990000">+</font> time_difference<font color="#990000">)</font> <font color="#990000">%</font> <font color="#993399">24</font><font color="#990000">;</font>
369:    <b><font color="#0000ff">else</font></b>
370:    <font color="#ff0000">{</font>
371:       h <font color="#990000">=</font> <font color="#990000">(</font>h <font color="#990000">+</font> time_difference<font color="#990000">)</font> <font color="#990000">%</font> <font color="#993399">12</font><font color="#990000">;</font>
372:       <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>h <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font>
373:       <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">return</font></b> h<font color="#990000">;</font>
374:    <font color="#ff0000">}</font>
375: <font color="#ff0000">}</font>
376: 
377: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
378: <font color="#ff0000">{</font>
379:    vector<font color="#ff0000">&lt;Clock*&gt;</font> <b><font color="#000000">clocks</font></b><font color="#990000">(</font><font color="#993399">3</font><font color="#990000">)</font><font color="#990000">;</font>
380:    clocks<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">Clock</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">)</font><font color="#990000">;</font>
381:    clocks<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">,</font> <font color="#ff0000">"Rome"</font><font color="#990000">,</font> <font color="#993399">9</font><font color="#990000">)</font><font color="#990000">;</font>
382:    clocks<font color="#990000">[</font><font color="#993399">2</font><font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><b><font color="#0000ff">false</font></b><font color="#990000">,</font> <font color="#ff0000">"Tokyo"</font><font color="#990000">,</font> <font color="#990000">-</font><font color="#993399">7</font><font color="#990000">)</font><font color="#990000">;</font>
383: 
384:    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> clocks<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
385:    <font color="#ff0000">{</font>
386:       cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clocks<font color="#990000">[</font>i<font color="#990000">]</font><font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" time: "</font> 
387:          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clocks<font color="#990000">[</font>i<font color="#990000">]</font><font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font>
388:          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> 
389:          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clocks<font color="#990000">[</font>i<font color="#990000">]</font><font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> 
390:          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
391:    <font color="#ff0000">}</font>
392:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
393: <font color="#ff0000">}</font>
394: 
</tt>
</pre></body>
</html>
