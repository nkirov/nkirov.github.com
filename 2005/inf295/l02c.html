<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="Author" content="Nikolay Kirov">
  <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
  <title>l02a</title>
</head>
<body>
<h3>2c. Основни техники за вход и изход
в С и С++ : <span style="font-weight: normal;"></span><br style="font-weight: normal;">
<font style="font-weight: normal;" color="#000000"></font><font style="font-weight: normal;" color="#000000">- четене и записване в
текстови файлове в С++.</font><span style="font-weight: normal;"> 
</span><br>
</h3>
В заглавния файл <b><tt><font color="#000000">fstream</font></tt></b>
са дефинирани обекти, функции и операции за работа с файлове.
<p>А) Файл за четене.
<br>
* дефиниране на файлова променлива за четене - обект от класа <b><tt><font color="#006600">ifstream:</font></tt></b>
<br>
<b><tt><font color="#006600">ifstream inp_data;</font></tt></b>
<br>
* отваряне на файл от текущата директория с име <b><tt><font color="#006600">input.dat:</font></tt></b>
<br>
<b><tt><font color="#006600">inp_data.open("input.dat");</font></tt></b>
<br>
* четене от файл на:
<br>
 - цели числа и числа с плаваща точка
<br>
<b><tt><font color="#006600">   int n;</font></tt></b>
<br>
<b><tt><font color="#006600">   double x;</font></tt></b>
<br>
<b><tt><font color="#006600">   inp_data &gt;&gt; n &gt;&gt;
x;</font></tt></b>
<br>
 - низове
<br>
<b><tt><font color="#006600">   string s;</font></tt></b>
<br>
<b><tt><font color="#006600">   inp_data &gt;&gt;
s;       
// чете до разделител</font></tt></b>
<br>
<b><tt><font color="#006600">   getline(inp_data, s); //
чете цял ред</font></tt></b>
<br>
 - символи
<br>
<b><tt><font color="#006600">   char ch;</font></tt></b>
<br>
<b><tt><font color="#006600">  
inp_data.get(ch);   
// чете един символ</font></tt></b>
<br>
<b><tt><font color="#006600">  
inp_data.unget();   
// връща последния прочетен символ в буфера</font></tt></b>
<br>
* затваряне на файл
<br>
<b><tt><font color="#006600">   inp_data.close();</font></tt></b>
</p>
<p><b><tt><font color="#000099">// readf.cpp</font></tt></b>
<br>
<b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br>
<b><tt><font color="#000099">#include
&lt;fstream&gt;            
/* включване на заглавен файл */</font></tt></b>
<br>
<b><tt><font color="#000099">#include &lt;string&gt;</font></tt></b>
<br>
<b><tt><font color="#000099">using namespace std;</font></tt></b>
<br>
<b><tt><font color="#000099">int main()</font></tt></b>
<br>
<b><tt><font color="#000099">{  ifstream in_data; /* дефиниране
на файлова променлива за четене */</font></tt></b>
<br>
<b><tt><font color="#000099">  
in_data.open("readf.txt"); 
/* отваряне на файла input.txt */</font></tt></b>
</p>
<p><b><tt><font color="#000099">   string s1, s2;</font></tt></b>
<br>
<b><tt><font color="#000099">   getline(in_data,
s1);      
/* четене на ред */</font></tt></b>
<br>
<b><tt><font color="#000099">   in_data &gt;&gt;
s2;             
/* четене на дума */</font></tt></b>
</p>
<p><b><tt><font color="#000099">   int n;</font></tt></b>
<br>
<b><tt><font color="#000099">   double x;</font></tt></b>
<br>
<b><tt><font color="#000099">   in_data &gt;&gt; n &gt;&gt;
x;         
/* четене на числови данни */</font></tt></b>
</p>
<p><b><tt><font color="#000099">   char ch;</font></tt></b>
<br>
<b><tt><font color="#000099">   while (!in_data.eof())</font></tt></b>
<br>
<b><tt><font color="#000099">  
in_data.get(ch);           
/* четене на символ */</font></tt></b>
</p>
<p><b><tt><font color="#000099">  
in_data.close();           
/* затваряне на файла */</font></tt></b>
<br>
<b><tt><font color="#000099">   cout &lt;&lt; s1 &lt;&lt;
endl &lt;&lt; s2 &lt;&lt; " "</font></tt></b>
<br>
<b><tt><font color="#000099">       
&lt;&lt; n &lt;&lt; " " &lt;&lt; x &lt;&lt; " " &lt;&lt; ch &lt;&lt;
endl;</font></tt></b>
<br>
<b><tt><font color="#000099">   return 0;</font></tt></b>
<br>
<b><tt><font color="#000099">}</font></tt></b>
</p>
<p><font color="#000000">Файл </font><b><tt><font color="#000099">readf.txt:</font></tt></b>
<br>
</p>
<table style="text-align: left;" border="1" cellpadding="4" cellspacing="0">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
<b><tt><font color="#000000">many
happy words</font></tt></b> <br>
      <b><tt><font color="#000000">one_word  123  9.98  N</font></tt></b>
</td>
    </tr>
  </tbody>
</table>
<br>
<p><b><tt><font color="#000000"></font></tt></b><b><tt><font color="#000000"></font></tt></b>
</p>
<table border="1" cellpadding="4" width="100%">
  <tbody>
    <tr>
      <td>
<b><tt><font color="#993300">many happy words</font></tt></b>
      <br>
      <b><tt><font color="#993300">one_word  123  9.98  N</font></tt></b>
</td>
    </tr>
  </tbody>
</table>

<p>Б) Файл за писане.
<br>
* дефиниране на файлова променлива за писане - обект от класа <b><tt><font color="#006600">ofstream:</font></tt></b>
<br>
<b><tt><font color="#006600">   ofstream out_data;</font></tt></b>
<br>
* отваряне на файл
<br>
<b><tt><font color="#006600">   out_data.open("output.dat");</font></tt></b>
<br>
* писане във  файл с:
<br>
 - изходен поток
<br>
<b><tt><font color="#006600">   int n = 2;</font></tt></b>
<br>
<b><tt><font color="#006600">   double x = 1.5;</font></tt></b>
<br>
<b><tt><font color="#006600">   string s = " Hello";</font></tt></b>
<br>
<b><tt><font color="#006600">   out_data &lt;&lt; n &lt;&lt;
"  " &lt;&lt; x &lt;&lt; s;</font></tt></b>
<br>
 - член-функция
<br>
<b><tt><font color="#006600">   char ch = 'A';</font></tt></b>
<br>
<b><tt><font color="#006600">   out_data.put(ch);</font></tt></b>
<br>
* затваряне на файл
<br>
<b><tt><font color="#006600">   out_data.close();</font></tt></b>
</p>
<p><b><tt><font color="#000099">// writef.cpp</font></tt></b>
<br>
<b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br>
<b><tt><font color="#000099">#include
&lt;fstream&gt;            
/* включване на заглавен файл */</font></tt></b>
<br>
<b><tt><font color="#000099">#include &lt;string&gt;</font></tt></b>
<br>
<b><tt><font color="#000099">using namespace std;</font></tt></b>
<br>
<b><tt><font color="#000099">int main()</font></tt></b>
<br>
<b><tt><font color="#000099">{  ofstream out_data; /* дефиниране
на файлова променлива за писане */</font></tt></b>
<br>
<b><tt><font color="#000099">  
out_data.open("writef.txt"); 
/* отваряне на файла writef.txt */</font></tt></b>
</p>
<p><b><tt><font color="#000099">   string s = "Hello";</font></tt></b>
<br>
<b><tt><font color="#000099">   out_data &lt;&lt; s &lt;&lt;
endl; /* писане на низ */</font></tt></b>
<br>
<b><tt><font color="#000099">   int n = 5;</font></tt></b>
<br>
<b><tt><font color="#000099">   double x = 5.5;</font></tt></b>
<br>
<b><tt><font color="#000099">   out_data &lt;&lt; n &lt;&lt;
" " &lt;&lt; x &lt;&lt; " "; /* писане на числови данни */</font></tt></b>
<br>
<b><tt><font color="#000099">   char ch = 'T';</font></tt></b>
<br>
<b><tt><font color="#000099">   out_data.put(ch); /* писане
на символ */</font></tt></b>
</p>
<p><b><tt><font color="#000099">  
out_data.close();            
/* затваряне на файла */</font></tt></b>
<br>
<b><tt><font color="#000099">   return 0;</font></tt></b>
<br>
<b><tt><font color="#000099">}<br>
</font></tt></b></p>
<p><font color="#000000"> </font><font color="#000000">Файл <b><tt>writef.txt:</tt></b></font>
</p>
<table style="text-align: left;" border="1" cellpadding="4" cellspacing="0">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
<b><tt><font color="#000000">Hello</font></tt></b>
      <br>
      <b><tt><font color="#000000">5 5.5 T</font></tt></b>
</td>
    </tr>
  </tbody>
</table>
<p></p>
<p></p>
<hr width="100%">
</body>
</html>
