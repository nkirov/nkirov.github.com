<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>TCP-IP</title>
</head>
<body>

<h2>
2. Как работи Интернет? Основи на TCP/IP мрежите.</h2>
<b>- 7-слоен OSI модел на компютърните мрежи;</b>
<br>&nbsp;&nbsp;&nbsp; The Open Systems Interconnection Reference Model
(OSI Model or OSI Reference Model for short) is a layered abstract description
for communications and computer network protocol design, developed as part
of the Open Systems Interconnect initiative. It is also called the OSI
seven layer model.
<br>&nbsp;&nbsp;&nbsp; The following diagram attempts to show where various
TCP/IP and other protocols would reside in the original OSI model:
<center><table CELLPADDING=4 WIDTH="100%" class="MsoNormalTable" style="margin-left:6.05pt" >
<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">7&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Application</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. HTTP,
SMTP,
SNMP,
FTP,
Telnet,
NFS</div>
</td>
</tr>

<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">6&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Presentation</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. XDR,
ASN.1,
SMB,
AFP</div>
</td>
</tr>

<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">5&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Session</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. ISO 8327 / CCITT X.225, RPC,
NetBIOS,
ASP</div>
</td>
</tr>

<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">4&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Transport</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. TCP,
UDP,
RTP,
SPX,
ATP</div>
</td>
</tr>

<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">3&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Network</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. IP,
ICMP,
IGMP,
X.25,
CLNP,
ARP,
OSPF,
RIP,
IPX,
DDP</div>
</td>
</tr>

<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">2&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Data Link</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. Ethernet,
Token ring, PPP,
HDLC,
Frame relay,
ISDN,
ATM</div>
</td>
</tr>

<tr>
<td WIDTH="11" style="width:8.5pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">1&nbsp;</div>
</td>

<td style="border:solid black 1.0pt;padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal"><b>Physical</b></div>
</td>

<td style="padding:3.75pt 3.75pt 3.75pt 3.75pt">
<div class="MsoNormal">e.g. electricity,
radio,
laser</div>
</td>
</tr>
</table></center>

<hr WIDTH="100%"><b>- пакет от протоколи TCP/IP</b>
<br>&nbsp;&nbsp;&nbsp; The Internet Protocol (<b>IP</b>) is a data-oriented
protocol used by source and destination hosts for communicating data across
a packet-switched internetwork.
<br>&nbsp;&nbsp;&nbsp; Transmission Control Protocol (<b>TCP</b>) is a
connection-oriented, reliable delivery byte-stream transport layer protocol
<br>currently documented in IETF RFC 793 [1] (http://www.ietf.org/rfc/rfc793.txt).
<br>&nbsp;&nbsp;&nbsp; The User Datagram Protocol (<b>UDP</b>) is a minimal
message-oriented transport layer protocol that is currently documented
in IETF RFC 768.
<br>&nbsp;&nbsp;&nbsp; The Internet Control Message Protocol (<b>ICMP</b>)
is part of the Internet protocol suite and defined in RFC 792. ICMP messages
are typically generated in response to errors in IP datagrams (as specified
in RFC1122 (http://www.ietf.org/rfc/rfc1122.txt)) or for diagnostic or
routing purposes.
<br>&nbsp;&nbsp;&nbsp; The Internet Group Management Protocol (<b>IGMP</b>)
is a communications protocol used to manage the membership of Internet
Protocol multicast groups. IGMP is used by IP hosts and adjacent multicast
routers to establish multicast group
<br>memberships.
<br>
<hr WIDTH="100%">
<br><b>- 4-слоен модел на TCP/IP мрежите:</b>
<br>&nbsp;
<table CELLPADDING=6 WIDTH="100%" >
<tr>
<td><img SRC="image002.gif" BORDER=0 height=180 width=155></td>

<td></td>

<td>
<table BORDER CELLSPACING=0 CELLPADDING=4 WIDTH="100%" >
<tr>
<td>Application</td>

<td>приложно ниво</td>
</tr>

<tr>
<td>Transport</td>

<td>транспортно ниво</td>
</tr>

<tr>
<td>Internet</td>

<td>Интернет ниво</td>
</tr>

<tr>
<td>Link</td>

<td>свързващо ниво</td>
</tr>
</table>
</td>
</tr>
</table>

<hr WIDTH="100%">
<br><b>- IP адреси:</b>
<br>&nbsp;&nbsp;&nbsp; Адресите на възлите (компютрите) в Интернет (IP-номерата)
са 32-битови числа, обикновено записвани като 4 десетични числа (октети
или байта), разделени с точки, например 213.191.194.20.
<br>&nbsp;&nbsp;&nbsp; Използват се 3 основни типа (класа) адреси, което
е направено с цел да се получи добро решение на проблема всеки адрес да
указва както мрежата, така и компютъра в нея. Основното предположение е,
че има много на брой мрежи, но повечето от тях са малки. Приема се, че
24 бита (2<sup>24</sup>=16777216) са достатъчни за номерирането на всички
мрежи в света. Въведени са 3 типа адреси, което води и до 3 класа мрежи.
<br>&nbsp;&nbsp;&nbsp; -- клас A:&nbsp; 1 байт за адрес на мрежата (числата
от 1 до 126) + 3 байта за номериране на компютрите в мрежата; броят на
всички мрежи от този клас е до 126.
<br>&nbsp;&nbsp;&nbsp; -- клас B:&nbsp; 2 байта за адрес на мрежата (от
128.1 до 191.254, числото 127 в първия байт, както и числата 0 и 255 във
втория, са запазени за специални цели) + 2 байта за адресиране на компютрите
в мрежата (64516 броя); броят на всички мрежи от този клас е до 16256.
<br>&nbsp;&nbsp;&nbsp; -- клас C: 3 байта за адрес на мрежата (от 192.1.1
до 223.254.254) + 1 байт за номериране на компютрите в мрежата (254 броя);
броят на всички мрежи от този клас е до 2064512.
<br>&nbsp;&nbsp;&nbsp; Адресите, започващи с число над 223, образуват класовете
D и E и са запазени за специални цели.
<br>
<hr WIDTH="100%">
<br><b>- DNS</b>
<div style="text-align:justify">&nbsp;&nbsp;&nbsp; IP addresses are not
easy to remember, even using dotted decimal notation. The Internet has
adopted a mechanism, referred to as the <b><i>Domain Name System</i> (DNS)</b>,
whereby computer names can be associated with IP addresses. These computer
names are referred to as <i>domain names</i>. The DNS has several rules
that determine how domain names are constructed and how they relate to
one another. For the purposes of this chapter, it is sufficient to know
that domain names are computer names and that they are mapped to IP addresses.</div>

<p><br>
<hr WIDTH="100%">
<br><b>- протоколите TCP и UDP</b>
<div class="MsoNormal"><b>&nbsp;&nbsp;</b>&nbsp; <i>TCP</i> (<i>Transmission
Control Protocol</i>) is a connection-based protocol that provides a reliable
flow of data between two computers.</div>

<div class="MsoNormal" style="text-align:justify"><b>&nbsp;&nbsp; </b><i>UDP</i>
(<i>User Datagram Protocol</i>) is a protocol that sends independent packets
of data, called datagrams, from one computer to another with no guarantees
about arrival. UDP is not connection-based like TCP.</div>

<div class="MsoNormal" style="text-align:justify">&nbsp;&nbsp;&nbsp; The
TCP and UDP protocols use ports to map incoming data to a particular process
running on a computer. In datagram-based communication such as UDP, the
datagram packet contains the port number of its destination and UDP routes
the packet to the appropriate application, as illustrated in this figure:</div>

<center><img SRC="image004.gif" BORDER=0 height=169 width=334></center>

<hr WIDTH="100%">
<br><b>- портове - какво представляват и защо са необходими?</b>
<div class="MsoNormal" style="text-align:justify">&nbsp;&nbsp;&nbsp; Port
numbers range from 0 to 65,535 because ports are represented by 16-bit
numbers. The port numbers ranging from 0-1023 are restricted; they are
reserved for use by well-known services such as HTTP and FTP and other
system services. These ports are called <i>well-known ports</i>. Your applications
should not attempt to bind to them.</div>

<table CELLPADDING=4 WIDTH="100%" >
<tr>
<td><img SRC="image003.gif" BORDER=0 height=60 width=302></td>

<td>source IP;
<br>source port;
<br>destination IP;
<br>destination port;</td>
</tr>
</table>

<hr WIDTH="100%">
<br><b>- сокети</b>
<br>&nbsp;&nbsp;&nbsp; Сокет наричаме двойката (IP адрес, номер на порт),
комуникационен канал за една TCP връзка.
<br>
<hr WIDTH="100%">
<br><b>- как работят сокетите и портовете?</b>
<br>IE = <b><tt>213.191.194.20:1033 &lt;-> 212.50.1.81:80</tt></b> = Appache
Web Server
<br>IE = <b><tt>213.191.194.20:1037 &lt;-> 212.50.1.81:80</tt></b> = Appache
Web Server
<br>OE=<b><tt>213.191.194.20:1044 &lt;-> 212.50.1.81:110</tt></b> = POP3
Server
<br>FTP=<b><tt>213.191.194.20:1054 &lt;-> 213.53.10.181:21</tt></b> = FTP
Server
<br>
<hr WIDTH="100%">
<br><b>- сървери и клиенти</b>
<br>Клиент - свързва се към сървера и отваря сокет.
<br>Сървер - "слушат на определен порт" и чакат клиетско приложение да
се свърже към тях.
<br>
<hr WIDTH="100%">
<br><b>- програмен модел сървер-клиент</b>
<br>Магазин с няколко щанда за клиенти.
<br>
<hr WIDTH="100%">
<br><b>- портовете при UDP протокола</b>
<br>Няма комуникационен канал, а се изпращат и получават единични пакети.
<br>
<hr WIDTH="100%">
<br><b>- протоколи</b>
<br>Формалните езици, които се използват за комуникация в компютърните
мрежи се наричат протоколи.
<br>
<hr WIDTH="100%">
<br><b>- услуги в Интернет и стандартни номера на портове</b>
<div style="text-align:justify">&nbsp;&nbsp;&nbsp; Popular Internet application
protocols are associated with <b><i>well-known ports</i></b> and <b><i>wel-known
Internet services</i></b>. The server programs implementing these protocols
listen on these ports for service requests. The well-known ports for some
common Internet application protocols are:</div>

<table BORDER CELLSPACING=0 CELLPADDING=4 WIDTH="100%" class="MsoNormalTable" style="width:535.8pt;margin-left:8.25pt;border-collapse:collapse;border:none" >
<tr>
<td><b>Port</b></td>

<td><b>Protocol</b></td>

<td><b>Service description</b></td>
</tr>

<tr>
<td>21</td>

<td>File Transfer Protocol(FTP)</td>

<td>Transfers files</td>
</tr>

<tr>
<td>22</td>

<td>>SSH (Secure Shell Protocol)</td>

<td>Allows secure remote administration through standard shell (console)</td>
</tr>

<tr>
<td>25</td>

<td>Simple Mail Transfer Protocol</td>

<td>Send email</td>
</tr>

<tr>
<td>80</td>

<td>HyperText Transfer Protocol(HTTP)</td>

<td>Accesse the WWW (World Wide Web)</td>
</tr>

<tr>
<td>110</td>

<td>Post Office Protocol</td>

<td>Receive email</td>
</tr>
</table>


<p style="text-align:justify">The well-known ports are used to standardize
the location of <b>Internet services</b>.
<div style="text-align:justify">
<hr WIDTH="100%"></div>
<b>- IPv6 протокол</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IPv6 is version 6 of the Internet Protocol.
IPv6 is intended to replace the previous standard, IPv4, which only supports
up to about 4 billion (4x10<sup>9</sup>) addresses, whereas IPv6 supports
up to about 3.4x10<sup>38</sup> addresses.
<br>&nbsp;&nbsp;&nbsp;&nbsp; IPv6 is the second version of the Internet
Protocol to be widely deployed, and is expected (as of 2001) to form the
basis for future expansion of the Internet. In 2003, Nihon Keizai Shimbun
(as cited in CNET Asia Staff, 2003) reported that Japan, China, and South
Korea claimed to have made themselves determined to become the leading
nations in internet technology, which would partially take the form of
jointly developing IPv6, and completely adopting IPv6 starting in 2005.
<br>&nbsp;&nbsp;&nbsp;&nbsp; The compelling reason behind the formation
of IPv6 was lack of address space, especially in the heavily populated
countries of Asia such as India and China.
<br>&nbsp;&nbsp;<b>&nbsp;&nbsp; IPv6 addressing</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp; The most dramatic change from IPv4 to IPv6
is the length of network addresses. IPv6 addresses, as defined by RFC 2373
and RFC 2374, are 128 bits long; this corresponds to 32 hexadecimal digits,
which are normally used when writing IPv6 addresses, as described in the
following section.
<br>&nbsp;&nbsp;&nbsp; The number of possible addresses in IPv6 is 2<sup>128</sup>.
The number of IPv6 addresses can also be thought of as 16<sup>32</sup>
as each of the 32 hexadecimal digits can take 16 values (see combinatorics).&nbsp;
In some situations, IPv6 addresses are composed of two logical parts: a
64-bit network prefix, and a 64-bit host-addressing part, which is often
automatically generated from the interface MAC address.
<br><b>&nbsp;&nbsp;&nbsp;&nbsp; Notation for IPv6 addresses</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp; IPv6 addresses are 128 bits long but are normally
written as eight groups of 4 hexadecimal digits each. For example,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><tt>3ffe:6a88:85a3:08d3:1319:8a2e:0370:7344</tt></b>
<br>&nbsp;is a valid IPv6 address.&nbsp; If a 4 digit group is 0000, it
may be omitted. For example,
<br><b><tt>&nbsp;&nbsp;&nbsp; 3ffe:6a88:85a3:0000:1319:8a2e:0370:7344</tt></b>
<br>&nbsp;is the same IPv6 address as
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><tt>3ffe:6a88:85a3::1319:8a2e:0370:7344</tt></b>
<br>&nbsp;&nbsp;&nbsp;&nbsp; Following this rule, if more than two consecutive
colons result from this omission, they may be reduced to two colons, as
long as there is only one group of more than two consecutive colons. Thus
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><tt>2001:2353:0000:0000:0000:0000:1428:57ab</tt></b>
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 2001:2353:0000:0000:0000::1428:57ab</tt></b>
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 2001:2353:0:0:0:0:1428:57ab</tt></b>
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 2001:2353:0::0:1428:57ab</tt></b>
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 2001:2353::1428:57ab</tt></b>
<br>&nbsp;are all valid and mean the same thing, but
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><tt>2001::25de::cade</tt></b>
<br>&nbsp;is invalid.&nbsp; Also leading zeros in all groups can be omitted,
thus
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 2001:2353:02de::0e13</tt></b>
<br>&nbsp;is the same thing as
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 2001:2353:2de::e13</tt></b>
<br>&nbsp;&nbsp;&nbsp;&nbsp; IPv4 addresses are easily convertible to IPv6
format. For instance, if the IPv4 address was
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; 135.75.43.52</tt></b>,
<br>it could be converted to
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><tt>0000:0000:0000:0000:0000:0000:874B:2B34</tt></b>
<br>or
<br><b><tt>&nbsp;&nbsp;&nbsp;&nbsp; ::874B:2B34.</tt></b>
<br>Then again, one could use the hybrid notation (IPv4 mapped addresses),
in which case the address would be
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><tt>::135.75.43.52.</tt></b>
<br>
<hr WIDTH="100%">
</body>
</html>
