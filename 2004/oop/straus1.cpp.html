<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
</head>
<body>
<b><tt><font color="#000099">// </font><font color="#990000">straus1.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<br><b><tt><font color="#000099">class Vector {</font></tt></b>
<br><b><tt><font color="#000099">public:</font></tt></b>
<br><b><tt><font color="#000099">   enum { max = 32000 };</font></tt></b>
<br><b><tt><font color="#000099">   class Range {</font></tt></b>
<br><b><tt><font color="#000099">   public:</font></tt></b>
<br><b><tt><font color="#000099">      int index;</font></tt></b>
<br><b><tt><font color="#000099">      Range(int
i): index(i){}</font></tt></b>
<br><b><tt><font color="#000099">   };</font></tt></b>
<br><b><tt><font color="#000099">   class Size {};</font></tt></b>
<br><b><tt><font color="#000099">   Vector(int);</font></tt></b>
<br><b><tt><font color="#000099">   int &amp;operator[](int);</font></tt></b>
<br><b><tt><font color="#000099">private:</font></tt></b>
<br><b><tt><font color="#000099">   int *p;</font></tt></b>
<br><b><tt><font color="#000099">   int sz;</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b><b><tt><font color="#000099"></font></tt></b>
<p><b><tt><font color="#000099">void f();</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "begin main()\n";</font></tt></b>
<br><b><tt><font color="#000099">  f();</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; "end main()\n";</font></tt></b>
<br><b><tt><font color="#000099">  return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p><b><tt><font color="#000099">Vector::Vector(int s)</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "Vector::Vector\n";</font></tt></b>
<br><b><tt><font color="#000099">  if (s&lt;0 || s&gt;max) throw Size();</font></tt></b>
<br><b><tt><font color="#000099">  sz = s;</font></tt></b>
<br><b><tt><font color="#000099">  p = new int[sz];</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p><b><tt><font color="#000099">int &amp;Vector::operator[](int i)</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "Vector::operator[](int)\n";</font></tt></b>
<br><b><tt><font color="#000099">  if (i&gt;0 &amp;&amp; i&lt;sz) return
p[i];</font></tt></b>
<br><b><tt><font color="#000099">  throw Range(i); }</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p><b><tt><font color="#000099">void use_vectors()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "use_vectors()\n";</font></tt></b>
<br><b><tt><font color="#000099">  Vector v(10);</font></tt></b>
<br><b><tt><font color="#000099">  int i;</font></tt></b>
<br><b><tt><font color="#000099">  for (i=9; i&lt;12; i++)</font></tt></b>
<br><b><tt><font color="#000099">  { v[i]=i*i;</font></tt></b>
<br><b><tt><font color="#000099">    cout &lt;&lt; v[i]
&lt;&lt; " ";</font></tt></b>
<br><b><tt><font color="#000099">  }</font></tt></b>
<br><b><tt><font color="#000099">  Vector vbad(-10);</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; "BAD\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p><b><tt><font color="#000099">void f()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "begin f()\n";</font></tt></b>
<br><b><tt><font color="#000099">  try</font></tt></b>
<br><b><tt><font color="#000099">  { use_vectors(); }</font></tt></b>
<br><b><tt><font color="#000099">  catch (Vector::Range r)</font></tt></b>
<br><b><tt><font color="#000099">  { cout &lt;&lt; "Index " &lt;&lt;
r.index &lt;&lt; " out of range!\n";</font></tt></b>
<br><b><tt><font color="#000099">    exit(99);</font></tt></b>
<br><b><tt><font color="#000099">  }</font></tt></b>
<br><b><tt><font color="#000099">  catch (Vector::Size)</font></tt></b>
<br><b><tt><font color="#000099">  { cout &lt;&lt; "ERROR in the constructor
Vector::Size\n";</font></tt></b>
<br><b><tt><font color="#000099">    exit(99);</font></tt></b>
<br><b><tt><font color="#000099">  }</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; "end f()\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt></tt></b> 
</p>
<table border cellpadding="4" width="100%">
<tr>
<td>
<b><tt><font color="#993300">begin main()</font></tt></b>
<br><b><tt><font color="#993300">begin f()</font></tt></b>
<br><b><tt><font color="#993300">use_vectors()</font></tt></b>
<br><b><tt><font color="#993300">Vector::Vector</font></tt></b>
<br><b><tt><font color="#993300">Vector::operator[](int)</font></tt></b>
<br><b><tt><font color="#993300">Vector::operator[](int)</font></tt></b>
<br><b><tt><font color="#993300">81 Vector::operator[](int)</font></tt></b>
<br><b><tt><font color="#993300">Index 10 out of range!</font></tt></b>
</td>
</tr>
</table>
<b><tt></tt></b>
</body>
</html>
