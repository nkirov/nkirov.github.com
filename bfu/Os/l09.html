<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win95; U) [Netscape]">
   <title>l09</title>
</head>
<body>
<b>9. Планиране (разписание)  на един процесор</b>
<br>Цели:
<br>  --- бързи отговори но интерактивните потребители;
<br>  --- бързо изпълнение на заданията
<br>  --- ефективно използване на процесора
<br>Типове:
<table border cellpadding="4" width="100%">
<tr>
<td>Дългосрочно планиране</td>

<td>Решение да се добави процес към списъка от процеси за изпълнение</td>
</tr>

<tr>
<td>Средносрочно планиране</td>

<td>Решение да се добави процес към процесите, които се частично или напълно
в паметта.</td>
</tr>

<tr>
<td>Краткосрочно планиране</td>

<td>Решение кой процес да бъде изпълняван от процесора.</td>
</tr>

<tr>
<td>I/O планиране</td>

<td>Решение кой процес, чакащ за I/O ресурс, да му бъде дадено свободно
устройство. </td>
</tr>
</table>

<p>9.1 Типове планирания
<br>--- FIGURE 9.1 ---
<br>--- FIGURE 9.2 ---
<br>--- FIGURE 9.3 ---
<br>** Дългосрочно планиране
<br>-- Кога заданието да се преобразува в процес:
<br>  - кога да се създаде нов процес?
<br>  - кое задание да се преобразува в процес?
<br>** Средносрочно планиране
<br>-- част от прехвърлящата функция (swaping function), виртуална памет
<br>** Краткосрочно планиране
<br>-- Диспечерът се задейства при следните събития:
<br>    - прекъсване на часовника
<br>    - I/O прекъсване
<br>    - извиквания на функции на ОС
<br>    - сигнали.
<br>
</p>
<hr width="100%">
<br>9.2 Алгоритми за планиране
<br>** Критерии за краткосрочно планиране
<br> -- ориентирани към потребителя (user-oriented)
<br> -- ориентирани към системата (system-oriented)
<br>** Използване на приоритети
<br>--- FIGURE 9.4 ---
<br>** Алтернативи за политика на планиране
<br> 
<table border cellpadding="4" width="100%">
<tr>
<td><b><font size="-1">Алгоритми </font></b></td>

<td><b><font size="-1">FCFS</font></b></td>

<td><b><font size="-1">Round Robin</font></b></td>

<td><b><font size="-1">SPN</font></b></td>

<td><b><font size="-1">SRT</font></b></td>

<td><b><font size="-1">HRRN</font></b></td>

<td><b><font size="-1">Feedback</font></b></td>
</tr>

<tr>
<td>
<b><font size="-1">Функция за избиране</font></b>
<br><b><font size="-1">[selection function]</font></b>
</td>

<td><font size="-1">max[w]</font></td>

<td><font size="-1">const</font></td>

<td><font size="-1">min[s]</font></td>

<td><font size="-1">min[s-e]</font></td>

<td><font size="-1">max[(w+s)/s]</font></td>

<td><font size="-1">--</font></td>
</tr>

<tr>
<td>
<b><font size="-1">Режим на решенията</font></b>
<br><b><font size="-1">[decision mode]</font></b>
</td>

<td><font size="-1">без прекъсване</font></td>

<td><font size="-1">прекъсване по време</font></td>

<td><font size="-1">без прекъсване</font></td>

<td><font size="-1">прекъсване по</font></td>

<td><font size="-1">без прекъсване</font></td>

<td><font size="-1">прекъсване по време</font></td>
</tr>

<tr>
<td><b><font size="-1">[throughput]</font></b></td>

<td><font size="-1">не е определено</font></td>

<td><font size="-1">може да е ниско, ако кванта време е малък</font></td>

<td><font size="-1">високо</font></td>

<td><font size="-1">високо</font></td>

<td><font size="-1">високо</font></td>

<td><font size="-1">не е определено</font></td>
</tr>

<tr>
<td>
<b><font size="-1">Време за отговор</font></b>
<br><b><font size="-1">[response time]</font></b>
</td>

<td><font size="-1">голямо ако процесите са с много различно време за изпълнение</font></td>

<td><font size="-1">осигурява добро време за отговор за късите процеси</font></td>

<td><font size="-1">осигурява добро време за отговор за късите процеси</font></td>

<td><font size="-1">осигурява добро време за отговор</font></td>

<td><font size="-1">осигурява добро време за отговор</font></td>

<td><font size="-1">не е определено</font></td>
</tr>

<tr>
<td>
<b><font size="-1">Припокриване</font></b>
<br><b><font size="-1">[overload]</font></b>
</td>

<td><font size="-1">минимално</font></td>

<td><font size="-1">малко</font></td>

<td><font size="-1">голямо</font></td>

<td><font size="-1">голямо</font></td>

<td><font size="-1">голямо</font></td>

<td><font size="-1">голямо</font></td>
</tr>

<tr>
<td>
<b><font size="-1">Ефект върху процеса</font></b>
<br><b><font size="-1">[effect on processes]</font></b>
</td>

<td><font size="-1">глоба за къси процеси и за I/O процеси </font></td>

<td><font size="-1">честно</font></td>

<td><font size="-1">глоба за дълги процеси</font></td>

<td><font size="-1">глоба за дълги процеси</font></td>

<td><font size="-1">добър баланс</font></td>

<td><font size="-1">благосклонен към I/O процеси</font></td>
</tr>

<tr>
<td>
<b><font size="-1">Гладна смърт</font></b>
<br><b><font size="-1">[starvation]</font></b>
</td>

<td><font size="-1">не</font></td>

<td><font size="-1">не</font></td>

<td><font size="-1">възможна</font></td>

<td><font size="-1">възможна</font></td>

<td><font size="-1">не</font></td>

<td><font size="-1">възможна</font></td>
</tr>
</table>

<p><font size="-1">w - общо време за работа на процеса</font>
<br><font size="-1">e - време за изпълнение</font>
<br><font size="-1">s - общо време за обслужване на процеса</font>
<br>Пример за група процеси и обслужването им:
</p>
<center><table border cellpadding="4" width="70%">
<tr align="CENTER" valign="CENTER">
<td align="CENTER" valign="CENTER">Процеси</td>

<td>Време на постъпване 
<br>[arrival time]</td>

<td>Време за работа на процеса 
<br>[service time]</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>1</td>

<td>0</td>

<td align="CENTER" valign="CENTER">3</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>
<center>2</center>
</td>

<td>2</td>

<td>6</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>3</td>

<td>4</td>

<td>4</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>4</td>

<td>6</td>

<td>5</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>5</td>

<td>8</td>

<td>2</td>
</tr>
</table></center>

<p>--- FIGURE 9.5 ---
<br>Сравнение за времето на обслужване:
</p>
<center><table border cellpadding="4" width="100%">
<tr align="CENTER" valign="CENTER">
<td align="CENTER" valign="CENTER"></td>

<td align="LEFT">Process
<br>Arrival Time
<br>Service Time</td>

<td>1
<br>0
<br>3</td>

<td>2
<br>2
<br>6</td>

<td>3
<br>4
<br>4</td>

<td>4
<br>6
<br>4</td>

<td>5
<br>8
<br>2</td>

<td>Mean</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>FCFS</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>3
<br>3
<br>1.00</td>

<td>9
<br>7
<br>1.17</td>

<td>13
<br>9
<br>2.25</td>

<td>18
<br>12
<br>2.40</td>

<td>20
<br>12
<br>6.00</td>

<td>
<br>8.20
<br>2.56</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>RR q=1</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>4
<br>4
<br>1.33</td>

<td>18
<br>16
<br>2.67</td>

<td>17
<br>13
<br>3.25</td>

<td>20
<br>14
<br>2.80</td>

<td>15
<br>7
<br>3.50</td>

<td>
<br>10.80
<br>2.71</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>RR q=4</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>3
<br>3
<br>1.00</td>

<td>17
<br>15
<br>2.50</td>

<td>11
<br>7
<br>1.75</td>

<td>20
<br>14
<br>2.80</td>

<td>19
<br>11
<br>5.50</td>

<td>
<br>10.00
<br>2.29</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>SPN</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>3
<br>3
<br>1.00</td>

<td>9
<br>7
<br>1.17</td>

<td>15
<br>11
<br>2.75</td>

<td>20
<br>14
<br>2.80</td>

<td>11
<br>3
<br>1.50</td>

<td>
<br>7.60
<br>1.84</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>SRT</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>3
<br>3
<br>1.00</td>

<td>15
<br>1`3
<br>2.17</td>

<td>8
<br>4
<br>1.00</td>

<td>20
<br>14
<br>2.80</td>

<td>10
<br>2
<br>1.00</td>

<td>
<br>7.20
<br>1.59</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>HRRN</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>3
<br>3
<br>1.00</td>

<td>9
<br>7
<br>1.17</td>

<td>13
<br>9
<br>2.25</td>

<td>20
<br>14
<br>2.80</td>

<td>15
<br>7
<br>3.50</td>

<td>
<br>8.00
<br>2.14</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>FB q=1</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>4
<br>4
<br>1.33</td>

<td>20
<br>18
<br>3.00</td>

<td>16
<br>12
<br>3.00</td>

<td>19
<br>13
<br>2.60</td>

<td>11
<br>3
<br>1.5</td>

<td>
<br>10.00
<br>2.29</td>
</tr>

<tr align="CENTER" valign="CENTER">
<td>FB q=2^(i-1)</td>

<td align="LEFT">Finish Time
<br>Turnaround Time
<br>Tq/Ts</td>

<td>4
<br>4
<br>1.33</td>

<td>17
<br>15
<br>2.50</td>

<td>18
<br>14
<br>3.50</td>

<td>20
<br>14
<br>2.80</td>

<td>14
<br>6
<br>3.00</td>

<td>
<br>10.60
<br>2.63</td>
</tr>
</table></center>

<p>-- Първи дошел, първи обслужен (First Come First Served - FCFS)
<br>Пример за бавно обслужване на къс процес:
</p>
<table border cols="7" width="100%">
<tr align="CENTER" valign="CENTER">
<td>Process</td>

<td>Arrival Time</td>

<td>Service Time (Ts)</td>

<td>Start Time</td>

<td>Finish Time</td>

<td>Turnaround
<br>Time (Tq)</td>

<td>Tq/Ts</td>
</tr>

<tr>
<td><b>A</b></td>

<td>0</td>

<td>1</td>

<td>0</td>

<td>1</td>

<td>1</td>

<td align="RIGHT" valign="CENTER">1.00</td>
</tr>

<tr>
<td><b>B</b></td>

<td>1</td>

<td>100</td>

<td>1</td>

<td>101</td>

<td>100</td>

<td align="RIGHT">1.00</td>
</tr>

<tr>
<td><b>C</b></td>

<td>2</td>

<td>1</td>

<td>101</td>

<td>102</td>

<td>100</td>

<td align="RIGHT">100.00</td>
</tr>

<tr>
<td><b>D</b></td>

<td>3</td>

<td>100</td>

<td>102</td>

<td>202</td>

<td>199</td>

<td align="RIGHT">1.99</td>
</tr>

<tr>
<td>Mean</td>

<td></td>

<td></td>

<td></td>

<td></td>

<td>100</td>

<td align="RIGHT">26.00</td>
</tr>
</table>
 -- Round Robin - RR
<br>--- FIGURE 9.6 ---
<br>--- FIGURE 9.7 ---
<br> -- Най-късия процес (Shortest Process Next - SPN)
<br>Трудности при определяне на времето за работа на всеки процес - предсказване
на времето за работа на интерактивни процеси
<br> -- Най-малко оставащо време (Shortest Remaining Time - SRT)
<br> -- Най-голямо отношение за отговор (Highest Responce Ratio Next
- HRRN)
<br>Пресмята се RR = (w+s)/s
<br> -- Обратна връзка (Feedback - FB)
<br>Понижаване на приоритета след всяко прекъсване.
<br>--- FIGURE 9.10 ---
<br>Варианти с времето за изпълнение на процеси от различни опашки - 2^(i-1)
кванта време за процес от i-тата опашка (с приоритер i)
<br>** Ефективност на различните политики
<br> -- Анализ на опашките
<br> -- Симулационно моделиране
<br>
<hr width="100%">
<br>9.3 Класическо планиране в UNIX
<br>3 приоритетни нива:
<br>   - real-time processes
<br>   - kernel-mode processes
<br>   - other user-mode processes
<br>--- FIGURE 9.10 ---
<br>
<hr width="100%">
</body>
</html>
