<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win95; U) [Netscape]">
   <title>l11</title>
</head>
<body>
<b>11. Организация на входа и изхода и планиране (разписание) на диска</b>
<p>11.1. I/O устройства
<br>- Human-readable - видео-дисплей терминали, принтери
<br>- Mashine-readable - дискове, ленти, контролери
<br>- Communication - мрежови карти и модеми
<br>Различия при различните I/O устройства:
<br>&nbsp;-- скорост на работа с данните
<br>&nbsp;-- приложения
<br>&nbsp;-- сложнаст на управление
<br>&nbsp;-- единица пренасяни данни
<br>&nbsp;-- представяне на данните
<br>&nbsp;-- състояния при грешки
<br>Примери на I/O устройства:
<table BORDER CELLPADDING=8 >
<tr>
<td><b>Device</b></td>

<td><b>Purpose</b></td>

<td><b>Partner</b></td>

<td><b>Data Rate (kilobytes/s)</b></td>
</tr>

<tr>
<td>Keyboard</td>

<td>Input</td>

<td>Human</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.01</td>
</tr>

<tr>
<td>Mouse</td>

<td>Input</td>

<td>Human</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.02</td>
</tr>

<tr>
<td>Voice input</td>

<td>Input</td>

<td>Human</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.02</td>
</tr>

<tr>
<td>Scanner</td>

<td>Input</td>

<td>Human</td>

<td>&nbsp;200</td>
</tr>

<tr>
<td>Voice output&nbsp;</td>

<td>Output</td>

<td>Human</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.6</td>
</tr>

<tr>
<td>Line printer</td>

<td>Output</td>

<td>Human</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</td>
</tr>

<tr>
<td>Laser printer</td>

<td>Output</td>

<td>Human</td>

<td>&nbsp;&nbsp; 100</td>
</tr>

<tr>
<td>Graphics display</td>

<td>Output</td>

<td>Human</td>

<td>30000</td>
</tr>

<tr>
<td>CPU to frame buffer</td>

<td>Output</td>

<td>Human</td>

<td>&nbsp;&nbsp; 200</td>
</tr>

<tr>
<td>Network-terminal</td>

<td>Input or output</td>

<td>Machine</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.05</td>
</tr>

<tr>
<td>Network-LAN</td>

<td>Input or output</td>

<td>Machine</td>

<td>&nbsp; 200</td>
</tr>

<tr>
<td>Optical disk</td>

<td>Storage</td>

<td>Machine</td>

<td>&nbsp; 500</td>
</tr>

<tr>
<td>Magnetic type</td>

<td>Storage</td>

<td>Machine</td>

<td>&nbsp;2000</td>
</tr>

<tr>
<td>Magnetic disk</td>

<td>Storage</td>

<td>Machine</td>

<td>&nbsp;2000</td>
</tr>
</table>

<p>11.2. Организация на функциите на I/O
<br>&nbsp;Програмирани I/O,&nbsp; I/O основани на прекъсвания,&nbsp; пряк
достъп до паметта
<br>** Еволюция на функциите на I/O
<br>&nbsp; 1. Процесорът пряко управлява периферията;
<br>&nbsp; 2. Контролер или I/O модул, управление без прекъсвания
<br>&nbsp; 3. Контролер или I/O модул, управление с прекъсвания
<br>&nbsp; 4. DMA - процесорът участва само в началото и в края на предаване
на данните
<br>&nbsp; 5. I/O модула е отделен процесор, който работи директно с паметта
без CPU
<br>&nbsp; 6. I/O модула е отделен процесор със собствена памет
<br>** Пряк достъп до паметта (DMA)
<br>--- FIGURE 11.1 ---
<br>--- FIGURE 11.2 ---
<br>--- FIGURE 11.3 ---
<br>
<hr WIDTH="100%">
<br>11.3. Проектиране и организация на I/O в ОП
<br>** Цели
<br>** Логическа структура на I/O функциите
<br>--- FIGURE 11.4 ---
<br>
<hr WIDTH="100%">
<br>11.4. Буфериране на входа и изхода
<br>--- FIGURE 11.5 ---
<br>** Единичен буфер
<br>** Двоен буфер
<br>** Кръгов буфер
<br>
<hr WIDTH="100%">
<br>11.5. Разписание на диска
<br>** Параметри на работа на диска
<br>--- FIGURE 11.6 ---
<br>&nbsp;-- Време за търсене (Seek Time)
<br>&nbsp;-- Закъснение при въртене (Rotational Delay)
<br>&nbsp;-- Време за прехвърляне (Transfer Time)
<br>&nbsp;-- Сравнения
<br>Пример: Диск с:
<br>&nbsp;&nbsp;&nbsp; - рекламирана скорост на търсене (seek time) 20
ms;
<br>&nbsp;&nbsp;&nbsp; - скорост на пренасяне (transfer rate) 1MB/s;
<br>&nbsp;&nbsp;&nbsp; - 512-байтови сектори (sectors) с 32 сектора в пътечка
(track).
<br>&nbsp; Заявка за четене на файл от 128K байта, значи 256 сектора.
<br><b>А.</b> Предполагаме, че файлът е разположен на последователни сектори.
<br>За първата пътечка имаме:
<table>
<tr>
<td>Време за достъп&nbsp;</td>

<td>20</td>

<td>ms</td>
</tr>

<tr>
<td>Закъснение при въртене</td>

<td>&nbsp;8.3</td>

<td>ms</td>
</tr>

<tr>
<td>Четене на 32 сектора</td>

<td>16.7&nbsp;</td>

<td>ms</td>
</tr>

<tr>
<td>Общо</td>

<td>45</td>

<td>ms</td>
</tr>
</table>
За следващите пътечки имаме:
<table>
<tr>
<td>Закъснение при въртене</td>

<td>&nbsp;8.3</td>

<td>ms</td>
</tr>

<tr>
<td>Четене на 32 сектора</td>

<td>16.7&nbsp;</td>

<td>ms</td>
</tr>

<tr>
<td>Общо</td>

<td>25</td>

<td>ms</td>
</tr>
</table>
Получаваме всичко 45 + 7x25 = 220 ms = 0.22 s
<br><b>Б.</b> Предполагаме, че файлът е разположен на случайни сектори
на диска.
<br>За всеки сектор имаме:
<table>
<tr>
<td>Време за достъп&nbsp;</td>

<td>20</td>

<td>ms</td>
</tr>

<tr>
<td>Закъснение при въртене</td>

<td>&nbsp;8.3</td>

<td>ms</td>
</tr>

<tr>
<td>Четене на 1 сектор</td>

<td>0.5&nbsp;</td>

<td>ms</td>
</tr>

<tr>
<td>Общо</td>

<td>28.8</td>

<td>ms</td>
</tr>
</table>
Получаваме всичко 256x28.8 = 7373 ms =7.37 s
<br>&nbsp;&nbsp;&nbsp; Разположението на секторите на файла върху диска
има страхотен ефект за скоростта на достъп до файла.
<br>** Политика при разписания на диска
<table BORDER CELLPADDING=2 COLS=4 WIDTH="100%" >
<tr>
<td>FIFO&nbsp;
<br>(starting at track 100)</td>

<td>SSTF
<br>(starting at track 100)</td>

<td>SCAN(starting at track 100, forward)</td>

<td>C-SCAN(starting at track 100, forward)</td>
</tr>

<tr>
<td>&nbsp;
<div ALIGN=right><table WIDTH="100%" >
<tr>
<td>Next track accessed</td>

<td>Number of tracks trasfered</td>
</tr>

<tr ALIGN=RIGHT>
<td>55
<br>58
<br>39
<br>18
<br>90
<br>160
<br>150
<br>38
<br>184</td>

<td>45
<br>3
<br>19
<br>21
<br>72
<br>70
<br>10
<br>112
<br>146</td>
</tr>

<tr>
<td>Average seek length</td>

<td ALIGN=RIGHT>55.3</td>
</tr>
</table></div>
</td>

<td>&nbsp;
<div ALIGN=right><table WIDTH="100%" >
<tr>
<td>Next track accessed</td>

<td>Number of tracks trasfered</td>
</tr>

<tr ALIGN=RIGHT>
<td>90
<br>58
<br>55
<br>39
<br>38
<br>18
<br>150
<br>160
<br>184</td>

<td>10
<br>32
<br>3
<br>16
<br>1
<br>20
<br>132
<br>10
<br>24</td>
</tr>

<tr>
<td>Average seek length</td>

<td ALIGN=RIGHT>27.5</td>
</tr>
</table></div>
</td>

<td>&nbsp;
<div ALIGN=right><table WIDTH="100%" >
<tr>
<td>Next track accessed</td>

<td>Number of tracks trasfered</td>
</tr>

<tr ALIGN=RIGHT>
<td>150
<br>160
<br>184
<br>90
<br>58
<br>55
<br>39
<br>38
<br>18</td>

<td>50
<br>10
<br>24
<br>94
<br>32
<br>3
<br>16
<br>1
<br>20</td>
</tr>

<tr>
<td>Average seek length</td>

<td ALIGN=RIGHT>27.8</td>
</tr>
</table></div>
</td>

<td>&nbsp;
<div ALIGN=right><table WIDTH="100%" >
<tr>
<td>Next track accessed</td>

<td>Number of tracks trasfered</td>
</tr>

<tr ALIGN=RIGHT>
<td>150
<br>160
<br>184
<br>18
<br>38
<br>39
<br>55
<br>58
<br>90</td>

<td>50
<br>10
<br>24
<br>166
<br>20
<br>1
<br>16
<br>3
<br>32</td>
</tr>

<tr>
<td>Average seek length</td>

<td ALIGN=RIGHT>35.8</td>
</tr>
</table></div>
</td>
</tr>
</table>

<p>&nbsp; -- Приоритет
<br>&nbsp; -- Последен влязъл, пръв излязъл (LIFO)
<br>&nbsp; -- Най-малко време за обслужване (Shortest Service Time First)
<br>&nbsp; -- SCAN
<br>&nbsp; -- C-SCAN
<br>&nbsp; -- N стъпки SCAN и FSCAN
<br>
<hr WIDTH="100%">
<br>11.6. RAID (Redundant Array of Independent Disks)
<br>--- FIGURE 11.9 ---
<p>
<hr WIDTH="100%">
<br>11.7. Дисков кеш
<br>--- FIGURE 11.10 ---
<br>
<hr WIDTH="100%">
<br>&nbsp;
</body>
</html>
