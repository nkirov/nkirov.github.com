<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>l07</title>
</head>
<body>

<hr width="100%">
<p><b>7. Търсене, бързо сортиране</b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="ABSCENTER"> Търсене в
несортирани и сортирани данни
<br><b><tt><font color="#993300">// lsearch.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;vector&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cstdlib&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;ctime&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">int linear_search(vector&lt;int&gt; v, int
a)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   int i;</font></tt></b>
<br><b><tt><font color="#000099">   for (i = 0; i &lt; v.size();
i++)</font></tt></b>
<br><b><tt><font color="#000099">       if
(v[i] == a) return i;</font></tt></b>
<br><b><tt><font color="#000099">   return -1;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">void print(vector&lt;int&gt; a)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   int i;</font></tt></b>
<br><b><tt><font color="#000099">   for (i = 0; i &lt; a.size();
i++)  cout &lt;&lt; a[i] &lt;&lt; " ";</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">void rand_seed()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   int seed = static_cast&lt;int&gt;(time(0));</font></tt></b>
<br><b><tt><font color="#000099">   srand(seed);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">int rand_int(int a, int b)</font></tt></b>
<br><b><tt><font color="#000099">{  return a + rand() % (b - a + 1); 
}</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   rand_seed();</font></tt></b>
<br><b><tt><font color="#000099">   vector&lt;int&gt; v(20);</font></tt></b>
<br><b><tt><font color="#000099">   int i;</font></tt></b>
<br><b><tt><font color="#000099">   for (i = 0; i &lt; v.size();
i++) v[i] = rand_int(1, 100);</font></tt></b>
<br><b><tt><font color="#000099">   print(v);</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Enter number
to search for: ";</font></tt></b>
<br><b><tt><font color="#000099">   int n;</font></tt></b>
<br><b><tt><font color="#000099">   cin &gt;&gt; n;</font></tt></b>
<br><b><tt><font color="#000099">   int j = linear_search(v,
n);</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Found in position
" &lt;&lt; j &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="ABSCENTER"> Двоично търсене
<br><b><tt><font color="#993300">// bsearch.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;vector&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cstdlib&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;ctime&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">int binary_search(vector&lt;int&gt; v, int
from, int to, int a)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   if (from &gt; to)  return
-1;</font></tt></b>
<br><b><tt><font color="#000099">   int mid = (from + to) / 2;</font></tt></b>
<br><b><tt><font color="#000099">   int diff = v[mid] - a;</font></tt></b>
<br><b><tt><font color="#000099">   if (diff == 0) return mid;         
/* v[mid] == a */</font></tt></b>
<br><b><tt><font color="#000099">   else if (diff &lt; 0)                 
/* v[mid] &lt; a */</font></tt></b>
<br><b><tt><font color="#000099">      return
binary_search(v, mid + 1, to, a);</font></tt></b>
<br><b><tt><font color="#000099">   else</font></tt></b>
<br><b><tt><font color="#000099">      return
binary_search(v, from, mid - 1, a);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">void print(vector&lt;int&gt; a)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   int i;</font></tt></b>
<br><b><tt><font color="#000099">   for (i = 0; i &lt; a.size();
i++) cout &lt;&lt; a[i] &lt;&lt; " ";</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">void rand_seed()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   int seed = static_cast&lt;int&gt;(time(0));</font></tt></b>
<br><b><tt><font color="#000099">   srand(seed);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">int rand_int(int a, int b)</font></tt></b>
<br><b><tt><font color="#000099">{  return a + rand() % (b - a + 1); 
}</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   rand_seed();</font></tt></b>
<br><b><tt><font color="#000099">   vector&lt;int&gt; v(20);</font></tt></b>
<br><b><tt><font color="#000099">   int i;</font></tt></b>
<br><b><tt><font color="#000099">   v[0] = 1;</font></tt></b>
<br><b><tt><font color="#000099">   for (i = 1; i &lt; v.size();
i++)</font></tt></b>
<br><b><tt><font color="#000099">       
v[i] = v[i - 1] + rand_int(1, 10);</font></tt></b>
<br><b><tt><font color="#000099">   print(v);</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Enter number
to search for: ";</font></tt></b>
<br><b><tt><font color="#000099">   int n;</font></tt></b>
<br><b><tt><font color="#000099">   cin &gt;&gt; n;</font></tt></b>
<br><b><tt><font color="#000099">   int j = binary_search(v,
0, v.size() - 1, n);</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Found in position
" &lt;&lt; j &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="ABSCENTER"> Търсене и
сортиране на реални данни
<br><b><tt><font color="#993300">// esearch.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;vector&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">#include "ccc_empl.cpp"</font></tt></b>
</p>
<p><b><tt><font color="#000099">int binary_search(vector&lt;Employee&gt; v,
int from, int to, string n)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   if (from &gt; to) return -1;</font></tt></b>
<br><b><tt><font color="#000099">   int mid = (from + to) / 2;</font></tt></b>
<br><b><tt><font color="#000099">   if (v[mid].get_name() ==
n)  return mid;</font></tt></b>
<br><b><tt><font color="#000099">   else if (v[mid].get_name()
&lt; n)</font></tt></b>
<br><b><tt><font color="#000099">      return
binary_search(v, mid + 1, to, n);</font></tt></b>
<br><b><tt><font color="#000099">   else</font></tt></b>
<br><b><tt><font color="#000099">      return
binary_search(v, from, mid - 1, n);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">   vector&lt;Employee&gt; staff(5);</font></tt></b>
<br><b><tt><font color="#000099">   staff[0] = Employee("Cracker,
Carl", 48000.0);</font></tt></b>
<br><b><tt><font color="#000099">   staff[1] = Employee("Hacker,
Harry", 35000.0);</font></tt></b>
<br><b><tt><font color="#000099">   staff[2] = Employee("Lam,
Larry", 78000.0);</font></tt></b>
<br><b><tt><font color="#000099">   staff[3] = Employee("Reindeer,
Rudolf", 63000.0);</font></tt></b>
<br><b><tt><font color="#000099">   staff[4] = Employee("Sandman,
Susan", 51500.0);</font></tt></b>
</p>
<p><b><tt><font color="#000099">   cout &lt;&lt; "Enter name
of employee to search for: ";</font></tt></b>
<br><b><tt><font color="#000099">   string name;</font></tt></b>
<br><b><tt><font color="#000099">   getline(cin, name);</font></tt></b>
</p>
<p><b><tt><font color="#000099">   int i = binary_search(staff,
0, staff.size() - 1, name);</font></tt></b>
</p>
<p><b><tt><font color="#000099">   if (i &gt;= 0)  cout &lt;&lt;
staff[i].get_name() &lt;&lt; " "</font></tt></b>
<br><b><tt><font color="#000099">                    
&lt;&lt; staff[i].get_salary() &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   else        
cout &lt;&lt; "Not found.\n";</font></tt></b>
</p>
<p><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="ABSCENTER"> Бързо сортиране
<br> Бързо сортиране
<br> А. Разделяне на дялове:
<br> 1. Избираме случаен елемент x от масива a
<br> 2. Преглеждаме масива отляво (от началото), докато достигнем
до елемент &gt;x
<br> 3. Преглеждаме масива отдясно (от края), докато достигнем до
елемент &lt;x
<br> 4. Разменяме местата на двата елемента
<br><b><tt><font color="#006600">vector&lt;int&gt; a(n);</font></tt></b>
<br><b><tt><font color="#006600">void partition(int x)</font></tt></b>
<br><b><tt><font color="#006600">{</font></tt></b>
<br><b><tt><font color="#006600"> int i=1, j=n;</font></tt></b>
<br><b><tt><font color="#006600"> do</font></tt></b>
<br><b><tt><font color="#006600"> {</font></tt></b>
<br><b><tt><font color="#006600">  while (a[i] &lt; x) i++;</font></tt></b>
<br><b><tt><font color="#006600">  while (a[j] &gt; x) j--;</font></tt></b>
<br><b><tt><font color="#006600">  if (i&lt;=j)</font></tt></b>
<br><b><tt><font color="#006600">  { swap(a[i], a[j]);  i++;
j--; }</font></tt></b>
<br><b><tt><font color="#006600"> }</font></tt></b>
<br><b><tt><font color="#006600"> while (i&lt;=j);</font></tt></b>
<br><b><tt><font color="#006600">}</font></tt></b>
</p>
<p>Б. Сортиране - след като масивът се раздели, двата му дяла се подлагат
на същата
<br>обработка и това продължава, докато се получат дялове само с по един
елемент.
<br><b><tt><font color="#000099">void quicksort(int left, int right)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> int i=left, j=right;</font></tt></b>
<br><b><tt><font color="#000099"> int x=a[(i + j)/2];</font></tt></b>
<br><b><tt><font color="#000099"> do</font></tt></b>
<br><b><tt><font color="#000099"> {</font></tt></b>
<br><b><tt><font color="#000099">  while (a[i] &lt; x) i++;</font></tt></b>
<br><b><tt><font color="#000099">  while (a[j] &gt; x) j--;</font></tt></b>
<br><b><tt><font color="#000099">  if (i&lt;=j)</font></tt></b>
<br><b><tt><font color="#000099">  { swap(a[i], a[j]); i++; j--; }</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099"> while (i&lt;=j);</font></tt></b>
<br><b><tt><font color="#000099"> if (left&lt;j) quicksort(left, j);</font></tt></b>
<br><b><tt><font color="#000099"> if (i&lt;right) quicksort(i, right);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>
</p>
<hr width="100%">
</body>
</html>
