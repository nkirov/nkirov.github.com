<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>l14</title>
</head>
<body>

<hr width="100%">
<p><b>14. Други реализации на линейни структури от данни</b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="TEXTTOP">  Едносвързан
списък.
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">struct Node { char data; Node *next;};</font></tt></b>
<br><b><tt><font color="#000099">Node *top;</font></tt></b>
</p>
<p><b><tt><font color="#000099">bool insert(Node *pt, char c)  //
insert after *pt</font></tt></b>
<br><b><tt><font color="#000099">{ if (pt == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">  Node *node=new Node;</font></tt></b>
<br><b><tt><font color="#000099">  if (node == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099">  node -&gt; data = c;</font></tt></b>
<br><b><tt><font color="#000099">  node -&gt; next = pt -&gt; next;</font></tt></b>
<br><b><tt><font color="#000099">  pt -&gt; next = node;</font></tt></b>
<br><b><tt><font color="#000099">  return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">bool erase(Node *pt)    
// erase pt-&gt;next</font></tt></b>
<br><b><tt><font color="#000099">{ if ((pt == NULL) || (pt-&gt;next==NULL))
return false;</font></tt></b>
<br><b><tt><font color="#000099">  Node *node=pt-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">  pt-&gt;next=node-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">  delete node;</font></tt></b>
<br><b><tt><font color="#000099">  return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void print()</font></tt></b>
<br><b><tt><font color="#000099">{ Node *pt=top;</font></tt></b>
<br><b><tt><font color="#000099">  while (pt!=NULL)</font></tt></b>
<br><b><tt><font color="#000099">  {</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; pt-&gt;data;</font></tt></b>
<br><b><tt><font color="#000099">   pt=pt-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">  }</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void create()</font></tt></b>
<br><b><tt><font color="#000099">{ char ch;</font></tt></b>
<br><b><tt><font color="#000099">  Node *pt=NULL, *ptold=NULL;</font></tt></b>
<br><b><tt><font color="#000099">  top=NULL;</font></tt></b>
<br><b><tt><font color="#000099">  while (cin &gt;&gt; ch)</font></tt></b>
<br><b><tt><font color="#000099">  {</font></tt></b>
<br><b><tt><font color="#000099">   pt=new Node;</font></tt></b>
<br><b><tt><font color="#000099">//  if (pt==NULL) break;</font></tt></b>
<br><b><tt><font color="#000099">   pt-&gt;data = ch;</font></tt></b>
<br><b><tt><font color="#000099">   pt-&gt;next = NULL;</font></tt></b>
<br><b><tt><font color="#000099">   if (top==NULL) top = pt;</font></tt></b>
<br><b><tt><font color="#000099">   else ptold-&gt;next = pt;</font></tt></b>
<br><b><tt><font color="#000099">   ptold = pt;</font></tt></b>
<br><b><tt><font color="#000099">  }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ create();       
print();</font></tt></b>
<br><b><tt><font color="#000099">  Node *pt=top; pt=pt-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">  insert(pt, 'A'); print();</font></tt></b>
<br><b><tt><font color="#000099">  erase(pt);      
print();</font></tt></b>
<br><b><tt><font color="#000099">  return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="TEXTTOP">  Опашка.
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">struct Node { char data; Node *next;};</font></tt></b>
<br><b><tt><font color="#000099">Node *top, *end;</font></tt></b>
</p>
<p><b><tt><font color="#000099">bool append(char c) // insert after last</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> if (end==NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099"> Node *node=new Node;</font></tt></b>
<br><b><tt><font color="#000099"> if (node == NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099"> node -&gt; data = c;</font></tt></b>
<br><b><tt><font color="#000099"> node -&gt; next = NULL;</font></tt></b>
<br><b><tt><font color="#000099"> end -&gt; next = node;</font></tt></b>
<br><b><tt><font color="#000099"> end = node;</font></tt></b>
<br><b><tt><font color="#000099"> return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">bool erase()      
// erase first</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> if (top==NULL) return false;</font></tt></b>
<br><b><tt><font color="#000099"> Node *node=top;</font></tt></b>
<br><b><tt><font color="#000099"> top=top-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099"> delete node;</font></tt></b>
<br><b><tt><font color="#000099"> return true;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void print()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> Node *pt=top;</font></tt></b>
<br><b><tt><font color="#000099"> while (pt!=NULL)</font></tt></b>
<br><b><tt><font color="#000099"> {</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; pt-&gt;data;</font></tt></b>
<br><b><tt><font color="#000099">  pt=pt-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099"> cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void create()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> char ch;</font></tt></b>
<br><b><tt><font color="#000099"> Node *pt=NULL, *ptold=NULL;</font></tt></b>
<br><b><tt><font color="#000099"> top=NULL;</font></tt></b>
<br><b><tt><font color="#000099"> while (cin &gt;&gt; ch)</font></tt></b>
<br><b><tt><font color="#000099"> {</font></tt></b>
<br><b><tt><font color="#000099">  pt=new Node;</font></tt></b>
<br><b><tt><font color="#000099">//  if (pt==NULL) break;</font></tt></b>
<br><b><tt><font color="#000099">  pt-&gt;data = ch;</font></tt></b>
<br><b><tt><font color="#000099">  pt-&gt;next = NULL;</font></tt></b>
<br><b><tt><font color="#000099">  if (top==NULL) top = pt;</font></tt></b>
<br><b><tt><font color="#000099">  else ptold-&gt;next = pt;</font></tt></b>
<br><b><tt><font color="#000099">  ptold = pt;</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099"> end = pt;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ create();    print();</font></tt></b>
<br><b><tt><font color="#000099">  append('A'); print();</font></tt></b>
<br><b><tt><font color="#000099">  erase();    
print();</font></tt></b>
<br><b><tt><font color="#000099">  return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<p><img src="bullet.gif" height="18" width="20" align="TEXTTOP"><font color="#000000">
Топологично сортиране.</font>
<br><font color="#000000">Дадено е частично наредено множество, т.е. между
някои от елементите му е дадена релация  <b><i>R</i></b>, със следните
3 свойства:</font>
<br><font color="#000000">1. ако <b><i>xRy</i></b> и <b><i>yRz</i></b>,
то <b><i>xRz</i></b> (транзитивност);</font>
<br><font color="#000000">2. ако <b><i>xRy</i></b>, то <b><i>yRx</i></b>
не е вярно (несиметричност);</font>
<br><font color="#000000">3. <b><i>xRx</i></b> не е вярно (нерефлексивност).</font>
<br>Задачата е да се изрази частичната наредба с линейна, т.е. да се подредят
елементите на множеството в редица, така, че ако<b><i> <font color="#000000">xRy</font></i></b><font color="#000000">,
то <b><i>x</i></b> е преди <b><i>y</i></b> в редицата.</font>
<br><font color="#000000">Алгоритъмът за решаване на задачата е от Н. Вирт
и използва свързани списъци.</font>
</p>
<p><b><tt><font color="#000099">#include &lt;iostream.h&gt;</font></tt></b>
<br><b><tt><font color="#000099">struct Trailer;</font></tt></b>
</p>
<p><b><tt><font color="#000099">struct Leader {</font></tt></b>
<br><b><tt><font color="#000099">       int
key, count;</font></tt></b>
<br><b><tt><font color="#000099">       Trailer
*tr;</font></tt></b>
<br><b><tt><font color="#000099">       Leader
*next;</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b>
<br><b><tt><font color="#000099">struct Trailer {</font></tt></b>
<br><b><tt><font color="#000099">       Leader
*id;</font></tt></b>
<br><b><tt><font color="#000099">       Trailer
*next;</font></tt></b>
<br><b><tt><font color="#000099">};</font></tt></b>
<br><b><tt><font color="#000099">Leader *head=new Leader;</font></tt></b>
</p>
<p><b><tt><font color="#000099">void Create();</font></tt></b>
<br><b><tt><font color="#000099">Leader *L(int);</font></tt></b>
<br><b><tt><font color="#000099">void Zero();</font></tt></b>
<br><b><tt><font color="#000099">void Tsort();</font></tt></b>
</p>
<p><b><tt><font color="#000099">void main()</font></tt></b>
<br><b><tt><font color="#000099">{ Create();</font></tt></b>
<br><b><tt><font color="#000099">  Zero();</font></tt></b>
<br><b><tt><font color="#000099">  Tsort();</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void Create()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> Leader *p, *q;</font></tt></b>
<br><b><tt><font color="#000099"> int x, y;</font></tt></b>
<br><b><tt><font color="#000099"> head=0;</font></tt></b>
<br><b><tt><font color="#000099"> while (cin &gt;&gt; x &amp;&amp; cin &gt;&gt;
y &amp;&amp; !cin.eof())</font></tt></b>
<br><b><tt><font color="#000099"> { p = L(x); q = L(y);</font></tt></b>
<br><b><tt><font color="#000099">   Trailer *t = new Trailer;</font></tt></b>
<br><b><tt><font color="#000099">   t-&gt;id = q;</font></tt></b>
<br><b><tt><font color="#000099">   t-&gt;next = p-&gt;tr;</font></tt></b>
<br><b><tt><font color="#000099">   p-&gt;tr = t;</font></tt></b>
<br><b><tt><font color="#000099">   (q-&gt;count)++;</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">Leader *L(int x)</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> Leader *p = head, *q;</font></tt></b>
<br><b><tt><font color="#000099"> q = p; // q is the last element
of the list</font></tt></b>
<br><b><tt><font color="#000099"> while (p)</font></tt></b>
<br><b><tt><font color="#000099"> {</font></tt></b>
<br><b><tt><font color="#000099">  if ((p-&gt;key) == x) return p;</font></tt></b>
<br><b><tt><font color="#000099">  q = p; p = p-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099"> p = new Leader;</font></tt></b>
<br><b><tt><font color="#000099"> p-&gt;key = x; p-&gt;count = 0; p-&gt;tr
= 0; p-&gt;next = 0;</font></tt></b>
<br><b><tt><font color="#000099"> if (q) q-&gt;next = p;</font></tt></b>
<br><b><tt><font color="#000099"> else   head = p;</font></tt></b>
<br><b><tt><font color="#000099"> return p;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void Zero()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> Leader *p = head, *q;</font></tt></b>
<br><b><tt><font color="#000099"> head = 0;</font></tt></b>
<br><b><tt><font color="#000099"> while (p)</font></tt></b>
<br><b><tt><font color="#000099"> { q = p; p = p-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">/* nova zadacha za poleto next i ukazatelia
head */</font></tt></b>
<br><b><tt><font color="#000099">   if (!(q-&gt;count)) { q-&gt;next
= head; head = q; }</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">void Tsort()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> Trailer *t;</font></tt></b>
<br><b><tt><font color="#000099"> Leader *q = head, *p;</font></tt></b>
<br><b><tt><font color="#000099"> while (q)</font></tt></b>
<br><b><tt><font color="#000099"> { cout &lt;&lt; (q-&gt;key) &lt;&lt;
' ';</font></tt></b>
<br><b><tt><font color="#000099">   t = q-&gt;tr;</font></tt></b>
<br><b><tt><font color="#000099">   q = q-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">   while (t)</font></tt></b>
<br><b><tt><font color="#000099">   { p = t-&gt;id; (p-&gt;count)--;</font></tt></b>
<br><b><tt><font color="#000099">     if (!(p-&gt;count))
{ p-&gt;next = q; q = p; }</font></tt></b>
<br><b><tt><font color="#000099">     t = t-&gt;next;</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>
</p>
<hr width="100%">
</body>
</html>
