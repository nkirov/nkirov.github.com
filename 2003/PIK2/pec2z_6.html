<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
   <META NAME="Author" CONTENT="Nikolay Kirov">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Pec2</TITLE>
</HEAD>
<BODY>

<HR WIDTH="100%">
<BR><B>6. Потоци</B>
<BR><IMG SRC="bullet.gif"  ALIGN=CENTER> Четене и запис в текстови файлове
<BR>* Пренасочване на входа и изхода

<P>* Четене от файл:
<BR><B><TT><FONT COLOR="#009900">#include &lt;fstream>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">включване на заглавен файл</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">int main()</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">{&nbsp; ifstream in_data; /* </FONT></TT></B><FONT COLOR="#000000">дефиниран</FONT>е
на файлова променлива за четене<B><TT><FONT COLOR="#009900"> */</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; in_data.open("input.txt");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">отваряне на </FONT>файла<B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>

<P><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; string s;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; in_data >> s;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">четене на дума</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; getline(in_data, s);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">четене на ред</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; int n;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; double x;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; in_data >> n >> x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">четене на числови данни</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; char ch;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; in_data.get(ch);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">четене на символ</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>

<P><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; in_data.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">затваряне на </FONT>файла<B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; return 0;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">}</FONT></TT></B>
<BR>* Записване на файл:
<BR><B><TT><FONT COLOR="#009900">#include &lt;fstream>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">включване на заглавен файл</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">int main()</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">{&nbsp; ofstream out_data; /* </FONT></TT></B><FONT COLOR="#000000">дефиниран</FONT>е
на файлова променлива за четене<B><TT><FONT COLOR="#009900"> */</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; out_data.open("output.txt");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">отваряне на </FONT>файла<B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>

<P><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; string s = "Hello";</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; out_data &lt;&lt; s;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/*</FONT></TT></B><FONT COLOR="#000000"> писане на низ</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; int n = 5;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; double x = 5.5;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; out_data &lt;&lt; n &lt;&lt;
x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">писане на числови данни</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; char ch = 'T';</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; out_data.put(ch);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">писане на символ</FONT><B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>

<P><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; out_data.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">затваряне на </FONT>файла<B><TT><FONT COLOR="#009900">
*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;&nbsp; return 0;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">}</FONT></TT></B>

<P><IMG SRC="bullet.gif"  ALIGN=CENTER> Текстови потоци

<P><IMG SRC="bullet.gif"  ALIGN=CENTER> Аргументи от командния ред
<BR>* Стартиране на програмата<B> <TT><FONT COLOR="#009900">prog</FONT></TT></B><FONT COLOR="#000000">:</FONT>

<P><B><TT><FONT COLOR="#009900">C:\mydir\>prog -v input.dat</FONT></TT></B>

<P>&nbsp;* Текста на програмата:
<BR><B><TT><FONT COLOR="#009900">int main(int argc, char * argv[])</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">{</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;cout &lt;&lt; argc;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </FONT></TT></B><FONT COLOR="#000000">брой на аргументите - 3 </FONT><B><TT><FONT COLOR="#009900">*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;cout &lt;&lt; string(argv[0]);&nbsp;&nbsp;&nbsp;
/* prog</FONT></TT></B><FONT COLOR="#000000"> </FONT><B><TT><FONT COLOR="#009900">*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;cout &lt;&lt; string(argv[1]);&nbsp;&nbsp;&nbsp;
/* -v</FONT></TT></B><FONT COLOR="#000000"> </FONT><B><TT><FONT COLOR="#009900">*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;cout &lt;&lt; string(argv[2]);&nbsp;&nbsp;&nbsp;
/* input.dat</FONT></TT></B><FONT COLOR="#000000"> </FONT><B><TT><FONT COLOR="#009900">*/</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">&nbsp;return 0;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">}</FONT></TT></B>

<P><IMG SRC="bullet.gif"  ALIGN=CENTER> Произволен достъп
<BR>-- файлове с променлива или фиксирана дължина на записа

<P>-- <FONT COLOR="#000000">включване на заглавен файл:</FONT>
<BR><B><TT><FONT COLOR="#009900">#include &lt;fstream></FONT></TT></B>

<P>-- файлова променлива за четене и писане:
<BR><B><TT><FONT COLOR="#009900">fstream fs;</FONT></TT></B>

<P>-- преместване на позициите за четене и писане:
<BR><B><TT><FONT COLOR="#009900">long n = 10;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">fs.seekg(n, ios::beg);</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">fs.seekp(n, ios::beg);</FONT></TT></B><B><TT><FONT COLOR="#009900"></FONT></TT></B>

<P>-- намиране на текущите позициите за четене и писане:
<BR><B><TT><FONT COLOR="#009900">long n;</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">n = fs.tellg();</FONT></TT></B>
<BR><B><TT><FONT COLOR="#009900">n = fs.tellp();</FONT></TT></B>

<P>
<HR WIDTH="100%">
</BODY>
</HTML>
