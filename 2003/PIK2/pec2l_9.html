<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>Pec2</title>
</head>
<body>

<hr WIDTH="100%">
<br><b>9. Потоци</b><b></b>
<p><img SRC="yellowball.gif" height=14 width=14> Четене и запис в текстови
файлове
<p>* Пренасочване на входа и изхода
<p>* Четене от файл:
<br><b><tt><font color="#009900">#include &lt;fstream>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">включване на заглавен файл</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">int main()</font></tt></b>
<br><b><tt><font color="#009900">{&nbsp; ifstream in_data; /* </font></tt></b><font color="#000000">дефиниран</font>е
на файлова променлива за четене<b><tt><font color="#009900"> */</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; in_data.open("input.txt");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">отваряне на </font>файла<b><tt><font color="#009900">
*/</font></tt></b>
<p><b><tt><font color="#009900">&nbsp;&nbsp; string s;</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; in_data >> s;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">четене на дума</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; getline(in_data, s);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">четене на ред</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; int n;</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; double x;</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; in_data >> n >> x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">четене на числови данни</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; char ch;</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; in_data.get(ch);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">четене на символ</font><b><tt><font color="#009900">
*/</font></tt></b>
<p><b><tt><font color="#009900">&nbsp;&nbsp; in_data.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">затваряне на </font>файла<b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#009900">}</font></tt></b>
<br>* Записване на файл:
<br><b><tt><font color="#009900">#include &lt;fstream>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">включване на заглавен файл</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">int main()</font></tt></b>
<br><b><tt><font color="#009900">{&nbsp; ofstream out_data; /* </font></tt></b><font color="#000000">дефиниран</font>е
на файлова променлива за четене<b><tt><font color="#009900"> */</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; out_data.open("output.txt");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">отваряне на </font>файла<b><tt><font color="#009900">
*/</font></tt></b>
<p><b><tt><font color="#009900">&nbsp;&nbsp; string s = "Hello";</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; out_data &lt;&lt; s;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/*</font></tt></b><font color="#000000"> писане на низ</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; int n = 5;</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; double x = 5.5;</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; out_data &lt;&lt; n &lt;&lt;
x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">писане на числови данни</font><b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; char ch = 'T';</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; out_data.put(ch);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">писане на символ</font><b><tt><font color="#009900">
*/</font></tt></b>
<p><b><tt><font color="#009900">&nbsp;&nbsp; out_data.close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">затваряне на </font>файла<b><tt><font color="#009900">
*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#009900">}</font></tt></b>
<br>
<hr WIDTH="100%">
<br><img SRC="yellowball.gif" height=14 width=14> Аргументи от командния
ред
<p>* Стартиране на програмата<b> <tt><font color="#009900">prog</font></tt></b><font color="#000000">:</font>
<p><b><tt><font color="#009900">C:\mydir\>prog -v input.dat</font></tt></b>
<p>&nbsp;* Текста на програмата:
<br><b><tt><font color="#009900">int main(int argc, char * argv[])</font></tt></b>
<br><b><tt><font color="#009900">{</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;cout &lt;&lt; argc;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* </font></tt></b><font color="#000000">брой на аргументите - 3 </font><b><tt><font color="#009900">*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;cout &lt;&lt; string(argv[0]);&nbsp;&nbsp;&nbsp;
/* prog</font></tt></b><font color="#000000"> </font><b><tt><font color="#009900">*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;cout &lt;&lt; string(argv[1]);&nbsp;&nbsp;&nbsp;
/* -v</font></tt></b><font color="#000000"> </font><b><tt><font color="#009900">*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;cout &lt;&lt; string(argv[2]);&nbsp;&nbsp;&nbsp;
/* input.dat</font></tt></b><font color="#000000"> </font><b><tt><font color="#009900">*/</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;return 0;</font></tt></b>
<br><b><tt><font color="#009900">}</font></tt></b>
<br>
<hr WIDTH="100%">
<br><img SRC="yellowball.gif" height=14 width=14> Произволен достъп
<br>-- файлове с променлива или фиксирана дължина на записа
<p>-- <font color="#000000">включване на заглавен файл:</font>
<br><b><tt><font color="#009900">#include &lt;fstream></font></tt></b>
<p>-- файлова променлива за четене и писане:
<br><b><tt><font color="#009900">fstream fs;</font></tt></b>
<p>-- преместване на позициите за четене и писане:
<br><b><tt><font color="#009900">long n = 10;</font></tt></b>
<br><b><tt><font color="#009900">fs.seekg(n, ios::beg);</font></tt></b>
<br><b><tt><font color="#009900">fs.seekp(n, ios::beg);</font></tt></b>
<p>-- намиране на текущите позициите за четене и писане:
<br><b><tt><font color="#009900">long n;</font></tt></b>
<br><b><tt><font color="#009900">n = fs.tellg();</font></tt></b>
<br><b><tt><font color="#009900">n = fs.tellp();</font></tt></b>
<br>
<hr WIDTH="100%">
</body>
</html>
