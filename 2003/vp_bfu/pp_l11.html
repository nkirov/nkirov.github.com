<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>pp_l11</title>
</head>
<body>

<hr WIDTH="100%"><font color="#000000"></font>
<center>
<p><b><font color="#000000"><font size=+1>11. Класове</font></font></b></center>

<div align=right><b><i><font color="#000000"><font size=-1>&nbsp;</font></font></i></b>
<br><b><i><font color="#000000"><font size=-1>"Изпървом бил Еру, Единствения,
когото в Арда наричат Илуватар;</font></font></i></b>
<br><b><i><font color="#000000"><font size=-1>и той сътворил Свещените
Айнури, що били рожби на неговата</font></font></i></b>
<br><b><i><font color="#000000"><font size=-1>мисъл и съществували заедно
с него още когато нямало</font></font></i></b>
<br><b><i><font color="#000000"><font size=-1>нищо друго."</font></font></i></b>
<br><b><i><font color="#000000"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Дж. Р. Р. Толкин, СИЛМАРИЛИОНЪТ</font></font></i></b>
<br><b><i><font color="#000000"><font size=-1>&nbsp;</font></font></i></b></div>
<font color="#000000">&nbsp;&nbsp;&nbsp; В лекциите до тук за класовете
са разгледани:</font>
<br><font color="#000000">- конструиране на обект: <b><tt>Employee harry("Hacher,
Harry", 350);</tt></b></font>
<br><font color="#000000">- модифициране на обект: <b><tt>harry.set_salary(380);</tt></b></font>
<br><font color="#000000">- извеждане на информация за обект:<b><tt> cout
&lt;&lt; harry.get_name();</tt></b></font>
<br><font color="#000000">Въведени са и основните понятия конструктор,
член-функция и операция точка.</font>
<p><img SRC="bullet.gif"  align=CENTER><font color="#000000">&nbsp; Обособяване
на класове.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Ще разгледаме задача, която
се решава без използване на клас и след това с дефиниране и използване
на подходящ клас. Чете се информация за компютри, съдържаща:</font>
<table CELLPADDING=4 COLS=2 WIDTH="100%" >
<tr>
<td VALIGN=TOP><font color="#000000"></font>
<table BORDER CELLSPACING=0 CELLPADDING=4 >
<tr>
<td><font color="#000000">име на модел</font></td>

<td><b><tt><font color="#000000">name</font></tt></b></td>

<td><b><tt><font color="#000000">OmniBook XE</font></tt></b></td>
</tr>

<tr>
<td><font color="#000000">цена</font></td>

<td><b><tt><font color="#000000">price</font></tt></b></td>

<td><b><tt><font color="#000000">5660</font></tt></b></td>
</tr>

<tr>
<td><font color="#000000">оценка</font></td>

<td><b><tt><font color="#000000">score</font></tt></b></td>

<td><b><tt><font color="#000000">76</font></tt></b></td>
</tr>
</table>
<font color="#000000"></font>
<p><font color="#000000">Търси се продукта с най-голямо отношение оценка/цена.</font></td>

<td><b><tt><font color="#000000">OmniBook XE</font></tt></b>
<br><b><tt><font color="#000000">5660</font></tt></b>
<br><b><tt><font color="#000000">76</font></tt></b>
<br><b><tt><font color="#000000">ACMA P300</font></tt></b>
<br><b><tt><font color="#000000">1095</font></tt></b>
<br><b><tt><font color="#000000">75</font></tt></b>
<br><b><tt><font color="#000000">AMAX Poewrstation</font></tt></b>
<br><b><tt><font color="#000000">1999</font></tt></b>
<br><b><tt><font color="#000000">78</font></tt></b></td>
</tr>
</table>
<font color="#000000">** Първото програмно решение е без използване на
класове.</font>
<br><b><tt><font color="#000000">// bangbuck.cpp</font></tt></b>
<br><b><tt><font color="#000000">#include &lt;iostream></font></tt></b>
<br><b><tt><font color="#000000">#include &lt;string></font></tt></b>
<br><b><tt><font color="#000000">using namespace std;</font></tt></b><font color="#000000"></font>
<p><b><tt><font color="#000000">int main()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; string best_name = "";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; double best_price = 0;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int best_score = 0;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; bool more = true;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; while (more)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; {&nbsp; string next_name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double
next_price;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int next_score;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt;
"Please enter the model name: ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getline(cin,
next_name);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt;
"Please enter the price: ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cin >>
next_price;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt;
"Please enter the score: ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cin >>
next_score;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string
remainder; /* read remainder of line */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getline(cin,
remainder);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next_price
!= 0)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;
if (best_price == 0 or</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
next_score/next_price > best_score/best_price)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{&nbsp; best_name = next_name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
best_score = next_score;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
best_price = next_price;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt;
"More data? (y/n) ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string
answer;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getline(cin,
answer);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (answer
!= "y") more = false;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cout &lt;&lt; "The best bang
for the buck is " &lt;&lt; best_name</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt;
" (Score: " &lt;&lt; best_score</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt;
" Price: " &lt;&lt; best_price &lt;&lt; ")\n";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<table BORDER CELLPADDING=4 WIDTH="100%" >
<tr>
<td><b><tt><font color="#000000">Please enter the model name: OmnoBook
XE</font></tt></b>
<br><b><tt><font color="#000000">Please enter the price: 5660</font></tt></b>
<br><b><tt><font color="#000000">Please enter the score: 76</font></tt></b>
<br><b><tt><font color="#000000">More data? (y/n) y</font></tt></b>
<br><b><tt><font color="#000000">Please enter the model name: Junk PC</font></tt></b>
<br><b><tt><font color="#000000">Please enter the price: 1230</font></tt></b>
<br><b><tt><font color="#000000">Please enter the score: 51</font></tt></b>
<br><b><tt><font color="#000000">More data? (y/n) n</font></tt></b>
<br><b><tt><font color="#000000">The best bang for the buck is Junk PC
(Score: 51 Price: 1230)</font></tt></b></td>
</tr>
</table>
<font color="#000000"></font>
<p><img SRC="bullet.gif" height=18 width=20><font color="#000000"> Интерфейс
и капсулиране, членове-функции.</font>
<br><font color="#000000">** Второ програмно решение на задачата с използване
на класове.</font>
<br><b><tt><font color="#000000">// product2.cpp</font></tt></b>
<br><b><tt><font color="#000000">#include &lt;iostream></font></tt></b>
<br><b><tt><font color="#000000">#include &lt;string></font></tt></b>
<br><b><tt><font color="#000000">using namespace std;</font></tt></b><font color="#000000"></font>
<p><b><tt><font color="#000000">/* ДЕФИНИЦИЯ НА КЛАСА */</font></tt></b>
<br><b><tt><font color="#000000">class Product&nbsp; {</font></tt></b>
<br><b><tt><font color="#000000">public:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* интерфейс, открита част */</font></tt></b>
<br><b><tt><font color="#000000">/* декларации на член-функциите на класа
*/</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Product();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* създава нов продукт */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void read();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* чете продукт&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; bool is_better_than(Product
b) const;/* сравнява продукти */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void print() const;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* отпечатва продукт&nbsp;&nbsp; */</font></tt></b>
<br><b><tt><font color="#000000">private:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* капсулиране, скрита част */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* скрити данни */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; double price;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* скрити данни */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int score;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* скрити данни */</font></tt></b>
<br><b><tt><font color="#000000">};</font></tt></b>
<br><b><tt><font color="#000000">/* ИЗПОЛЗВАНЕ НА КЛАСА */</font></tt></b>
<br><b><tt><font color="#000000">int main()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; Product best;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

/* дефиниране на обект от класа */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; bool more = true;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; while (more)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; {&nbsp; Product next;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next.read();&nbsp;&nbsp;

/* извикване на член-функция на класа */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next.is_better_than(best))
best = next;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt;
"More data? (y/n) ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string
answer;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getline(cin,
answer);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (answer
!= "y") more = false;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cout &lt;&lt; "The best bang
for the buck is ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; best.print();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* извикване на член-функция на класа */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">/* РЕАЛИЗАЦИЯ НА КЛАСА */</font></tt></b>
<br><b><tt><font color="#000000">/* дефиниция на конструктор */</font></tt></b>
<br><b><tt><font color="#000000">Product::Product()</font></tt></b>
<br><b><tt><font color="#000000">{ price = 10000;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; score = 0;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">/* дефиниция на член-функция мутатор (set-функция)
*/</font></tt></b>
<br><b><tt><font color="#000000">void Product::read()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; cout &lt;&lt; "Please enter the
model name: ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; getline(cin, name);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cout &lt;&lt; "Please enter
the price: ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cin >> price;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cout &lt;&lt; "Please enter
the score: ";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cin >> score;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string remainder;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; getline(cin, remainder);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">/* дефиниция на член-функции за достъп
(get-функция) */</font></tt></b>
<br><b><tt><font color="#000000">bool Product::is_better_than(Product b)
const</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; if (price == 0) return false;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; if (b.price == 0) return
true;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; if (score/price > b.score/b.price)
return true;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; return false;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">/* дефиниция на член-функции за достъп
(get-функция) */</font></tt></b>
<br><b><tt><font color="#000000">void Product::print() const</font></tt></b>
<br><b><tt><font color="#000000">{ cout &lt;&lt; name</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt;
" Price: " &lt;&lt; price</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt;
" Score: " &lt;&lt; score &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">/* КРАЙ на файла, съдържащ текста на програмата
*/</font></tt></b>
<br><font color="#000000">** Неявен параметър на член-функция:</font>
<br><font color="#000000">-- set-функции (мутатори) - променят (стойността
на) неявния си параметър;</font>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; void read();</font></tt></b>
<br><font color="#000000">-- get-функции (функции за достъп) - не променят
(стойността на) неявния си параметър, могат да се обявят като константни
функции.</font>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; void print() const;</font></tt></b>
<br>
<hr WIDTH="100%">
<br><img SRC="bullet.gif"  align=CENTER><font color="#000000"> Конструктори
по подразбиране и с параметри.</font>
<br><font color="#000000">** Конструкторът инициализира (задава начални
стойности на) данните на класа. Няма тип и не връща стойност.</font>
<br><font color="#000000">** Предефиниране на функции - две функции в една
програма на С++ могат да имат еднакви имена. За да бъдат различими, те
трябва да имат различен брой параметри или/и параметрите им да са от различен
тип.</font>
<br><b><tt><font color="#000000">class Employee {</font></tt></b>
<br><b><tt><font color="#000000">public:</font></tt></b>
<br><b><tt><font color="#000000">/* конструктор без параметри */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Employee();</font></tt></b>
<br><b><tt><font color="#000000">/* конструктор с параметри */</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Employee(string emp_name,
double init_salary);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void set_salary(double new_salary);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string get_name() const;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; double get_salary() const;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void print() const;</font></tt></b>
<br><b><tt><font color="#000000">private:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; double salary;</font></tt></b>
<br><b><tt><font color="#000000">};</font></tt></b>
<br><b><tt><font color="#000000">/* дефиниция на канструктора с параметри
*/</font></tt></b>
<br><b><tt><font color="#000000">Employee::Employee(string emp_name, double
init_salary)</font></tt></b>
<br><b><tt><font color="#000000">{ name = emp_name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; salary = init_salary;&nbsp; }</font></tt></b><font color="#000000"></font>
<p><font color="#000000">* Полета с данни - обекти от други класове.</font>
<br><b><tt><font color="#000000">class Employee {</font></tt></b>
<br><b><tt><font color="#000000">public:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Employee(string n, double
sal, int arr, int leav);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; ...</font></tt></b>
<br><b><tt><font color="#000000">private:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; double salary;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Time arrive;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Time leave;</font></tt></b>
<br><b><tt><font color="#000000">};</font></tt></b><font color="#000000"></font>
<p><b><tt><font color="#000000">Employee::Employee(string n, double sal,
int arr, int leav)</font></tt></b>
<br><b><tt><font color="#000000">{ name = n;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; salary = sal;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; arrive = Time(arr, 0, 0);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; leave = Time(leav, 0, 0);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">Класът<b> <tt>Employee </tt></b>съдържа&nbsp;
членове-данни, които са обекти от клас <b><tt>Time.</tt></b></font>
<br>
<hr WIDTH="100%"><font color="#000000"></font>
<p><img SRC="bullet.gif"  align=CENTER><font color="#000000"> Достъп до
полетата с данни.</font>
<br><font color="#000000">** Само членовете-функции имат достъп до скритите
полета с данни.</font>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; string Employee::get_name()
const</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; { return name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; void Employee::set_salary(double
new_salary)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; { salary = new_salary;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; }</font></tt></b>
<br><font color="#000000">** Явни и неявни параметри на функции.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Отпечатване на името и заплатата
на служител, реализирано с три различни функции:</font>
<br><font color="#000000">-- член-функция с използване на достъп до скритите
данни:</font>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void Employee::print() const</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; { cout &lt;&lt; "Name: "
&lt;&lt; name &lt;&lt; "&nbsp;&nbsp;&nbsp; "</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;&lt; "Salary: " &lt;&lt; salary &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br><font color="#000000">-- член-функция с използване на член-функции
от същия клас:</font>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void Employee::print() const</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; { cout &lt;&lt; "Name: "
&lt;&lt; get_name() &lt;&lt; "&nbsp;&nbsp;&nbsp; "</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;&lt; "Salary: " &lt;&lt; get_salary() &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br><font color="#000000">-- външна за класа функция:</font>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void print(Employee const
&amp;emp)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; { cout &lt;&lt; "Name: "
&lt;&lt; emp.get_name() &lt;&lt; "&nbsp;&nbsp;&nbsp; "</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;&lt; "Salary: " &lt;&lt; emp.get_salary() &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br>
<hr WIDTH="100%">
<br><img SRC="bullet.gif"  align=CENTER><font color="#000000"> Обектно-ориентирано
проектиране.</font>
<br><font color="#000000">** Процесът от описание на задачата до реализацията
на С++, използвайки обектно-ориентиран подход:</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 1. Обособяване на обекти и
класове.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 2. Дефиниране на интерфейс
за всеки от тези класове.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 3. Реализиране на интерфейса.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; 4. Комбиниране на обектите,
за да се реши задачата.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Ще илюстрираме този процес
с пример - игра, която обучава децата да познават часовника.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Играта се състои в следното.
Генерира се случайно време, рисува се циферблат с това време и се пита
играчът колко е часът. Играчът има право на два опита, преди играта да
покаже правилното време. Когато той познае правилния отговар, точките му
се увеличават с 1. Има 4 нива на трудност. Ниво 1 учи на кръглите часове,
ниво 2 - на 15-минутни интервали, ниво 3 - на 5 минутни интервали и ниво
4 - с точност до минута. Когато играчът постигне 5 точки на едно ниво,
играта преминава на следващото ниво. В началото играта пита за името на
играча и желано начално ниво. След всеки кръг тя пита играча желае ли да
играе още. Играта свършва, когато той отговори отрицателно.</font><font color="#000000"></font>
<p><font color="#000000">** Обособяване на класовете.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Търсят се съществителните
във формулировката на задачата - те са кандидатите за класове: играч (<b><tt>Player</tt></b>),
часовник (<b><tt>Clock</tt></b>), време (<b><tt>Time</tt></b>), игра (<b><tt>Game</tt></b>),
кръг (<b><tt>Round</tt></b>), ниво (<b><tt>Level</tt></b>).</font><font color="#000000"></font>
<p><font color="#000000">** Определяне на интерфейс.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Определя се какви действия
трябва да бъдат извършвани с обекти от възможните класове.</font>
<table CELLPADDING=4 COLS=2 WIDTH="100%" >
<tr>
<td VALIGN=TOP><font color="#000000">* Часовникът трябва да се нарисува
и да му се зададе време.</font></td>

<td VALIGN=TOP><font color="#000000"></font>
<table BORDER CELLSPACING=0 WIDTH="100%" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><tt><font color="#000000">Clock</font></tt></b></td>
</tr>

<tr>
<td><font color="#000000">&nbsp;<b><tt>draw</tt></b></font></td>
</tr>

<tr>
<td><font color="#000000">&nbsp;<b><tt>set_time</tt></b></font></td>
</tr>
</table>
<font color="#000000"></font></td>
</tr>
</table>
<font color="#000000"></font>
<table CELLPADDING=4 COLS=2 WIDTH="100%" >
<tr>
<td VALIGN=TOP><font color="#000000">* Времето трябва да може да се задава
с точност до минута; да се отчитат часовете и минутите и да се сравняват
показаното на часовника и отговора на играча.</font></td>

<td VALIGN=TOP><font color="#000000"></font>
<table BORDER CELLSPACING=0 WIDTH="100%" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><tt><font color="#000000">Time</font></tt></b></td>
</tr>

<tr>
<td NOWRAP><font color="#000000">&nbsp; <b><tt>Time(hours, minutes)</tt></b></font></td>
</tr>

<tr>
<td><b><tt><font color="#000000">&nbsp;get_hours</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000000">&nbsp;get_minutes</font></tt></b></td>
</tr>

<tr>
<td><font color="#000000">&nbsp; <b><tt>is_same_as(Time)</tt></b></font></td>
</tr>
</table>
<font color="#000000"></font></td>
</tr>
</table>
<font color="#000000"></font>
<table CELLPADDING=4 COLS=2 WIDTH="100%" >
<tr>
<td><font color="#000000">* Играчът има име, ниво и точки. Името и нивото
му се задават в началото на играта. Точките му се увеличават по време на
играта и след набиране на 5 точки се увеличава и нивото му. Ще трябва да
се знае и текущото ниво на играча.</font></td>

<td VALIGN=TOP><font color="#000000"></font>
<table BORDER CELLSPACING=0 WIDTH="100%" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><tt><font color="#000000">Player</font></tt></b></td>
</tr>

<tr>
<td NOWRAP><font color="#000000">&nbsp; <b><tt>Player(name, initial_level)</tt></b></font></td>
</tr>

<tr>
<td><b><tt><font color="#000000">&nbsp;increment_score</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000000">&nbsp;get_level</font></tt></b></td>
</tr>
</table>
<font color="#000000"></font></td>
</tr>
</table>
<font color="#000000"></font>
<table CELLPADDING=4 COLS=2 WIDTH="100%" >
<tr>
<td><font color="#000000">* Игра:&nbsp;</font>
<br><font color="#000000">получаване на информация за играча&nbsp;</font>
<br><b><tt><font color="#000000">do</font></tt></b>
<br><font color="#000000"><b><tt>{ </tt></b>изиграване на кръг&nbsp;</font>
<br><font color="#000000">&nbsp;&nbsp; питане за продължаване на играта&nbsp;</font>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000"><b><tt>while</tt></b> (играчът иска да продължи)</font></td>

<td VALIGN=TOP><font color="#000000"></font>
<table BORDER CELLSPACING=0 WIDTH="100%" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><tt><font color="#000000">Game</font></tt></b></td>
</tr>

<tr>
<td><font color="#000000">&nbsp; <b><tt>play</tt></b></font></td>
</tr>

<tr>
<td NOWRAP><b><tt><font color="#000000">&nbsp;read_player_information</font></tt></b></td>
</tr>

<tr>
<td><b><tt><font color="#000000">&nbsp;play_round</font></tt></b></td>
</tr>
</table>
<font color="#000000"></font></td>
</tr>
</table>
<font color="#000000"></font>
<br><font color="#000000"></font>&nbsp;
<br><font color="#000000"></font>&nbsp;<font color="#000000"></font>
<p><font color="#000000">** Реализиране на интерфейс.</font>
<br><font color="#000000">* Клас <b><tt>Clock</tt></b>:</font>
<br><b><tt><font color="#000000">class Clock&nbsp; {</font></tt></b>
<br><b><tt><font color="#000000">public:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Clock();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Clock(Point c, double r);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void set_time(Time t);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void draw() const;</font></tt></b>
<br><b><tt><font color="#000000">private:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Time current_time;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Point center;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; double radius;</font></tt></b>
<br><b><tt><font color="#000000">};</font></tt></b>
<br><b><tt><font color="#000000">void Clock::set_time(Time t)</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; current_time = t;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Рисуване на часовник:</font>
<br><font color="#000000">- рисуване на кръг;</font>
<br><font color="#000000">- рисуване на часовите деления;</font>
<br><font color="#000000">- рисуване на минутните деления;</font>
<br><font color="#000000">- рисуване на часовата стрелка;</font>
<br><font color="#000000">- рисуване на минутната стрелка.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Рисува часово или минутно
деление:</font>
<br><b><tt><font color="#000000">void Clock::draw_tick(double angle, double
length) const</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; double alpha = PI/2 - 6*angle*PI/180;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Point from(center.get_x()
+ cos(alpha)*radius*(1-length),</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
center.get_y() + sin(alpha)*radius*(1-length));</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Point to(center.get_x() +
cos(alpha)*radius,</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
center.get_y() + sin(alpha)*radius);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cwin &lt;&lt; Line(from,
to);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Рисува стрелка:</font>
<br><b><tt><font color="#000000">void Clock::draw_hand(double angle, double
length) const</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; double alpha = PI/2 - 6*angle*PI/180;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Point from = center;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Point to(center.get_x() +
cos(alpha)*radius*length,</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
center.get_y() + sin(alpha)*radius*length);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cwin &lt;&lt; Line(from,
to);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">Рисува циферблат:</font>
<br><b><tt><font color="#000000">void Clock::draw() const</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; cwin &lt;&lt; Circle(center, radius);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int i;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; const double HOUR_TICK_LENGTH
= 0.2;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; const double MINUTE_TICK_LENGTH
= 0.1;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; const double HOUR_HAND_LENGTH
= 0.6;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; const double MINUTE_HAND_LENGTH
= 0.75;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; for (i = 0; i &lt; 12; i++)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; {&nbsp; draw_tick(i * 5,
HOUR_TICK_LENGTH);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int j;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (j
= 1; j &lt;= 4; j++)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
draw_tick(i * 5 + j, MINUTE_TICK_LENGTH);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; draw_hand(current_time.get_minutes(),
MINUTE_HAND_LENGTH);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; draw_hand((current_time.get_hours()
+</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; current_time.get_minutes()
/ 60.0) * 5, HOUR_HAND_LENGTH);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">* За времето ще използваме готовия клас <b><tt>Time</tt></b>.</font><font color="#000000"></font>
<p><font color="#000000">* Клас <b><tt>Player</tt></b>:</font>
<br><b><tt><font color="#000000">class Player&nbsp; {</font></tt></b>
<br><b><tt><font color="#000000">public:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Player();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Player(string player_name,
int initial_level);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void increment_score();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int get_level() const;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string get_name() const;</font></tt></b>
<br><b><tt><font color="#000000">private:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int score;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int level;</font></tt></b>
<br><b><tt><font color="#000000">};</font></tt></b>
<br><b><tt><font color="#000000">Player::Player(string player_name, int
initial_level)</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; name = player_name;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; level = initial_level;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; score = 0;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">int Player::get_level() const</font></tt></b>
<br><b><tt><font color="#000000">{ return level;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">string Player::get_name() const</font></tt></b>
<br><b><tt><font color="#000000">{ return name;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">void Player::increment_score()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; score++;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; if (score % 5 == 0 and level
&lt; 4) level++;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b><b><tt><font color="#000000"></font></tt></b>
<p><font color="#000000">* Клас <b><tt>Game</tt></b>:</font>
<br><b><tt><font color="#000000">class Game {</font></tt></b>
<br><b><tt><font color="#000000">public:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Game();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void play();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void read_player_information();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; void play_round();</font></tt></b>
<br><b><tt><font color="#000000">private:</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Player player;</font></tt></b>
<br><b><tt><font color="#000000">};</font></tt></b>
<br><b><tt><font color="#000000">Game::Game()</font></tt></b>
<br><b><tt><font color="#000000">{ rand_seed();</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">void Game::play()</font></tt></b>
<br><b><tt><font color="#000000">{ read_player_information();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; string response;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; do</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; { play_round();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; response =</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp; cwin.get_string("Do
you want to play again? (y/n)");</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; } while (response == "y");</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000">void Game::read_player_information()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; string name = cwin.get_string("What
is your name?");</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int initial_level;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; do</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; { initial_level =</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp; cwin.get_int("At
what level do you want to start?(1-4)");</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; } while (initial_level &lt;
1 or initial_level > 4);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; player = Player(name, initial_level);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><b><tt><font color="#000000"></font></tt></b>&nbsp;<b><tt><font color="#000000"></font></tt></b>
<p><font color="#000000">&nbsp;&nbsp;&nbsp; Изиграване на кръг:</font>
<br><font color="#000000">- генериране на случайно време</font>
<br><font color="#000000">- показване на времето</font>
<br><font color="#000000">- получаване на отговор</font>
<br><font color="#000000">- ако отговорът не е правилен, отново получаване
на отговор</font>
<br><font color="#000000">- ако отговорът е правилен - поздравления и увеличаване
на точките</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Генериране на случайно време:</font>
<br><b><tt><font color="#000000">Time Game::random_time()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; int level = player.get_level();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int minutes;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; if (level == 1) minutes =
0;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; else if (level == 2) minutes
= 15 * rand_int(0, 3);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; else if (level == 3) minutes
= 5 * rand_int(0, 11);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; else minutes = rand_int(0,
59);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int hours = rand_int(1, 12);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; return Time(hours, minutes,
0);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Получаване на отговор:</font>
<br><b><tt><font color="#000000">Time Game::get_guess()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; int hours;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; do</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; {&nbsp; hours = cwin.get_int("Please
enter hours: (1-12)");</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; } while (hours &lt; 1 or
hours > 12);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; int minutes;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; do</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; {&nbsp; minutes = cwin.get_int("Please
enter minutes: (0-59)");</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; } while (minutes &lt; 0 or
minutes > 59);</font></tt></b><font color="#000000"></font>
<p><b><tt><font color="#000000">&nbsp;&nbsp; return Time(hours, minutes,
0);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Изиграване на кръг:</font>
<br><b><tt><font color="#000000">void Game::play_round()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; cwin.clear();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Time t = random_time();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; const double CLOCK_RADIUS
= 5;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Clock clock(Point(0, 0),
CLOCK_RADIUS);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; clock.set_time(t);</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; clock.draw();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; Time guess = get_guess();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; if (t.seconds_from(guess)
!= 0) guess = get_guess();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; string text;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; if (t.seconds_from(guess)
== 0)</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; {&nbsp; text = "Congratulations,
" + player.get_name()</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+ "! That is correct.";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; player.increment_score();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; }</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; else</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; text =
"Sorry, " + player.get_name()</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
+ "! That is not correct.";</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; cwin &lt;&lt; Message(Point(-CLOCK_RADIUS,
CLOCK_RADIUS + 1),text);</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b><b><tt><font color="#000000"></font></tt></b>
<p><font color="#000000">* Главна програма:</font>
<br><b><tt><font color="#000000">int main()</font></tt></b>
<br><b><tt><font color="#000000">{&nbsp; Game clock_game;</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; clock_game.play();</font></tt></b>
<br><b><tt><font color="#000000">&nbsp;&nbsp; return 0;</font></tt></b>
<br><b><tt><font color="#000000">}</font></tt></b>
<br><font color="#000000">&nbsp;&nbsp;&nbsp; Цялата програма е записана
във файла <b><tt>clock.cpp.</tt></b></font>
<br>
<hr WIDTH="100%">
</body>
</html>
