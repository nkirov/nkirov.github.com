<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>pp_l09</title>
</head>
<body>

<hr width="100%">
<center>
<p><b><font size="+1">9.  Цикли</font></b></p>
</center>

<div align="right">
<b><i><font size="-1"> </font></i></b>
<br><b><i><font size="-1">"Цикъл - минималното време необходимо на процесора,</font></i></b>
<br><b><i><font size="-1">за да изпълни една инструкция."</font></i></b>
<br><b><font size="-1"><i>ЕИМ Свят - Списанието на Юнаците...</i> :-)</font></b>
<br><b><font size="-1"> </font></b>
</div>
<img src="bullet.gif" height="18" width="20"> Прости цикли - оператор while.
<p>** Синтаксис:
</p>
<table border cellspacing="0" cellpadding="4" cols="1" width="100%">
<tr>
<td>
<center><table border="0" cellspacing="0" cellpadding="4">
<tr>
<td><b><tt><font color="#CC0000"><font size="+1">while</font></font></tt></b></td>

<td><b><tt><font size="+1"><font color="#CC0000">(&lt;</font><font color="#FF0000">условие&gt;</font><font color="#CC0000">)</font></font></tt></b></td>

<td><b><tt><font size="+1"><font color="#FF0000">&lt;оператор&gt;</font><font color="#CC0000">;</font></font></tt></b></td>
</tr>
</table></center>
</td>
</tr>
</table>

<p>** Удвояване на влог (задачата от лекция 1. Увод).
<br>    Внасяме 10000 лв. в банкова сметка с 6% год. лихва
при месечно олихвяване. След колко години сумата в сметката ще се удвои?
<br><b><tt><font color="#000099">// doublinv.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  double rate = 6;</font></tt></b>
<br><b><tt><font color="#000099">   double balance = 10000;</font></tt></b>
<br><b><tt><font color="#000099">   int month = 0;</font></tt></b>
</p>
<p><b><tt><font color="#000099">   while (balance &lt; 20000)</font></tt></b>
<br><b><tt><font color="#000099">   {  month++;</font></tt></b>
<br><b><tt><font color="#000099">      balance
= balance * (1 + rate/12/100);</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "The investment
doubled after "</font></tt></b>
<br><b><tt><font color="#000099">       
&lt;&lt; month / 12.0 &lt;&lt; " years.\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td><b><tt><font color="#660000">The investment doubled after 11.5833 years.</font></tt></b></td>
</tr>
</table>

<p>** Факториел.
<br>    Да се пресметне стойността на функцията факториел
без рекурсия.
<br><b><tt><font color="#000099">// whilefac.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">long factorial(int n)</font></tt></b>
<br><b><tt><font color="#000099">{  int factor = 1;</font></tt></b>
<br><b><tt><font color="#000099">   long product = 1;</font></tt></b>
<br><b><tt><font color="#000099">   while (factor &lt;= n)</font></tt></b>
<br><b><tt><font color="#000099">   {  product = product
* factor;</font></tt></b>
<br><b><tt><font color="#000099">      factor++;</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   return product;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  cout &lt;&lt; "Please enter a
number: ";</font></tt></b>
<br><b><tt><font color="#000099">   int n;</font></tt></b>
<br><b><tt><font color="#000099">   cin &gt;&gt; n;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; n &lt;&lt;
"! = " &lt;&lt; factorial(n) &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b><b><tt><font color="#000099"></font></tt></b>
</p>
<p>** Максимална стойност.
<br>    Програмата чете редица от стойности (числа) и извежда
най-голямата стойност.
<br><b><tt><font color="#000099">// maxtemp.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099">/* </font><font color="#3333FF">съхранява
текущото число</font><font color="#000099"> */</font></tt></b>
<br><b><tt><font color="#000099">   double next;</font></tt></b>
<br><b><tt><font color="#000099">/*
</font><font color="#3333FF">съхранява
най-голямото въведено число до момента </font><font color="#000099">*/</font></tt></b>
<br><b><tt><font color="#000099">   double highest;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Please enter
the temperature values:\n";</font></tt></b>
<br><b><tt><font color="#000099">   if (cin &gt;&gt; next)</font></tt></b>
<br><b><tt><font color="#000099">/* </font><font color="#3333FF">инициализира
highest с първото въведено число</font><font color="#000099"> */</font></tt></b>
<br><b><tt><font color="#000099">      highest
= next;</font></tt></b>
<br><b><tt><font color="#000099">   else</font></tt></b>
<br><b><tt><font color="#000099">   {  cout &lt;&lt; "No
data!\n";</font></tt></b>
<br><b><tt><font color="#000099">      return
1;</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   while (cin &gt;&gt; next)</font></tt></b>
<br><b><tt><font color="#000099">      if (next
&gt; highest) highest = next;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "The highest
temperature is " &lt;&lt; highest &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td>
<b><tt><font color="#990000">Please enter the temperature values:</font></tt></b>
<br><b><tt><font color="#006600">12</font></tt></b>
<br><b><tt><font color="#006600">22</font></tt></b>
<br><b><tt><font color="#006600">-3</font></tt></b>
<br><b><tt><font color="#006600">a</font></tt></b>
<br><b><tt><font color="#990000">The highest temperature is 22</font></tt></b>
</td>
</tr>
</table>

<p><img src="bullet.gif" height="18" width="20"> Цикъл <b><tt>for</tt></b>.
</p>
<p>** Синтаксис:
</p>
<table border cellspacing="0" cellpadding="0" cols="1" width="100%">
<tr>
<td>
<center><table border="0" cellspacing="0">
<tr>
<td><b><tt><font color="#CC0000">for</font></tt></b></td>

<td><b><tt><font color="#CC0000">(&lt;инициализация&gt;; &lt;условие&gt;; &lt;корекция&gt;)</font></tt></b></td>

<td><b><tt><font color="#CC0000">&lt;оператор&gt;;</font></tt></b></td>
</tr>
</table></center>
</td>
</tr>
</table>

<p>Редът на изпълнение на четирите части на оператора е:
<br><b><tt><font color="#CC0000">&lt;инициализация&gt;</font></tt></b>
<br><b><tt><font color="#CC0000">&lt;условие&gt; - </font></tt></b><font color="#000000">ако
не е изпълнено, край на цикъла</font>
<br><b><tt><font color="#CC0000">&lt;оператор&gt;</font></tt></b>
<br><b><tt><font color="#CC0000">&lt;корекция&gt;</font></tt></b>
<br><b><tt><font color="#CC0000">&lt;условие&gt; - </font></tt></b><font color="#000000">ако
не е изпълнено, край на цикъла</font>
<br><b><tt><font color="#CC0000">&lt;оператор&gt;</font></tt></b>
<br><b><tt><font color="#CC0000">&lt;корекция&gt; и т.н.</font></tt></b>
<br>** Най-често срещаната форма за използване на оператора <font color="#006600"><b><tt>for</tt></b>
е:</font>
<br><b><tt><font color="#3333FF">      </font><font color="#006600">for
(i=</font><font color="#000000">начало</font><font color="#006600">; i&lt;=</font><font color="#000000">край</font><font color="#006600">;
i++)</font></tt></b>
<br><b><tt><font color="#000000">      </font><font color="#006600">{</font></tt></b>
<br><b><tt><font color="#000000">       тяло
на цикъла</font></tt></b>
<br><b><tt><font color="#000000">      </font><font color="#006600">}</font></tt></b>
<br>** Пресмятане стойността на функцията факториел - вместо цикъл <b><tt><font color="#000000">while</font></tt></b>
се използва цикъл <b><tt><font color="#000000">for</font></tt></b>.
<br><b><tt><font color="#000099">// forfac.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">long factorial(int n)</font></tt></b>
<br><b><tt><font color="#000099">{  long product = 1;</font></tt></b>
<br><b><tt><font color="#000099">   int factor;</font></tt></b>
<br><b><tt><font color="#000099">   for (factor = 1; factor &lt;=
n; factor++)</font></tt></b>
<br><b><tt><font color="#000099">      product
= product * factor;</font></tt></b>
<br><b><tt><font color="#000099">   return product;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  cout &lt;&lt; "Please enter a
number: ";</font></tt></b>
<br><b><tt><font color="#000099">   int n;</font></tt></b>
<br><b><tt><font color="#000099">   cin &gt;&gt; n;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; n &lt;&lt;
"! = " &lt;&lt; factorial(n) &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>
</p>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Цикъл do/while
<p>** Синтаксис:
</p>
<table border cellspacing="0" cellpadding="0" cols="1" width="100%">
<tr>
<td>
<center><table border="0" cellspacing="6" cellpadding="6">
<tr>
<td><b><tt><font color="#990000"><font size="+1">do</font></font></tt></b></td>

<td><b><tt><font color="#990000"><font size="+1">&lt;оператор&gt;;</font></font></tt></b></td>

<td><b><tt><font color="#990000"><font size="+1">while</font></font></tt></b></td>

<td><b><tt><font color="#990000"><font size="+1">(&lt;условие&gt;);</font></font></tt></b></td>
</tr>
</table></center>
</td>
</tr>
</table>

<p>** Алгоритъм на Херон за намиране на квадратен корен.
<br>    Търси се квадратен корен от положителното число
<i>a</i>.
Строи се редицата:
<br><i> x</i><sub>0</sub><i> = a, </i> <i>x<sub>n</sub></i><sub>+1</sub>
= (<i>x<sub>n</sub></i> + <i>a</i>/<i>x<sub>n</sub></i>)/2
<br>която е сходяща с граница точно търсеното число. Организира се цикъл
за пресмятане членовете на редицата и  когато разликата между два
съседни члена на редицата стане достатъчно близо до 0, т.е. |<i>x<sub>n</sub></i><sub>+1</sub><tt>-</tt><i>x<sub>n</sub></i>|
&lt; <i>eps</i>, пресмятанията се прекратяват.
<br><b><tt><font color="#000099">// sqroot.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cmath&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">bool not_equal(double x, double y)</font></tt></b>
<br><b><tt><font color="#000066">/* </font><font color="#3333FF">ЦЕЛ:     
сравнява две числа с плаваща точка</font></tt></b>
<br><b><tt><font color="#3333FF">   ПОЛУЧАВА: x,y - числа</font></tt></b>
<br><b><tt><font color="#3333FF">   ВРЪЩА:   
true ако x не е достатъчно близо до y</font></tt></b>
<br><b><tt><font color="#000066">*/</font></tt></b>
<br><b><tt><font color="#000099">{  const double EPSILON = 1E-14;</font></tt></b>
<br><b><tt><font color="#000099">   double dmax = fabs(x);</font></tt></b>
<br><b><tt><font color="#000099">   if (fabs(y) &gt; dmax) dmax
= fabs(y);</font></tt></b>
<br><b><tt><font color="#000099">   return fabs(x - y) &gt; dmax*EPSILON;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">double squareroot(double a)</font></tt></b>
<br><b><tt><font color="#000066">/* </font><font color="#3333FF">ЦЕЛ:     
пресмята квадратен корен по формулата на Херон</font></tt></b>
<br><b><tt><font color="#3333FF">   ПОЛУЧАВА: a - положително
число</font></tt></b>
<br><b><tt><font color="#3333FF">   ВРЪЩА:   
квадратен корен от a</font></tt></b>
<br><b><tt><font color="#000066">*/</font></tt></b>
<br><b><tt><font color="#000099">{  if (a == 0) return 0;</font></tt></b>
<br><b><tt><font color="#000099">   double xnew = a;</font></tt></b>
<br><b><tt><font color="#000099">   double xold;</font></tt></b>
<br><b><tt><font color="#000099">   do</font></tt></b>
<br><b><tt><font color="#000099">   {  xold = xnew;</font></tt></b>
<br><b><tt><font color="#000099">      xnew =
(xold + a/xold)/2;</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   while (not_equal(xnew, xold));</font></tt></b>
<br><b><tt><font color="#000099">   return xnew;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  cout &lt;&lt; "Please enter a
number: ";</font></tt></b>
<br><b><tt><font color="#000099">   double x;</font></tt></b>
<br><b><tt><font color="#000099">   cin &gt;&gt; x;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "The square
root is " &lt;&lt; squareroot(x) &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td>
<b><tt><font color="#660000">Please enter a number: 2</font></tt></b>
<br><b><tt><font color="#660000">The square root is 1.41421</font></tt></b>
</td>
</tr>
</table>

<p><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Безкрайни цикли
<br>    Примери:
<br><b><tt><font color="#006600">    for (i=1; i&gt;0; i++)
cout &lt;&lt; i;</font></tt></b>
<br><b><tt><font color="#006600">    while (true) cout &lt;&lt;
"no end";</font></tt></b>
<br>    Смислено използване на безкраен цикъл: в тялото
на цикъла се намира изхода от цикъла, най-често оператор <b><tt>return</tt></b>,
който прекратява изпълнението на функцията.
<br><b><tt><font color="#006600">    double squareroot(double
a)</font></tt></b>
<br><b><tt><font color="#006600">    {</font></tt></b>
<br><b><tt><font color="#006600">     if (a == 0) return
0;</font></tt></b>
<br><b><tt><font color="#006600">     double xnew =
a;</font></tt></b>
<br><b><tt><font color="#006600">     while (true)</font></tt></b>
<br><b><tt><font color="#006600">     {</font></tt></b>
<br><b><tt><font color="#006600">      double
xold = xnew;</font></tt></b>
<br><b><tt><font color="#006600">      xnew =
(xold + a/xold)/2;</font></tt></b>
<br><b><tt><font color="#006600">      if (equal(xnew,
xold)) return xnew;</font></tt></b>
<br><b><tt><font color="#006600">     }</font></tt></b>
<br><b><tt><font color="#006600">    }</font></tt></b>
<br>
</p>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Конструкции
с цикъл.
<br>** Четене на данни.
<br>    Конструкцията <font color="#000000"><b><tt>while
(cin &gt;&gt; x)</tt></b> чете данни от входа докато не се появи грешка във входния
поток. Грешка във входния поток може да се появи когато има несъответствие
между типа на променливата <b><tt>x </tt></b>и типа на въведената стойност
или когато се въведе специален символ за край на входа (край на файла).
За операционната система DOS този символ е Ctrl Z.</font>
<br>    Програмата намира броя на думите от входния поток.
<br><b><tt><font color="#000099">// words.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;string&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000066">/* </font><font color="#3333FF">Програмата
намира броя на думите от входния поток</font><font color="#000066"> */</font></tt></b>
<br><b><tt><font color="#000099">{  int count = 0;</font></tt></b>
<br><b><tt><font color="#000099">   string word;</font></tt></b>
<br><b><tt><font color="#000099">   while (cin &gt;&gt; word) 
count++;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; count &lt;&lt;
" words.\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td>
<b><tt><font color="#006600">Here are 4 words</font></tt></b>
<br><b><tt><font color="#006600">^Z</font></tt></b>
<br><b><tt><font color="#660000">4 words.</font></tt></b>
</td>
</tr>
</table>

<p>** Пренасочване на входния и изходния потоци.
<br><b><tt><font color="#006600">    C:\my\&gt;myprog &lt;
a_cin.txt</font></tt></b>
<br>    Вместо от клавиатурата, операционната система пренасочва
входа от текстов файл, в случая това е файла <b><tt><font color="#000000">a_cin.txt.</font></tt></b>По
този начин програмата за намиране на броя на думите може намери броя на
думите в текстов файл (едно по-смислено приложение на тази програма).
<br><b><tt><font color="#006600">    C:\my\&gt;myprog &gt; a_cout.txt</font></tt></b>
<br>    Вместо на екрана, операционната система пренасочва
изхода на текстов файл, в случая това е файла <b><tt><font color="#009900">a_cout.txt.</font></tt></b>
<br>** Извеждане на таблици.
<br>    Да се отпечати таблица, която показва съдържанието
на банкова сметка с първоначален влог 10000 в края на десетата година.
Лихвата варира от 5% до 10% и се изменя със стъпка 0.5%.
<br><b><tt><font color="#000099">// baltable.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iomanip&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cmath&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">double future_value(double initial_balance, 
double p, int nyear)</font></tt></b>
<br><b><tt><font color="#000066">/*</font></tt></b>
<br><b><tt><font color="#3333FF">ЦЕЛ:      
пресмята стойността на влог със сложна лихва</font></tt></b>
<br><b><tt><font color="#3333FF">ПОЛУЧАВА:  initial_balance - начална
стойност на влога</font></tt></b>
<br><b><tt><font color="#3333FF">          
p - годишен лихвен процент</font></tt></b>
<br><b><tt><font color="#3333FF">          
nyear - броя на годините</font></tt></b>
<br><b><tt><font color="#3333FF">ЗАБЕЛЕЖКИ: лихвата се начислява всеки
месец</font></tt></b>
<br><b><tt><font color="#3333FF">*/</font></tt></b>
<br><b><tt><font color="#000099">{  double b = initial_balance*pow(1
+ p/12/100, 12*nyear);</font></tt></b>
<br><b><tt><font color="#000099">   return b;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{ cout &lt;&lt; "     
Rate   Balance\n";</font></tt></b>
<br><b><tt><font color="#000099">  double rate;</font></tt></b>
<br><b><tt><font color="#000099">  double initial_amount = 10000;</font></tt></b>
<br><b><tt><font color="#000099">  int nyear = 10;</font></tt></b>
<br><b><tt><font color="#000099">  cout &lt;&lt; fixed &lt;&lt; setprecision(2);</font></tt></b>
<br><b><tt><font color="#000099">  for (rate = 5; rate &lt;= 10; rate
= rate + 0.5)</font></tt></b>
<br><b><tt><font color="#000099">  { double balance = future_value(initial_amount,
rate, nyear);</font></tt></b>
<br><tt><font color="#000099"><b>    cout &lt;&lt; setw(10)
&lt;&lt; rate</b> <b>&lt;&lt; setw(10) &lt;&lt; balance &lt;&lt; "\n";</b></font></tt>
<br><b><tt><font color="#000099">  }</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td>
<b><tt><font color="#990000"> Rate   Balance</font></tt></b>
<br><b><tt><font color="#990000"> 5.00  16470.09</font></tt></b>
<br><b><tt><font color="#990000"> 5.50  17310.76</font></tt></b>
<br><b><tt><font color="#990000"> 6.00  18193.97</font></tt></b>
<br><b><tt><font color="#990000"> 6.50  19121.84</font></tt></b>
<br><b><tt><font color="#990000"> 7.00  20096.61</font></tt></b>
<br><b><tt><font color="#990000"> 7.50  21120.65</font></tt></b>
<br><b><tt><font color="#990000"> 8.00  22196.40</font></tt></b>
<br><b><tt><font color="#990000"> 8.50  23326.47</font></tt></b>
<br><b><tt><font color="#990000"> 9.00  24513.57</font></tt></b>
<br><b><tt><font color="#990000"> 9.50  25760.55</font></tt></b>
<br><b><tt><font color="#990000">10.00  27070.41</font></tt></b>
</td>
</tr>
</table>

<p>    Същата информация може да се изобразим графично,
като се начертае редица от точки - по една точка за всяка стойност.
<br><b><tt><font color="#000099">// balgraph.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
</p>
<p><b><tt><font color="#000099">double future_value(double initial_balance,
double p, int nyear)</font></tt></b>
<br><b><tt><font color="#000099">{  double b = initial_balance * pow(1
+ p/12/100, 12*nyear);</font></tt></b>
<br><b><tt><font color="#000099">   return b;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  double rate;</font></tt></b>
<br><b><tt><font color="#000099">   double initial_amount = 10000;</font></tt></b>
<br><b><tt><font color="#000099">   int nyear = 10;</font></tt></b>
<br><b><tt><font color="#000099">   cwin.coord(5, 3*initial_amount,
10, 0);</font></tt></b>
<br><b><tt><font color="#000099">   for (rate = 5; rate &lt;=
10; rate = rate + 0.5)</font></tt></b>
<br><b><tt><font color="#000099">   { double balance = future_value(initial_amount,
rate, nyear);</font></tt></b>
<br><b><tt><font color="#000099">     cwin &lt;&lt;
Point(rate, balance);</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>
</p>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Итеративни
алгоритми и сходимост на алгоритми.
<br>    Ако един алгоритъм генерира безкрайна редица, то
той се нарича итеративен алгоритъм. В повечето случаи редицата от точки
е сходяща и границата й е решение на задачата.
<br>    Следващата програма е нагледна илюстрация на сходимостта
на алгоритъма за намиране на квадратен корен за положителни числа. За положителни
стойности на <b><tt>a </tt></b>редицата е сходяща. За отрицателни <b><tt>a</tt></b>
може да се види поведението на получената редица - тя не е сходяща.
<br><b><tt><font color="#000099">// converge.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include "ccc_win.cpp"</font></tt></b>
<p><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  double a = cwin.get_double("Please
enter a number");</font></tt></b>
<br><b><tt><font color="#000099">   if (a == 0) return 0;</font></tt></b>
<br><b><tt><font color="#000099">   double xnew = a;</font></tt></b>
<br><b><tt><font color="#000099">   double xold;</font></tt></b>
<br><b><tt><font color="#000099">   int iteration = 0;</font></tt></b>
<br><b><tt><font color="#000099">   const int MAX_ITERATIONS
= 20;</font></tt></b>
<br><b><tt><font color="#000099">   cwin.coord(0, a, MAX_ITERATIONS,
-a);</font></tt></b>
<br><b><tt><font color="#000099">   do</font></tt></b>
<br><b><tt><font color="#000099">   {  xold = xnew;</font></tt></b>
<br><b><tt><font color="#000099">      xnew =
(xold + a / xold) / 2;</font></tt></b>
<br><b><tt><font color="#000099">      cwin &lt;&lt;
Point(iteration, xnew);</font></tt></b>
<br><b><tt><font color="#000099">      iteration++;</font></tt></b>
<br><b><tt><font color="#000099">   } while (iteration &lt; MAX_ITERATIONS);</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br>
</p>
<hr width="100%">
<br><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Генериране
на случайни събития и симулации.
<br>    Иглата на Бюфон. Игла с дължина 1 инч (2.54 см)
се пуска върху лист хартия, на който са начертани хоризонтални линии, намиращи
се на разстояние 2 инча една от друга. Ако иглата падне върху такава линия,
казваме, че имаме попадение. Хипотезата на Бюфон е, че отношението на броя
на всички опити към броя на попаденията клони към числото <font face="Symbol"><font size="+1">p.</font></font>
<br><b><tt><font color="#000099">// buffon.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cstdlib&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cmath&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;ctime&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
<p><b><tt><font color="#000099">void rand_seed()</font></tt></b>
<br><b><tt><font color="#3333FF">/* ЦЕЛ: Инициализира генератора за случайни
числа</font></tt></b>
<br><b><tt><font color="#3333FF">*/</font></tt></b>
<br><b><tt><font color="#000099">{  int seed = static_cast&lt;int&gt;(time(0));</font></tt></b>
<br><b><tt><font color="#000099">   srand(seed);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">double rand_double(double a, double b)</font></tt></b>
<br><b><tt><font color="#3333FF">/* ЦЕЛ:  намира случайно число в
интервала [a, b]</font></tt></b>
<br><b><tt><font color="#3333FF">   ПОЛУЧАВА: границите на интервала</font></tt></b>
<br><b><tt><font color="#3333FF">   ВРЪЩА: случайно число x,
a &lt;= x и x &lt;= b</font></tt></b>
<br><b><tt><font color="#3333FF">*/</font></tt></b>
<br><b><tt><font color="#000099">{  return a + (b - a)*rand()*(1.0/RAND_MAX);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">double deg2rad(double alpha)</font></tt></b>
<br><b><tt><font color="#3333FF">/* ЦЕЛ:  превръща градуси в радиани</font></tt></b>
<br><b><tt><font color="#3333FF">   ПОЛУЧАВА: alpha - големина
на ъгъл в градуси</font></tt></b>
<br><b><tt><font color="#3333FF">   ВРЪЩА:  големината на
ъгъла в радиани</font></tt></b>
<br><b><tt><font color="#3333FF">*/</font></tt></b>
<br><b><tt><font color="#000099">{  const double PI = 3.141592653589793;</font></tt></b>
<br><b><tt><font color="#000099">   return alpha * PI / 180;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{  int NTRIES = 10000;</font></tt></b>
<br><b><tt><font color="#000099">   int i;</font></tt></b>
<br><b><tt><font color="#000099">   int hits = 0;</font></tt></b>
<br><b><tt><font color="#000099">   rand_seed();</font></tt></b>
<br><b><tt><font color="#000099">   for (i = 1; i &lt;= NTRIES;
i++)</font></tt></b>
<br><b><tt><font color="#000099">   {  double ylow = rand_double(0,
2);</font></tt></b>
<br><b><tt><font color="#000099">      double
angle = rand_double(0, 180);</font></tt></b>
<br><b><tt><font color="#000099">      double
yhigh = ylow + sin(deg2rad(angle));</font></tt></b>
<br><b><tt><font color="#000099">      if (yhigh
&gt;= 2) hits++;</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "Tries / Hits
= " &lt;&lt; NTRIES*(1.0/hits) &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099">   return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td><b><tt><font color="#660000">Tries / Hits = 3.18471</font></tt></b></td>
</tr>
</table>

<p><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Вложени цикли.
<br>      Да се отпечати таблица, която показва
натрупаната сума по влог от 10000 лв. за 5, 10, 15, и 20 години при годишна
лихва от 5 до 10% (през 0.5%).
<br><b><tt><font color="#000099">// table.cpp</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;iomanip&gt;</font></tt></b>
<br><b><tt><font color="#000099">#include &lt;cmath&gt;</font></tt></b>
<br><b><tt><font color="#000099">using namespace std;</font></tt></b>
</p>
<p><b><tt><font color="#000099">double future_value(double init_balance,
double p, int n)</font></tt></b>
<br><b><tt><font color="#000099">{ return init_balance*pow(1 + p/12/100,
12*n);</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
<br><b><tt><font color="#000099">int main()</font></tt></b>
<br><b><tt><font color="#000099">{</font></tt></b>
<br><b><tt><font color="#000099"> const double RATE_MIN = 5;</font></tt></b>
<br><b><tt><font color="#000099"> const double RATE_MAX = 10;</font></tt></b>
<br><b><tt><font color="#000099"> const double RATE_INCR = 0.5;</font></tt></b>
<br><b><tt><font color="#000099"> const int YEAR_MIN = 5;</font></tt></b>
<br><b><tt><font color="#000099"> const int YEAR_MAX = 20;</font></tt></b>
<br><b><tt><font color="#000099"> const int YEAR_INCR = 5;</font></tt></b>
<br><b><tt><font color="#000099"></font></tt></b> <b><tt><font color="#000099"></font></tt></b>
</p>
<p><b><tt><font color="#000066">/* </font><font color="#3333FF">отпечатва
заглавната част на таблицата </font><font color="#000066">*/</font></tt></b>
<br><b><tt><font color="#000099"> cout &lt;&lt; " Rate  ";</font></tt></b>
<br><b><tt><font color="#000099"> int year;</font></tt></b>
<br><b><tt><font color="#000099"> for (year=YEAR_MIN; year&lt;=YEAR_MAX;
year=year+YEAR_INCR)</font></tt></b>
<br><b><tt><font color="#000099">     cout &lt;&lt;
setw(2) &lt;&lt; year &lt;&lt; " years  ";</font></tt></b>
<br><b><tt><font color="#000099"> cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099"> cout &lt;&lt; fixed &lt;&lt; setprecision(2);</font></tt></b>
<br><b><tt><font color="#000099"> double rate;</font></tt></b>
<br><b><tt><font color="#000099"> double init_bal = 10000;</font></tt></b>
<br><b><tt><font color="#000099"> for (rate=RATE_MIN; rate&lt;=RATE_MAX;
rate=rate+RATE_INCR)</font></tt></b>
<br><b><tt><font color="#000066">/* </font><font color="#3333FF">отпечатва
ред от таблицата</font><font color="#000066"> */</font></tt></b>
<br><b><tt><font color="#000099"> { int year;</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; setw(5) &lt;&lt;
rate;</font></tt></b>
<br><b><tt><font color="#000099">   for (year=YEAR_MIN; year&lt;=YEAR_MAX;
year=year+YEAR_INCR)</font></tt></b>
<br><b><tt><font color="#000099">   { double balance = future_value(init_bal,
rate, year);</font></tt></b>
<br><b><tt><font color="#000099">     cout &lt;&lt;
setw(10) &lt;&lt; balance;</font></tt></b>
<br><b><tt><font color="#000099">   }</font></tt></b>
<br><b><tt><font color="#000099">   cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#000099"> }</font></tt></b>
<br><b><tt><font color="#000099"> return 0;</font></tt></b>
<br><b><tt><font color="#000099">}</font></tt></b>
</p>
<table border cellpadding="4" width="100%">
<tr>
<td> <b><tt><font color="#990000">Rate   5 years  10
years  15 years  20 years </font></tt></b>
<br><b><tt><font color="#990000">  5.0  12833.59  16470.09 
21137.04  27126.40</font></tt></b>
<br><b><tt><font color="#990000">  5.5  13157.04  17310.76 
22775.84  29966.26</font></tt></b>
<br><b><tt><font color="#990000">  6.0  13488.50  18193.97 
24540.94  33102.04</font></tt></b>
<br><b><tt><font color="#990000">  6.5  13828.17  19121.84 
26442.01  36564.47</font></tt></b>
<br><b><tt><font color="#990000">  7.0  14176.25  20096.61 
28489.47  40387.39</font></tt></b>
<br><b><tt><font color="#990000">  7.5  14532.94  21120.65 
30694.52  44608.17</font></tt></b>
<br><b><tt><font color="#990000">  8.0  14898.46  22196.40 
33069.21  49268.03</font></tt></b>
<br><b><tt><font color="#990000">  8.5  15273.01  23326.47 
35626.53  54412.43</font></tt></b>
<br><b><tt><font color="#990000">  9.0  15656.81  24513.57 
38380.43  60091.52</font></tt></b>
<br><b><tt><font color="#990000">  9.5  16050.09  25760.55 
41345.93  66360.61</font></tt></b>
<br><b><tt><font color="#990000"> 10.0  16453.09  27070.41 
44539.20  73280.74</font></tt></b>
</td>
</tr>
</table>

<p><img src="bullet.gif" height="18" width="20" align="TEXTTOP"> Област на действие
на променлива.
<br>     Всяка променлива се разпознава само вътре
в блока, в който е дефинирана. Променливата, дефинирана в оператор <b><tt>for</tt></b>
се разпознава до края на блока на оператора <b><tt>for</tt></b>. В следващия
пример са използвани съкращенията НОД<font color="#000000">П - начало на
областта на действие на променливата и КОДП - край на областта на действие
на променливата.</font>
<br><font color="#000000"></font> 
<br><font color="#000000"></font> <font color="#000000"></font>
</p>
<p><b><tt><font color="#006600">int main()</font></tt></b>
<br><b><tt><font color="#006600">{</font></tt></b>
<br><b><tt><font color="#006600"> cout &lt;&lt; "Minimal interest
rate in percent: ";</font></tt></b>
<br><b><tt><font color="#006600"> double rmin;                              
/* НОДП rmin */</font></tt></b>
<br><b><tt><font color="#006600"> cin &gt;&gt; rmin;</font></tt></b>
<br><b><tt><font color="#006600"> double init = 10000;                      
/* НОДП init */</font></tt></b>
<br><b><tt><font color="#006600"> for (int r=rmin; r&lt;=rmin+5; r++)          
/* НОДП r */</font></tt></b>
<br><b><tt><font color="#006600"> { cout &lt;&lt; setw(5) &lt;&lt;
r;</font></tt></b>
<br><b><tt><font color="#006600">   for (int year=2; year&lt;=10;
year+=2)      /* НОДП year */</font></tt></b>
<br><b><tt><font color="#006600">   { double bal = future_value(init,r,year);/*
НОДП bal */</font></tt></b>
<br><b><tt><font color="#006600">     cout &lt;&lt;
setw(10) &lt;&lt; bal;</font></tt></b>
<br><b><tt><font color="#006600">   }                               
/* КОДП year и bal */</font></tt></b>
<br><b><tt><font color="#006600">   cout &lt;&lt; "\n";</font></tt></b>
<br><b><tt><font color="#006600"> }                                 
/* КОДП r */</font></tt></b>
<br><b><tt><font color="#006600"> return 0;</font></tt></b>
<br><b><tt><font color="#006600">}                                  
/* КОДП rmin и init */</font></tt></b>
<br>
</p>
<hr width="100%">
</body>
</html>
