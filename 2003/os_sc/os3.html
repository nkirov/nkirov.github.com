<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <meta name="Author" content="Nikolay Kirov">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U) [Netscape]">
   <title>os3</title>
</head>
<body>

<h2>
Операционни системи</h2>

<h3>
3 (3). Описание и управление на процеси</h3>
* ОС трябва да организира изпълнението на няколко процеса (multiprogramming),
за да максимизира използването на процесора, докато осигурява разумно време
за отговор (multiuser).
<br>* ОС трябва да разпределя ресурси на процесите в съответствие със специфичните
им изисквания и приоритети, като в същото време избягва "мъртва хватка".
<br>* ОС поддържа връзките между процесите и създаването на процеси от
потребителите.
<p><b>3.1 Състояния на процеси</b>
<br>&nbsp;&nbsp;&nbsp; Процесорът изпълнява машинни инструкции, съхраняващи
се в ОП. Списъкът на инструкциите на един процес се нарича следа на процеса.
<br>&nbsp;&nbsp;&nbsp; Пример:
<center><img SRC="03-01.gif" height=584 width=485></center>

<hr WIDTH="100%">
<center>
<p><img SRC="03-02.gif" height=413 width=548>
<p><img SRC="03-03.gif" height=711 width=503></center>

<hr WIDTH="100%">
<p>** Модел с 2 състояния:
<br>-- изпълнение (running);
<br>-- неизпълнение (nonrunning).
<center><img SRC="03-04.gif" height=530 width=568></center>
** Създаване на процеси.
<br>&nbsp;&nbsp;&nbsp; Причини за създаване на процес:
<br>- ново пакетно задание (new batch job) - с команди на ОС;
<br>- диалогов login - потребител влиза в системата;
<br>- създаден от ОС за осигуряване на услуга - във връзка с потребителска
програма, без да чака потребителят;
<br>- породен от съществуващ процес (parent and child processes).
<p>** Унищожаване на процеси.
<br>&nbsp;&nbsp;&nbsp; Причини за унищожаване на процес:
<br>- нормално завършване;
<br>- превишаване на максималната време;
<br>- няма памет;
<br>- нарушаване на границите на паметта;
<br>- грешка от защита;
<br>- аритметична грешка;
<br>- превишаване на времето за чакане на събитие;
<br>- входно-изходна грешка;
<br>- невалидна инструкция;
<br>- инструкция, изпълнявана само от ОС;
<br>- неправилна работа с данни;
<br>- намеса на оператор или ОС;
<br>- завършване на родителски процес;
<br>- по заявка на родителски процес.
<p>** Модел с 5 състояния.
<br>&nbsp;&nbsp;&nbsp; Състоянията са:
<br>&nbsp;&nbsp; 1. Running - изпълнение;
<br>&nbsp;&nbsp; 2. Ready&nbsp;&nbsp; - готов;
<br>&nbsp;&nbsp; 3. Blocked- блокиран (чака събитие);
<br>&nbsp;&nbsp; 4. New&nbsp;&nbsp;&nbsp;&nbsp; - нов;
<br>&nbsp;&nbsp; 5. Exit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - прекратен;
<br>&nbsp;&nbsp;&nbsp; Преходи между различните състояния:
<center><img SRC="03-05.gif" height=376 width=693></center>

<hr WIDTH="100%">
<center><img SRC="03-06.gif" height=434 width=736></center>

<hr WIDTH="100%">
<center><img SRC="03-07.gif" height=717 width=527></center>

<hr WIDTH="100%">
<br>** Преустановени процеси (suspended processes).
<br>&nbsp;&nbsp;&nbsp; Необходимостта от размяна (swapping).
<br>&nbsp;&nbsp;&nbsp; Нови състояния на процесите:
<br>&nbsp;3. Blocked, suspend
<br>&nbsp;4. Ready, suspend
<br>&nbsp;&nbsp;&nbsp; Преходи между различните състояния:
<br>&nbsp;
<br>&nbsp;
<br>
<br>
<center>
<p><img SRC="03-08.gif" height=667 width=558></center>

<p>&nbsp;&nbsp;&nbsp; Обобщени характеристики на преустановени процеси:
<br>&nbsp;&nbsp; 1. Процесът не е готов за непосредствено изпълнение.
<br>&nbsp;&nbsp; 2. Независимост от блокировка.
<br>&nbsp;&nbsp; 3. Поставяне в това състояние с цел недопускане до изпълнение.
<br>&nbsp;&nbsp; 4. Смяна на това състояние става само с "нарочна заповед".
<br>&nbsp;&nbsp;&nbsp; Причини за преустановяване на процес:
<br>- размяна;
<br>- друга причина за ОС;
<br>- диалогово искане на потребителя;
<br>- по време, ако се изпълнява периодично;
<br>- искане на родителя.
<br>
<hr WIDTH="100%">
<br><b>3.2 Описание на процеси</b><b></b>
<center>
<p><img SRC="03-09.gif" height=375 width=760></center>

<p>** Структури на ОС&nbsp; за управление на процеси.
<br>-- таблици на паметта за:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ОП - оперативна памет (main memory)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ВП - виртуална памет (virtual
memory)
<br>-- I/O таблици;
<br>-- таблици за файлове;
<br>-- таблици на процеси.
<center><img SRC="03-10.gif" height=566 width=633></center>

<p>** Структури за управление на процеси
<br>-- разполагане на процесите (process location).
<br>&nbsp;&nbsp; Типични елементи на изображение на процеса (process image):
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User Data
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User Program
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System Stack
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Process Control Block (PCB)
<br>-- атрибути на процесите.
<br>&nbsp;&nbsp; Типични елементи на контролния блок на процес (PCB):
<br><img SRC="03-12.gif" height=553 width=715>
<br>
<hr WIDTH="100%">
<br><b>3.3 Управление на процеси</b>
<br>** Режими на изпълнение (modes of execution).
<br>Функции на ядрото:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - организация на процесите;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - организация на паметта;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - органицация на входа и изхода;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - поддържащи функции.
<br>** Създаване на процеси.
<br>Дейности на ОС за създаване на процес:
<br>&nbsp;&nbsp;&nbsp;&nbsp; 1. Създаване на идентификатор на процеса и
записването му в таблицата на процесите (primary process table).
<br>&nbsp;&nbsp;&nbsp;&nbsp; 2. Отделяне на памет за процеса.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 3. Инициализация на контролния блок.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 4. Създаване на необходимите връзки.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 5. Други структури от данни.
<br>** Превключване на процеси.
<br>-- Кога ? - прекъсване на часовника; - I/O прекъсване; - недостатъчно
памет;
<br>-- Превключване на режими: ядро-потребител;
<br>-- Промяна на състоянията на процесите.
<br>&nbsp;&nbsp;&nbsp; Действия на ОС при превключване на процеси:
<br>&nbsp;&nbsp;&nbsp;&nbsp; 1. Запазване на контекста на процеса, който
ще се прекъсва.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 2. Обновяване на PCB.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 3. Преместване на PCB в съответната опашка.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 4. Избиране на друг процес за изпълнение.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 5. Обновяване на PCB на избрания процес.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 6. Обновяване на паметта с новите данни.
<br>&nbsp;&nbsp;&nbsp;&nbsp; 7. Възстановяване на състоянието на процесора
във вида при предишното прекъсване на процеса.
<br>** Изпълнение на ОС:
<br>-- ядро, което не е процес;
<br>-- изпълнение в потребителски процеси;
<br>-- базирана на процеси ОС.
<br>&nbsp;
<table CELLPADDING=4 COLS=2 WIDTH="100%" >
<tr>
<td VALIGN=BOTTOM><img SRC="03-14.gif" height=590 width=445></td>

<td><img SRC="03-15.gif" height=625 width=385></td>
</tr>
</table>

<hr WIDTH="100%">
</body>
</html>
