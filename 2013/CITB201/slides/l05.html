<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;
      charset=windows-1251">
    <meta name="Author" content="Nikolay Kirov">
    <meta name="GENERATOR" content="Mozilla/4.8 [en] (Win95; U)
      [Netscape]">
    <title>l05</title>
  </head>
  <body>
    <center>
      <h3> <b>5. Наследяване</b></h3>
    </center>
    <div align="right"><br>
    </div>
    <img alt="" src="../b5.gif" height="18" width="20"> Производни
    класове. <br>
    &nbsp;&nbsp;&nbsp; Наследяването е механизъм за разширяване на вече
    съществуващи класове. Новият клас наследява съществуващия, като в
    него се добавят нови членове-функции и полета с данни. <br>
    &nbsp;&nbsp;&nbsp; Базов клас: <br>
    <b><tt><font color="#006600">class Employee {</font></tt></b> <br>
    <b><tt><font color="#006600">public:</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; Employee(string emp_name,
          double init_salary);</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; void set_salary(double
          new_salary);</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; string get_name() const;</font></tt></b>
    <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; double get_salary() const;</font></tt></b>
    <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; void print() const;</font></tt></b>
    <br>
    <b><tt><font color="#006600">private:</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; string name;</font></tt></b>
    <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; double salary;</font></tt></b>
    <br>
    <b><tt><font color="#006600">};</font></tt></b> <br>
    <font color="#000000">&nbsp;&nbsp;&nbsp; Производен клас:</font> <br>
    <b><tt><font color="#006600">class Manager : public Employee {</font></tt></b>
    <br>
    <b><tt><font color="#006600">public:</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; Manager(string n, double
          sal, string dept);</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; string get_department()
          const;</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; void print() const;</font></tt></b>
    <br>
    <b><tt><font color="#006600">private:</font></tt></b> <br>
    <b><tt><font color="#006600">&nbsp;&nbsp; string department;</font></tt></b>
    <br>
    <b><tt><font color="#006600">};</font></tt></b> <br>
    <font color="#000000">&nbsp;&nbsp;&nbsp; Конструиране на обект от
      производния клас:</font> <br>
    <b><tt><font color="#009900">Manager man("Nino", 670, "Computer
          Science");</font></tt></b> <br>
    <font color="#000000">&nbsp;&nbsp;&nbsp; Извикване на член-функция
      от производния клас:</font> <br>
    <b><tt><font color="#009900">man.set_salary(1200);</font></tt></b> <br>
    <font color="#000000">&nbsp;&nbsp;&nbsp; Извикване на член-функция
      от базовия клас:</font> <br>
    <b><tt><font color="#009900">cout &lt;&lt; man.get_department();</font></tt></b>
    <br>
    &nbsp;&nbsp;&nbsp; Данните в <font color="#000000">производния
      клас:</font>
    <table cols="2" width="100%">
      <tbody>
        <tr>
          <td>
            <center><b><tt><font color="#009900">Manager</font></tt></b></center>
            <center>
              <table border="" cellspacing="0">
                <tbody>
                  <tr>
                    <td>
                      <center><b><tt>Employee</tt></b></center>
                      <center>
                        <table border="" cellpadding="4" cellspacing="0">
                          <tbody>
                            <tr>
                              <td><b><tt>string name;</tt></b> <br>
                                <b><tt>double salary;</tt></b></td>
                            </tr>
                          </tbody>
                        </table>
                      </center>
                      <p><b><tt><font color="#3333FF">string department;</font></tt></b></p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </center>
          </td>
          <td>
            <center><b><tt><font color="#009900">man</font></tt></b></center>
            <center>
              <table border="" cellspacing="0">
                <tbody>
                  <tr>
                    <td>
                      <center><b><tt>Employee</tt></b></center>
                      <center>
                        <table border="" cellpadding="4" cellspacing="0">
                          <tbody>
                            <tr>
                              <td><b><tt><font color="#009900">"Nino"</font></tt></b>
                                <br>
                                <b><tt><font color="#009900">670</font></tt></b></td>
                            </tr>
                          </tbody>
                        </table>
                      </center>
                      <p><b><tt><font color="#009900">"Computer Science"</font></tt></b></p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </center>
          </td>
        </tr>
      </tbody>
    </table>
    <p><b><tt><font color="#006600">Employee</font></tt></b> - базов
      клас, <tt><font color="#006600"><b>Mana</b>ge</font>r </tt>-
      производен клас <br>
      - членовете на базовият клас са членове и на производния клас; <br>
      - функциите на производният клас нямат достъп&nbsp; до частните
      членове на базовия клас <br>
    </p>
    <hr width="100%">
    <p><img alt="" src="../b5.gif" height="18" width="20"> Дефиниции на
      функции от производния клас. <br>
      &nbsp;&nbsp;&nbsp; Конструкторът на производния клас има две
      задачи: <br>
      - да инициализира полетата с данни; <br>
      - да инициализира обекта от базовия клас, който се&nbsp; съдържа в
      производния клас.. <br>
      <b><tt><font color="#009900">&nbsp; Manager::Manager(string n,
            double sal, string dept)</font></tt></b> <br>
      <b><tt><font color="#009900">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
:



            Employee(n, sal)</font></tt></b> <br>
      <b><tt><font color="#009900">&nbsp; { department = dept;&nbsp; }</font></tt></b>
    </p>
    <p>&nbsp;&nbsp;&nbsp; Ако в базовия и в производния класове има
      функции с едно и също име, то викането на член-функция на базовия
      клас от функция на производния клас става с помощта на операция
      "принадлежност към клас" -<b><tt> ::</tt></b> <br>
      <b><tt><font color="#009900">&nbsp; void&nbsp; Manager::print()</font></tt></b>
      <br>
      <b><tt><font color="#009900">&nbsp; { Employee::print();</font></tt></b>
      <br>
      <b><tt><font color="#009900">&nbsp;&nbsp;&nbsp; cout &lt;&lt;
            department; }</font></tt></b> <br>
    </p>
    <hr width="100%"> <br>
    <b>Пример.</b>&nbsp; Да се изобразят няколко часовника, които
    показват часа в различни градове по света.<br>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><tt><tt><b><font color="#000080"> // <a href="../../NETB151/sources/ch11/clocks1.cpp">clock1.cpp</a></font></b></tt> <b><font color="#000080"><br> #include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
 <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iomanip&gt;</font>
<b><font color="#000080"> #include</font></b> <font color="#ff0000">&lt;string&gt;</font>
 <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
 
 <b><font color="#000080">#include</font></b> <font color="#ff0000">"ccc_time.h"</font>
 
 <b><font color="#0000ff">class</font></b> Clock <font color="#ff0000">{</font>
 <b><font color="#0000ff">public</font></b><font color="#990000">:</font>
<i><font color="#9a1900">/**</font></i>
<i><font color="#9a1900"> Constructs a clock that can tell the local time.</font></i>
<i><font color="#9a1900"> @param use_military true if the clock uses military format (21:05) and <br>                         flase if the clock uses "am/pm" format (9:05 pm)</font></i>
<i><font color="#9a1900">*/</font></i>
    <b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font><font color="#990000">;</font>
<i><font color="#9a1900">/**</font></i>
<i><font color="#9a1900"> Gets the location of this clock.</font></i>
<i><font color="#9a1900"> @return the location</font></i>
<i><font color="#9a1900">*/</font></i>
    string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
<i><font color="#9a1900">/**</font></i>
<i><font color="#9a1900"> Gets the hours of this clock.</font></i>
<i><font color="#9a1900"> @return the hours, in military or am/pm format</font></i>
<i><font color="#9a1900">*/</font></i>
    <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
<i><font color="#9a1900">/**</font></i>
<i><font color="#9a1900"> Gets the minutes of this clock.</font></i>
<i><font color="#9a1900"> @return the minutes</font></i>
<i><font color="#9a1900">*/</font></i>
    <font color="#009900">int</font> <b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
<i><font color="#9a1900">/**</font></i>
<i><font color="#9a1900"> Checks whether this clock uses miltary format.</font></i>
<i><font color="#9a1900"> @return true if miltary format</font></i>
<i><font color="#9a1900">*/</font></i>
    <font color="#009900">bool</font> <b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
 <b><font color="#0000ff">private</font></b><font color="#990000">:</font>
    <font color="#009900">bool</font> military<font color="#990000">;</font>
 <font color="#ff0000">}</font><font color="#990000">;</font>
 
 Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font>
 <font color="#ff0000">{</font> military <font color="#990000">=</font> use_military<font color="#990000">;</font>  <font color="#ff0000">}</font>
 
 string Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font> <b><font color="#0000ff">return</font></b> <font color="#ff0000">"Local"</font><font color="#990000">;  </font><font color="#ff0000">}</font>
 
 <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font> Time now<font color="#990000">;</font>
   <font color="#009900">int</font> hours <font color="#990000">=</font> now<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
   <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>military<font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font>
   <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font>
   <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">&gt;</font> <font color="#993399">12</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours <font color="#990000">-</font> <font color="#993399">12</font><font color="#990000">;</font>
   <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font>
 <font color="#ff0000">}</font>
 
 <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font> Time now<font color="#990000">;</font>
   <b><font color="#0000ff">return</font></b> now<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
 <font color="#ff0000">}</font>
 
 <font color="#009900">bool</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font> <b><font color="#0000ff">return</font></b> military<font color="#990000">;</font> <font color="#ff0000">}</font>
 
 <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
 <font color="#ff0000">{</font> Clock <b><font color="#000000">clock1</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">)</font><font color="#990000">;</font>
   Clock <b><font color="#000000">clock2</font></b><font color="#990000">(</font><b><font color="#0000ff">false</font></b><font color="#990000">)</font><font color="#990000">;</font>
 
   <font color="#009900">bool</font> more <font color="#990000">=</font> <b><font color="#0000ff">true</font></b><font color="#990000">;</font>
   <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>more<font color="#990000">)</font>
   <font color="#ff0000">{</font> cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Military time: "</font>
          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock1<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font>
          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> <br>          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock1<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <br>          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
     cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"am/pm time: "</font>
          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock2<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font>
          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> <br>          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock2<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <br>          <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
 
     cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Try again? (y/n) "</font><font color="#990000">;</font>
     string input<font color="#990000">;</font>
     <b><font color="#000000">getline</font></b><font color="#990000">(</font>cin<font color="#990000">,</font> input<font color="#990000">)</font><font color="#990000">;</font>
     <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>input <font color="#990000">!</font><font color="#990000">=</font> <font color="#ff0000">"y"</font><font color="#990000">)</font> more <font color="#990000">=</font> <b><font color="#0000ff">false</font></b><font color="#990000">;</font>
   <font color="#ff0000">}</font>
   <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
 <font color="#ff0000">}</font>
</tt></pre>
    <img alt="" src="../../NETB151/slides/ch11/images/datalayout.png"
      height="223" width="740"><br>
    <br>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><tt> <b><font color="#000080">// <a href="../../NETB151/sources/ch11/clocks2.cpp">clock2.cpp</a><br> #include</font></b> <font color="#ff0000">&lt;iostream&gt;</font><br> <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iomanip&gt;</font><br> <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;string&gt;</font><br> <b><font color="#0000ff">using</font> <font color="#0000ff">namespace</font></b> std<font color="#990000">;</font><br> <b><font color="#000080">#include</font></b> <font color="#ff0000">"ccc_time.h"</font><br> <br> <b><font color="#0000ff">class</font></b> Clock <font color="#ff0000">{</font><br> <b><font color="#0000ff">public</font></b><font color="#990000">:</font><br>    <b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font><font color="#990000">;</font> <br>    string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font><br>    <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font><br>    <font color="#009900">int</font> <b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font><br>    <font color="#009900">bool</font> <b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font><br> <b><font color="#0000ff">private</font></b><font color="#990000">:</font><br>    <font color="#009900">bool</font> military<font color="#990000">;</font><br> <font color="#ff0000">}</font><font color="#990000">;</font><br> <br> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font><br> <font color="#ff0000">{</font> military <font color="#990000">=</font> use_military<font color="#990000">;</font> <font color="#ff0000">}</font><br> <br> string Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><br> <font color="#ff0000">{</font> <b><font color="#0000ff">return</font></b> <font color="#ff0000">"Local"</font><font color="#990000">;</font> <font color="#ff0000">}</font><br> <br> <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><br> <font color="#ff0000">{</font> Time now<font color="#990000">;</font><br>   <font color="#009900">int</font> hours <font color="#990000">=</font> now<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font><br>   <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>military<font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font><br>   <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font><br>   <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">&gt;</font> <font color="#993399">12</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours <font color="#990000">-</font> <font color="#993399">12</font><font color="#990000">;</font><br>   <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font><br> <font color="#ff0000">}</font><br> <br> <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><br> <font color="#ff0000">{</font> Time now<font color="#990000">;</font><br>   <b><font color="#0000ff">return</font></b> now<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font><br> <font color="#ff0000">}</font><br> <br> <font color="#009900">bool</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><br> <font color="#ff0000">{</font> <b><font color="#0000ff">return</font></b> military<font color="#990000">;</font>  <font color="#ff0000">}</font><br> <br> <b><font color="#0000ff">class</font></b> TravelClock <font color="#990000">:</font> <b><font color="#0000ff">public</font></b> Clock <font color="#ff0000">{<br></font> <b><font color="#0000ff">public</font></b><font color="#990000">:</font><br> <i><font color="#9a1900">/**</font></i><br><i><font color="#9a1900">   Constructs a travel clock that can tell the time</font></i><br><i><font color="#9a1900">    at a specified location</font></i><br><i><font color="#9a1900">   @param mil true if the clock uses military format</font></i><br><i><font color="#9a1900">   @param loc the location</font></i><br><i><font color="#9a1900">   @param diff the time difference from the local time</font></i><br><i><font color="#9a1900"> */</font></i><br>    <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><font color="#009900">bool</font> mil<font color="#990000">,</font> string loc<font color="#990000">,</font> <font color="#009900">int</font> diff<font color="#990000">)</font><font color="#990000">;</font><br>    string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font><br>    <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font><br> <b><font color="#0000ff">private</font></b><font color="#990000">:</font><br>    string location<font color="#990000">;</font><br>   <font color="#009900">int</font> time_difference<font color="#990000">;</font><br><font color="#ff0000"> }</font><font color="#990000">;</font><br> <br> TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><font color="#009900">bool</font> mil<font color="#990000">,</font> string loc<font color="#990000">,</font> <font color="#009900">int</font> diff<font color="#990000">)</font><br>    <font color="#990000">:</font> <b><font color="#000000">Clock</font></b><font color="#990000">(</font>mil<font color="#990000">)</font><br> <font color="#ff0000">{</font> location <font color="#990000">=</font> loc<font color="#990000">;</font><br>   time_difference <font color="#990000">=</font> diff<font color="#990000">;</font><br>   <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>time_difference <font color="#990000">&lt;</font> <font color="#993399">0</font><font color="#990000">)</font> <br>       time_difference <font color="#990000">=</font> time_difference <font color="#990000">+</font> <font color="#993399">24</font><font color="#990000">;</font><br> <font color="#ff0000">}</font><br> <br> string TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><br><font color="#ff0000"> {</font> <b><font color="#0000ff">return</font></b> location<font color="#990000">;</font> <font color="#ff0000">}</font><br> <br> <font color="#009900">int</font> TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><br> <font color="#ff0000">{</font> <font color="#009900">int</font> h <font color="#990000">=</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font><br>   <b><font color="#0000ff">if</font></b> <font color="#990000">(</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><br>       <b><font color="#0000ff">return</font></b> <font color="#990000">(</font>h <font color="#990000">+</font> time_difference<font color="#990000">)</font> <font color="#990000">%</font> <font color="#993399">24</font><font color="#990000">;</font><br>   <b><font color="#0000ff">else</font></b><br>   <font color="#ff0000">{</font>  h <font color="#990000">=</font> <font color="#990000">(</font>h <font color="#990000">+</font> time_difference<font color="#990000">)</font> <font color="#990000">%</font> <font color="#993399">12</font><font color="#990000">;</font><br>      <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>h <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font><br>      <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">return</font></b> h<font color="#990000">;</font><br>   <font color="#ff0000">}</font><br> <font color="#ff0000">}</font><br> <br> <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font><br> <font color="#ff0000">{</font> Clock <b><font color="#000000">clock1</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">)</font><font color="#990000">;</font><br>   TravelClock <b><font color="#000000">clock2</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">,</font> <font color="#ff0000">"Rome"</font><font color="#990000">,</font> -1<font color="#990000">)</font><font color="#990000">;</font><br>   TravelClock <b><font color="#000000">clock3</font></b><font color="#990000">(</font><b><font color="#0000ff">false</font></b><font color="#990000">,</font> <font color="#ff0000">"Tokyo"</font><font color="#990000">,</font> 5<font color="#990000">)</font><font color="#990000">;</font><br> <br>   cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock1<font color="#990000">.</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" time: "</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock1<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font><br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock1<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font><br>   cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock2<font color="#990000">.</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" time: "</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock2<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font><br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock2<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font><br>   cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock3<font color="#990000">.</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" time: "</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock3<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font><br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clock3<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <br>       <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font><br>   <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font><br> <font color="#ff0000">}</font><br></tt></pre>
    <br>
    <br>
    <img alt="" src="../../NETB151/slides/ch11/images/polyvector.png"
      height="631" width="631"><br>
    <br>
    <br>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><tt><b><font color="#000080"> // <a href="../../NETB151/sources/ch11/clocks3.cpp">clock3.cpp</a><br> #include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
 <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iomanip&gt;</font>
 <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;string&gt;</font>
 <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;vector&gt;</font>
 <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
 
 <b><font color="#000080">#include</font></b> <font color="#ff0000">"ccc_time.h"</font>
 
 <b><font color="#0000ff">class</font></b> Clock <font color="#ff0000">{</font>
 <b><font color="#0000ff">public</font></b><font color="#990000">:</font>
    <b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font><font color="#990000">;</font>
    <b><font color="#0000ff">virtual</font></b> string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
    <b><font color="#0000ff">virtual</font></b> <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
    <font color="#009900">int</font> <b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
    <font color="#009900">bool</font> <b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
 <b><font color="#0000ff">private</font></b><font color="#990000">:</font>
    <font color="#009900">bool</font> military<font color="#990000">;</font>
 <font color="#ff0000">}</font><font color="#990000">;</font>
 
 Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Clock</font></b><font color="#990000">(</font><font color="#009900">bool</font> use_military<font color="#990000">)</font>
 <font color="#ff0000">{</font>  military <font color="#990000">=</font> use_military<font color="#990000">;</font> <font color="#ff0000">}</font>
 
 string Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> <font color="#ff0000">"Local"</font><font color="#990000">;</font>  <font color="#ff0000">}</font>
 
 <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font>  Time now<font color="#990000">;</font>
    <font color="#009900">int</font> hours <font color="#990000">=</font> now<font color="#990000">.</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>military<font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font>
    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font>
    <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>hours <font color="#990000">&gt;</font> <font color="#993399">12</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> hours <font color="#990000">-</font> <font color="#993399">12</font><font color="#990000">;</font>
    <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">return</font></b> hours<font color="#990000">;</font>
 <font color="#ff0000">}</font>
 
 <font color="#009900">int</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font>  Time now<font color="#990000">;</font>
    <b><font color="#0000ff">return</font></b> now<font color="#990000">.</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
 <font color="#ff0000">}</font>
 
 <font color="#009900">bool</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> military<font color="#990000">;</font>  <font color="#ff0000">}</font>
 
 <b><font color="#0000ff">class</font></b> TravelClock <font color="#990000">:</font> <b><font color="#0000ff">public</font></b> Clock  <font color="#ff0000">{</font>
 <b><font color="#0000ff">public</font></b><font color="#990000">:</font>
    <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><font color="#009900">bool</font> mil<font color="#990000">,</font> string loc<font color="#990000">,</font> <font color="#009900">int</font> diff<font color="#990000">)</font><font color="#990000">;</font>
    string <b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
    <font color="#009900">int</font> <b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
 <b><font color="#0000ff">private</font></b><font color="#990000">:</font>
    string location<font color="#990000">;</font>
    <font color="#009900">int</font> time_difference<font color="#990000">;</font>
 <font color="#ff0000">}</font><font color="#990000">;</font>
 
 TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><font color="#009900">bool</font> mil<font color="#990000">,</font> string loc<font color="#990000">,</font> <font color="#009900">int</font> diff<font color="#990000">)</font>
    <font color="#990000">:</font> <b><font color="#000000">Clock</font></b><font color="#990000">(</font>mil<font color="#990000">)</font>
 <font color="#ff0000">{</font>  location <font color="#990000">=</font> loc<font color="#990000">;</font>
    time_difference <font color="#990000">=</font> diff<font color="#990000">;</font>
    <b><font color="#0000ff">while</font></b> <font color="#990000">(</font>time_difference <font color="#990000">&lt;</font> <font color="#993399">0</font><font color="#990000">)</font> <br>       time_difference <font color="#990000">=</font> time_difference <font color="#990000">+</font> <font color="#993399">24</font><font color="#990000">;</font>
 <font color="#ff0000">}</font>
 
 string TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font>  <b><font color="#0000ff">return</font></b> location<font color="#990000">;</font>  <font color="#ff0000">}</font>
 
 <font color="#009900">int</font> TravelClock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
 <font color="#ff0000">{</font>  <font color="#009900">int</font> h <font color="#990000">=</font> Clock<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font><b><font color="#000000">is_military</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font>
       <b><font color="#0000ff">return</font></b> <font color="#990000">(</font>h <font color="#990000">+</font> time_difference<font color="#990000">)</font> <font color="#990000">%</font> <font color="#993399">24</font><font color="#990000">;</font>
    <b><font color="#0000ff">else</font></b>
    <font color="#ff0000">{</font>  h <font color="#990000">=</font> <font color="#990000">(</font>h <font color="#990000">+</font> time_difference<font color="#990000">)</font> <font color="#990000">%</font> <font color="#993399">12</font><font color="#990000">;</font>
       <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>h <font color="#990000">=</font><font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">)</font> <b><font color="#0000ff">return</font></b> <font color="#993399">12</font><font color="#990000">;</font>
       <b><font color="#0000ff">else</font></b> <b><font color="#0000ff">return</font></b> h<font color="#990000">;</font>
    <font color="#ff0000">}</font>
 <font color="#ff0000">}</font>
 
 <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
 <font color="#ff0000">{</font>  vector<font color="#ff0000">&lt;Clock*&gt;</font> <b><font color="#000000">clocks</font></b><font color="#990000">(</font><font color="#993399">3</font><font color="#990000">)</font><font color="#990000">;</font>
    clocks<font color="#990000">[</font><font color="#993399">0</font><font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">Clock</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">)</font><font color="#990000">;</font>
    clocks<font color="#990000">[</font><font color="#993399">1</font><font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><b><font color="#0000ff">true</font></b><font color="#990000">,</font> <font color="#ff0000">"Rome"</font><font color="#990000">,</font> <font color="#993399">-1</font><font color="#990000">)</font><font color="#990000">;</font>
    clocks<font color="#990000">[</font><font color="#993399">2</font><font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">TravelClock</font></b><font color="#990000">(</font><b><font color="#0000ff">false</font></b><font color="#990000">,</font> <font color="#ff0000">"Tokyo"</font><font color="#990000">,</font> <font color="#990000">5</font><font color="#990000">)</font><font color="#990000">;</font>
 
    <b><font color="#0000ff">for</font></b> <font color="#990000">(</font><font color="#009900">int</font> i <font color="#990000">=</font> <font color="#993399">0</font><font color="#990000">;</font> i <font color="#990000">&lt;</font> clocks<font color="#990000">.</font><b><font color="#000000">size</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font> i<font color="#990000">+</font><font color="#990000">+</font><font color="#990000">)</font>
    <font color="#ff0000">{</font> cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clocks<font color="#990000">[</font>i<font color="#990000">]</font><font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_location</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">" time: "</font> <br>           <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clocks<font color="#990000">[</font>i<font color="#990000">]</font><font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_hours</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">":"</font>
           <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setw</font></b><font color="#990000">(</font><font color="#993399">2</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">'0'</font><font color="#990000">)</font> <br>           <font color="#990000">&lt;</font><font color="#990000">&lt;</font> clocks<font color="#990000">[</font>i<font color="#990000">]</font><font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_minutes</font></b><font color="#990000">(</font><font color="#990000">)</font> <br>           <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <b><font color="#000000">setfill</font></b><font color="#990000">(</font><font color="#ff0000">' '</font><font color="#990000">)</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"\n"</font><font color="#990000">;</font>
    <font color="#ff0000">}</font>
    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
 <font color="#ff0000">}</font></tt></pre>
    <br>
    <br>
  </body>
</html>
