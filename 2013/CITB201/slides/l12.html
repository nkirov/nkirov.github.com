<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;
      charset=windows-1251">
    <meta name="Author" content="Nikolay Kirov">
    <meta name="GENERATOR" content="Mozilla/4.75 [en] (Win98; U)
      [Netscape]">
    <title>l12</title>
  </head>
  <body>
    <center>
      <h3> <b>12. Предефиниране на операции</b></h3>
    </center>
    <img alt="" src="../b5.gif" height="18" width="20">&nbsp;
    Предефиниране на операции. <br>
    &nbsp;&nbsp;&nbsp; Даване на ново значение на операция се нарича
    предефиниране (operator overloading). Операциите се предефинират за
    аргумети - обекти от даден клас, като типът на поне един от
    аргументите на бинарна операция трябва да е клас. <br>
    <b><tt><font color="#000099">// overload.cpp</font></tt></b> <br>
    <b><tt><font color="#000099">#include &lt;iostream&gt;</font></tt></b>
    <br>
    <b><tt><font color="#000099">using namespace std;</font></tt></b> <br>
    <b><tt><font color="#000099">#include "ccc_time.cpp"</font></tt></b>
    <p><b><tt><font color="#000099">/* Предефиниране на бинарна операция
            - с аргументи от клас Time и стойност от тип long */</font></tt></b>
      <br>
      <b><tt><font color="#000099">long operator-(Time a, Time b)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: пресмята броя на секундите
            между два момента от време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: a, b - два
            момента от време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: броя на секундите
            между a и b</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; return
            a.seconds_from(b);&nbsp;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#000099">/* Предефиниране на бинарна операция
            + с аргументи от клас Time и тип long и стойност от</font></tt></b>
      <br>
      <b><tt><font color="#000099">клас Time */</font></tt></b> <br>
      <b><tt><font color="#000099">Time operator+(Time a, long sec)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: пресмята момент от време,
            отдалечен на зададен брой секунди</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: a - момент от
            време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: броя на секундите</font></tt></b>
      <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; Time r = a;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; r.add_seconds(sec);</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; return r;&nbsp; }</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">/* Предефиниране на бинарна операция
            == с аргументи от клас Time и стойност от тип bool */</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">bool operator==(Time a, Time b)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: сравнява два момента от време</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: a, b - два
            момента от време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: true - ако те са
            равни</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; return a.seconds_from(b) ==
            0;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#000099">/* Предефиниране на бинарна операция
            != с аргументи от клас Time и стойност от тип bool */</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">bool operator!=(Time a, Time b)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: сравнява два момента от време</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: a, b - два
            момента от време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: true - ако те не
            са равни</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; return a.seconds_from(b) !=
            0;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#000099">/* Предефиниране на бинарна операция
            &lt;&lt; с аргументи от клас ostream и клас Time и стойност</font></tt></b>
      <br>
      <b><tt><font color="#000099">от тип ostream */</font></tt></b> <br>
      <b><tt><font color="#000099">ostream &amp;operator&lt;&lt;(ostream
            &amp;out, const Time &amp;a)</font></tt></b> <br>
      <b><tt><font color="#000099">/* ЦЕЛ: отпечатва обект от тип Time</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: out - изходен
            поток</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
a






            - момент от време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: out</font></tt></b>
      <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; out &lt;&lt; a.get_hours()
            &lt;&lt; ":";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; if (a.get_minutes() &lt;
            10) out &lt;&lt; "0";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; out &lt;&lt;
            a.get_minutes() &lt;&lt; ":";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; if (a.get_seconds() &lt;
            10) out &lt;&lt; "0";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; out &lt;&lt;
            a.get_seconds();</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; return
            out;&nbsp;&nbsp;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#000099">/* Предефиниране на унарна операция
            - префиксна форма на ++ с аргумент от клас</font></tt></b> <br>
      <b><tt><font color="#000099">Time и стойност от клас Time */</font></tt></b>
      <br>
      <b><tt><font color="#000099">Time operator++(Time &amp;a)</font></tt></b>
      <br>
      <b><tt><font color="#000099">/* ЦЕЛ: добавя към момент от време 1
            секунда</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: a - момент от
            време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: новият момент от
            време и променя a</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{ a = a + 1; return a; }</font></tt></b>
    </p>
    <p><b><tt><font color="#000099">/* Предефиниране на унарна операция
            - постфиксна форма на ++ с аргумент от клас</font></tt></b>
      <br>
      <b><tt><font color="#000099">Time и стойност от клас Time */</font></tt></b>
      <br>
      <b><tt><font color="#000099">Time operator++(Time &amp;a, int
            dummy)</font></tt></b> <br>
      <b><tt><font color="#000099">/* ЦЕЛ: добавя към момент от време 1
            минута</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ПОЛУЧАВА: a - момент от
            време</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; ВРЪЩА: непромененият
            момент от време и променя a</font></tt></b> <br>
      <b><tt><font color="#000099">*/</font></tt></b> <br>
      <b><tt><font color="#000099">{ Time b = a;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp; a = a + 60; return b;</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;</font></tt></b> <br>
      <b><tt><font color="#000099">int main()</font></tt></b> <br>
      <b><tt><font color="#000099">{&nbsp; Time now;</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; "Now it is
            " &lt;&lt; now &lt;&lt; "\n";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Time later = now + 1000;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; "A
            thousand seconds later it is " &lt;&lt; later &lt;&lt; "\n";</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; Time now2;</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; if (now == now2)</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout
            &lt;&lt; "It still is " &lt;&lt; now2 &lt;&lt; "\n";</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; if (now != now2)</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout
            &lt;&lt; "It is already " &lt;&lt; now2 &lt;&lt; "\n";</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; "Another "
            &lt;&lt; later - now2 &lt;&lt; " seconds until "</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;&lt;






            later &lt;&lt; "\n";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; now = Time();</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; "Now it is
            " &lt;&lt; now &lt;&lt; "\n";</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; "One
            second later " &lt;&lt; (++now) &lt;&lt; "\n";</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; "The same
            time " &lt;&lt; (now++);</font></tt></b> <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; cout &lt;&lt; " and 60
            seconds later " &lt;&lt; now &lt;&lt; "\n";</font></tt></b>
      <br>
      <b><tt><font color="#000099">&nbsp;&nbsp; return 0;</font></tt></b>
      <br>
      <b><tt><font color="#000099">}</font></tt></b> <br>
      &nbsp;
      <table border="" cellpadding="4" width="100%">
        <tbody>
          <tr>
            <td><b><tt><font color="#993300">Now it is 11:42:51</font></tt></b>
              <br>
              <b><tt><font color="#993300">A thousand seconds later it
                    is 11:59:31</font></tt></b> <br>
              <b><tt><font color="#993300">It still is 11:42:51</font></tt></b>
              <br>
              <b><tt><font color="#993300">Another 1000 seconds until
                    11:59:31</font></tt></b> <br>
              <b><tt><font color="#993300">Now it is 11:42:51</font></tt></b>
              <br>
              <b><tt><font color="#993300">One second later 11:42:52</font></tt></b>
              <br>
              <b><tt><font color="#993300">The same time 11:42:52 and 60
                    seconds later 11:43:52</font></tt></b></td>
          </tr>
        </tbody>
      </table>
    </p>
    <br>
    <b>**Предефиниране на операции като член-функции на клас.&nbsp;</b>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: 
normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 
0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><code><span style="font-family: 'Courier New'; font-style: 
normal; font-variant: normal; font-weight: normal; font-size: 10pt; line-height: normal;"><span class="cpp1-preprocessor" style="color: rgb(255, 0, 0);"><b>// <a href="../../NETB151/sources/ch17/overload1.cpp">overload1.cpp</a></b><br>#include 
&lt;iostream&gt;<br>#include &lt;iomanip&gt;<br></span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); 
font-weight: bold;">using</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> 
</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">namespace</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">std</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br><br>
</span><span class="cpp1-preprocessor" style="color: rgb(255, 0, 0);">#include "ccc_time.h"<br><br></span>
<span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">class</span><span class="cpp1-space" style="background-color: 
rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: 
bold;">:</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">public</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: 
rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{<br></span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">public</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">:<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">-(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">+(</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">sec</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">bool</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">==(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">bool</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">!=(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">++();</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">// prefix<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">++(</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">dummy</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">);</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">// postfix<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">friend</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">ostream</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&amp;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">ostream</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&amp;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">out</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">,</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">a</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">);</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">             <br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">};<br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Compute the number of seconds between two points in time.<br>   @param b another point in time<br>   @return the number of seconds that a is away from b<br>*/<br></span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">::</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">-(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const<br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">-&gt;</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">seconds_from</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">);<br>}<br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Compute a point in time that is some number of seconds away.<br>   @param sec the seconds to add<br>   @return a point in time that is sec seconds away from a<br>*/<br></span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">::</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">+(</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">sec</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const<br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">r</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">=</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">r</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">.</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">add_seconds</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">sec</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">);<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">r</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br>}<br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Compare two points in time<br>   @param b another point in time<br>   @return true if they are the same<br>*/<br></span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">bool</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">::</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">==(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const<br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">-&gt;</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">seconds_from</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">==</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">0</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br>}<br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Compare two points in time.<br>   @param b another point in time<br>   @return true if they are the different<br>*/<br></span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">bool</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">::</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">!=(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">const<br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">!(*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">==</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">b</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">);<br>}<br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Prefix increment by 1 second.<br>   @return the new value<br>*/<br></span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">::</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">++()</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">// prefix<br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">=</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">+</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">1</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> <br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">}<br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Postfix increment by 1 second.<br>   @return the old value<br>*/</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">    <br></span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">::</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">++(</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">dummy</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">// postfix<br></span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">t</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">=</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">=</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">*</span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">this</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">+</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">1</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">t</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br>}</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">    <br><br></span><span class="cpp1-comment" style="color: rgb(10, 36, 106); font-style: italic;">/**<br>   Print a Time object<br>   @param out an output stream<br>   @param a a point in time<br>   @return out<br>*/<br></span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">ostream</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&amp;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">operator</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">ostream</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&amp;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">out</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">,</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">a</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)<br>{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">out</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">a</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">.</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">get_hours</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">()</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">":"<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">      </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">setw</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">2</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">setfill</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-character" style="color: rgb(0, 0, 0); font-weight: bold;">'0'</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> <br>      </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">a</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">.</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">get_minutes</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">()</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">":"<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">      </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">setw</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">2</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">a</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">.</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">get_seconds</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">()</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">setfill</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-character" style="color: rgb(0, 0, 0); font-weight: bold;">' '</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">);<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">out</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br>}</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> <br><br></span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">int</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">main</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">()<br>{</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">  </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"now: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">later</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">=</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">+</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">1000</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"later: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">later</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">Time_new</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">if</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">==</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">      </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"now == now2: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">if</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">(</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">!=</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">)<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">      </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"now != now2 "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"now++: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">++</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> <br>        </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"  ++now2: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">++</span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"now: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">" now2: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br></span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">cout</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-string" style="color: rgb(255, 0, 0); font-weight: bold;">"later - now2: "</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">later</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">-</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">now2</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">&lt;&lt;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-identifier" style="color: rgb(0, 0, 0);">endl</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">   <br>   </span><span class="cpp1-reservedword" style="color: rgb(58, 110, 165); font-weight: bold;">return</span><span class="cpp1-space" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> </span><span class="cpp1-number" style="color: rgb(128, 0, 128); font-weight: bold;">0</span><span class="cpp1-symbol" style="color: rgb(153, 51, 0); font-weight: bold;">;<br>}<br><br></span></span></code></pre>
    Сега можем да заменим функциите, които заместваха операциите от
    STL-реализацията на свързан списък (<a
      href="../../NETB151/sources/ch16/list2.cpp"><tt>list2.cpp</tt></a>)
    с предефинирани операции:<br>
    <p><b><tt><font color="#006600">bool operator!=(Iterator a, Iterator
            b); /* </font><font color="#000000">външна за класа функция
            */</font></tt></b> <br>
      <b><tt><font color="#006600">bool Iterator::operator!=(Iterator
            b);&nbsp;&nbsp; /* </font><font color="#000000">член-функция




            */</font></tt></b> </p>
    <p><b><tt><font color="#006600">string Iterator::operator*() const</font></tt></b>
      <br>
      <b><tt><font color="#006600">{&nbsp; assert(position != NULL);</font></tt></b>
      <br>
      <b><tt><font color="#006600">&nbsp;&nbsp; return
            position-&gt;data;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#006600">void Iterator::operator++(int dummy)</font></tt></b>
      <br>
      <b><tt><font color="#006600">{&nbsp; assert(position != NULL);</font></tt></b>
      <br>
      <b><tt><font color="#006600">&nbsp;&nbsp; position =
            position-&gt;next; }</font></tt></b> </p>
    <p><b><tt><font color="#006600">void Iterator::operator--(int dummy)</font></tt></b>
      <br>
      <b><tt><font color="#006600">{&nbsp; if (position == NULL)&nbsp;
            position = last;</font></tt></b> <br>
      <b><tt><font color="#006600">&nbsp;&nbsp;
            else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
position





            = position-&gt;previous;</font></tt></b> <br>
      <b><tt><font color="#006600">&nbsp;&nbsp; assert(position !=
            NULL);&nbsp;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#006600">bool Iterator::operator!=(Iterator
            b) const</font></tt></b> <br>
      <b><tt><font color="#006600">{&nbsp; return position !=
            b.position;&nbsp;&nbsp; }</font></tt></b> </p>
    <p><b><tt><font color="#006600">bool Iterator::operator==(Iterator
            b) const</font></tt></b> <br>
      <b><tt><font color="#006600">{&nbsp; return position ==
            b.position;&nbsp;&nbsp;&nbsp;</font></tt></b> </p>
    <hr size="2" width="100%">
    <p><img alt=""
src="file:///C:/Documents%20and%20Settings/Kirov/My%20Documents/GitHub/nkirov.github.com/2013/CITB201/b5.gif"
        height="18" width="20"> <b>Управление на паметта<br>
      </b></p>
    <p>Ще разгледаме примера <a
        href="../../NETB151/sources/ch10/department.cpp"
        style="font-family: 'Times New Roman'; font-size: medium;
        font-style: normal; font-variant: normal; font-weight: normal;
        letter-spacing: normal; line-height: normal; orphans: auto;
        text-align: left; text-indent: 0px; text-transform: none;
        white-space: normal; widows: auto; word-spacing: 0px;
        -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;
        background-color: rgb(255, 255, 255);"><font size="+1"><span
            style="font-family: monospace;">department.cpp</span></font></a><span
        style="font-family: 'Times New Roman'; font-size: medium;
        font-style: normal; font-variant: normal; font-weight: normal;
        letter-spacing: normal; line-height: normal; orphans: auto;
        text-align: left; text-indent: 0px; text-transform: none;
        white-space: normal; widows: auto; word-spacing: 0px;
        -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;
        background-color: rgb(255, 255, 255);"><font size="+1"><span
            style="font-family: monospace;">.<br>
          </span></font></span></p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; 
letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: 
none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: 
rgb(255, 255, 255);"><span style="color: rgb(51, 51, 255);">class</span> Department {<br>   ...<br><span style="color: rgb(51, 51, 255);">private:</span><br>   
string name;<br>   Employee* receptionist;<br>};<br><br>Department::Department(string n, Employee e)<br>{  name = n;<br>   
receptionist = <span style="color: rgb(51, 51, 255);">new </span>Employee(e.get_name(), e.get_salary());<br>}<br><br>/* second constructor */<br>
Department::Department(string n)<br>{  name = n;<br>   receptionist = NULL;<br>}<br><br></pre>
    <p><b>** Деструктор</b><br>
    </p>
    <p>Деструкторът е специална член-функция, която се извиква
      автоматично когато обектът излезе от обхват.<br>
      Деструктурът на класа <tt>Department </tt>трябва да унищожи
      създадения от конструктора обект:<br>
    </p>
    <tt>Department::~Department()</tt><tt><br>
    </tt><tt>{ </tt><tt><span style="color: rgb(51, 51, 255);">delete</span></tt><tt>
      receptionist;</tt><tt><br>
    </tt><tt>} </tt>
    <p><b>** Предефиниране на операция за присвояване<br>
      </b></p>
    <p>Нека имаме следните дефиниции:<b><br>
      </b></p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font size="+1">Department qc("Quality Control", Employee("Tester, Tina", 50000));<br>Department dept("Shipping", Employee("Hacker, Harry", 35000));</font></pre>
    <p>и след това приложим операция присвояване (почленно копиране)<b><br>
      </b></p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font size="+1">dept = qc;</font></pre>
    <p>Това присвоявано води до загуба на памет (memory leak)! Когато
      един от обектите излезе от обхват, получаваме висящ указател!<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img alt="" src="../../NETB151/slides/ch17/images/department_assignment.png" height="679" width="486"><br><b><br></b></pre>
    <p>Затова трябва да предефинираме операция присвояване за обекти от
      класа<font size="+1"><font size="+1"> </font></font><font
        size="+1"><tt>Employee</tt></font></p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Department&amp; Department::<span style="color: rgb(51, 51, 255);">operator</span>=(<span style="color: rgb(51, 51, 255);">const</span> Department&amp; b)<br>{  if (<span style="color: rgb(51, 51, 255);">this</span> != &amp;b)<br>   {  name = b.name;<br>      <span style="color: rgb(51, 51, 255);">delete</span> receptionist;<br>      <span style="color: rgb(51, 51, 255);">if</span> (b.receptionist == <span style="color: rgb(51, 51, 255);">NULL</span>) receptionist == <span style="color: rgb(51, 51, 255);">NULL</span>;<br>      <span style="color: rgb(51, 51, 255);">else</span><br>         receptionist = <span style="color: rgb(51, 51, 255);">new</span> Employee(b.receptionist-&gt;get_name(),<br>         			b.receptionist-&gt;get_salary());<br>    }<br>    <span style="color: rgb(51, 51, 255);">return</span> *<span style="color: rgb(51, 51, 255);">this</span>;<br>}</pre>
    <p>Корираме данните, които не са указатели (в случая <tt>name</tt>)
      от обект <tt>b</tt> в <tt>*this</tt>, изтриваме указателя <tt>receptionist</tt>
      от <tt>*this</tt> и създаваме нов обект от тип <tt>Employee</tt>
      за <tt>*this</tt>, копие на обекта<tt> *</tt><tt><tt><tt>receptionist</tt></tt>
        от </tt><tt><tt>b</tt>.&nbsp;</tt><tt> <br>
      </tt></p>
    <p>Функцията за предефиниране трябва да е член-функция (защо)?<b><br>
      </b></p>
    <p><b>** Конструктор за копиране</b><br>
    </p>
    <p>Предназначението на операция присвояване е да промени съшествуващ
      обект, като го направи същия, както друг обект и не е подходящ за
      конструиране на нов обект. Напр. в оператора<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Department dept = qc; // not <font size="+1">assignment operator!</font></pre>
    <p>не може да се използва ( и не е) операция присвояване. Правилното
      конструиране на обект, копие на друг обект е: <br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Department dept(qc);</pre>
    <p>т.е. като се извика конструктор за копиране. За всеки клас в
      езика С++ има такъв конструктор, но той действа с почленно
      копиране и възникава същия проблем, както при операция
      присвояване. Решението е да се напише конструктор за копиране:<br>
    </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Department::Department(<span style="color: rgb(51, 51, 255);">const</span> Department&amp; b)<br>{  name = b.name;<br>   <span style="color: rgb(51, 51, 255);">if</span> (b.receptionist == NULL) receptionist = NULL;<br>   <span style="color: rgb(51, 51, 255);">else</span><br>      receptionist = <span style="color: rgb(51, 51, 255);">new</span> Employee(b.receptionist-&gt;get_name(),<br>         			b.receptionist-&gt;get_salary());<br>}</pre>
    <p>Конструктор за копиране се вика и когато се предава
      параметър-стойност на функция, напр.<br>
    </p>
    <p><tt>void print(Department d)</tt><tt><br>
      </tt><tt>{ ... }</tt></p>
    <p><tt>Department dep("Administration")</tt><tt><br>
      </tt><tt>...</tt><tt><br>
      </tt><tt>print(dep);</tt><tt><br>
      </tt><tt>....</tt><br>
    </p>
    <p><br>
    </p>
    <p> </p>
    <pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><tt>// <a href="../../NETB151/sources/ch17/department.cpp"><b>department.cpp</b></a><br>001: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;string&gt;</font>
002: <b><font color="#000080">#include</font></b> <font color="#ff0000">&lt;iostream&gt;</font>
004: <b><font color="#0000ff">using</font></b> <b><font color="#0000ff">namespace</font></b> std<font color="#990000">;</font>
005: 
006: <b><font color="#000080">#include</font></b> <font color="#ff0000">"ccc_empl.h"</font>
008: <i><font color="#9a1900">/**</font></i>
009: <i><font color="#9a1900">   A department in an organization.</font></i>
010: <i><font color="#9a1900">*/</font></i>
011: <b><font color="#0000ff">class</font></b> Department <font color="#ff0000">{</font>
013: <b><font color="#0000ff">public</font></b><font color="#990000">:</font>
014:    <b><font color="#000000">Department</font></b><font color="#990000">(</font>string n<font color="#990000">)</font><font color="#990000">;</font>
015:    <b><font color="#000000">Department</font></b><font color="#990000">(</font>string n<font color="#990000">,</font> Employee e<font color="#990000">)</font><font color="#990000">;</font>
016:    <font color="#990000">~</font><b><font color="#000000">Department</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
017:    Department<font color="#990000">&amp;</font> <b><font color="#0000ff">operator</font></b><font color="#990000">=</font><font color="#990000">(</font><b><font color="#0000ff">const</font></b> Department<font color="#990000">&amp;</font> b<font color="#990000">)</font><font color="#990000">;</font>
018:    <b><font color="#000000">Department</font></b><font color="#990000">(</font><b><font color="#0000ff">const</font></b> Department<font color="#990000">&amp;</font> b<font color="#990000">)</font><font color="#990000">;</font>
019:    <font color="#009900">void</font> <b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b><font color="#990000">;</font>
020: <b><font color="#0000ff">private</font></b><font color="#990000">:</font>
021:    string name<font color="#990000">;</font>
022:    Employee<font color="#990000">*</font> receptionist<font color="#990000">;</font>
023: <font color="#ff0000">}</font><font color="#990000">;</font>
024: 
025: <i><font color="#9a1900">/**</font></i>
026: <i><font color="#9a1900">   Constructs a department with a given name and no receptionist.</font></i>
027: <i><font color="#9a1900">   @param n the department name</font></i>
028: <i><font color="#9a1900">*/</font></i>
029: Department<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Department</font></b><font color="#990000">(</font>string n<font color="#990000">)</font>
030: <font color="#ff0000">{</font>  name <font color="#990000">=</font> n<font color="#990000">;</font>
032:    receptionist <font color="#990000">=</font> NULL<font color="#990000">;</font>
034:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Constructor: "</font><font color="#990000">;</font>
035:    <b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
036: <font color="#ff0000">}</font>
037: 
038: <i><font color="#9a1900">/**</font></i>
039: <i><font color="#9a1900">   Constructs a department with a given name and receptionist.</font></i>
040: <i><font color="#9a1900">   @param n the department name</font></i>
041: <i><font color="#9a1900">   @param e the receptionist</font></i>
042: <i><font color="#9a1900">*/</font></i>
043: Department<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Department</font></b><font color="#990000">(</font>string n<font color="#990000">,</font> Employee e<font color="#990000">)</font>
044: <font color="#ff0000">{</font>  name <font color="#990000">=</font> n<font color="#990000">;</font>
046:    receptionist <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">Employee</font></b><font color="#990000">(</font>e<font color="#990000">.</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">,</font> e<font color="#990000">.</font><b><font color="#000000">get_salary</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>  
048:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Constructor: "</font><font color="#990000">;</font>
049:    <b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
050: <font color="#ff0000">}</font>
051: 
052: <i><font color="#9a1900">/**</font></i>
053: <i><font color="#9a1900">   Deletes the Employee object that this Department</font></i>
054: <i><font color="#9a1900">   object manages.</font></i>
055: <i><font color="#9a1900">*/</font></i>
056: Department<font color="#990000">:</font><font color="#990000">:</font><font color="#990000">~</font><b><font color="#000000">Department</font></b><font color="#990000">(</font><font color="#990000">)</font>
057: <font color="#ff0000">{</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Destructor: "</font><font color="#990000">;</font>
059:    <b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
061:    <b><font color="#0000ff">delete</font></b> receptionist<font color="#990000">;</font> <br>062: <font color="#ff0000">}</font>
063: 
064: <i><font color="#9a1900">/**</font></i>
065: <i><font color="#9a1900">   Constructs a Department object as a copy of another</font></i>
066: <i><font color="#9a1900">   Department object.</font></i>
067: <i><font color="#9a1900">   @param b the object to copy</font></i>
068: <i><font color="#9a1900">*/</font></i>
069: Department<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">Department</font></b><font color="#990000">(</font><b><font color="#0000ff">const</font></b> Department<font color="#990000">&amp;</font> b<font color="#990000">)</font>
070: <font color="#ff0000">{</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Copy constructor: "</font><font color="#990000">;</font>
072:    b<font color="#990000">.</font><b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
073: 
074:    name <font color="#990000">=</font> b<font color="#990000">.</font>name<font color="#990000">;</font>
075:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>b<font color="#990000">.</font>receptionist <font color="#990000">=</font><font color="#990000">=</font> NULL<font color="#990000">)</font> receptionist <font color="#990000">=</font> NULL<font color="#990000">;</font>
077:    <b><font color="#0000ff">else</font></b>
078:       receptionist <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">Employee</font></b><font color="#990000">(</font>b<font color="#990000">.</font>receptionist<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">,</font>
079:          b<font color="#990000">.</font>receptionist<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_salary</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
080: <font color="#ff0000">}</font>
081: 
082: <i><font color="#9a1900">/**</font></i>
083: <i><font color="#9a1900">   Sets this Department object to a copy of another</font></i>
084: <i><font color="#9a1900">   Department object.</font></i>
085: <i><font color="#9a1900">   @param b the object to copy</font></i>
086: <i><font color="#9a1900">*/</font></i>
087: Department<font color="#990000">&amp;</font> Department<font color="#990000">:</font><font color="#990000">:</font><b><font color="#0000ff">operator</font></b><font color="#990000">=</font><font color="#990000">(</font><b><font color="#0000ff">const</font></b> Department<font color="#990000">&amp;</font> b<font color="#990000">)</font>
088: <font color="#ff0000">{</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"Assignment: "</font><font color="#990000">;</font>
090:    <b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
091:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"= "</font><font color="#990000">;</font>
092:    b<font color="#990000">.</font><b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
093:    
094:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font><b><font color="#0000ff">this</font></b> <font color="#990000">!</font><font color="#990000">=</font> <font color="#990000">&amp;</font> b<font color="#990000">)</font>
095:    <font color="#ff0000">{</font>  name <font color="#990000">=</font> b<font color="#990000">.</font>name<font color="#990000">;</font>
097:       <b><font color="#0000ff">delete</font></b> receptionist<font color="#990000">;</font>
098:       <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>b<font color="#990000">.</font>receptionist <font color="#990000">=</font><font color="#990000">=</font> NULL<font color="#990000">)</font> receptionist <font color="#990000">=</font> NULL<font color="#990000">;</font>
100:       <b><font color="#0000ff">else</font></b>
101:          receptionist <font color="#990000">=</font> <b><font color="#0000ff">new</font></b> <b><font color="#000000">Employee</font></b><font color="#990000">(</font>b<font color="#990000">.</font>receptionist<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">,</font>
102:             b<font color="#990000">.</font>receptionist<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_salary</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
103:    <font color="#ff0000">}</font>
104:    <b><font color="#0000ff">return</font></b> <font color="#990000">*</font><b><font color="#0000ff">this</font></b><font color="#990000">;</font>
105: <font color="#ff0000">}</font>
106: 
107: <i><font color="#9a1900">/**</font></i>
108: <i><font color="#9a1900">   Prints a description of this department.</font></i>
109: <i><font color="#9a1900">*/</font></i>
110: <font color="#009900">void</font> Department<font color="#990000">:</font><font color="#990000">:</font><b><font color="#000000">print</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000ff">const</font></b>
111: <font color="#ff0000">{</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"[name="</font> <font color="#990000">&lt;</font><font color="#990000">&lt;</font> name <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">",receptionist="</font><font color="#990000">;</font>
113:    <b><font color="#0000ff">if</font></b> <font color="#990000">(</font>receptionist <font color="#990000">=</font><font color="#990000">=</font> NULL<font color="#990000">)</font>  cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"NULL"</font><font color="#990000">;</font>
115:    <b><font color="#0000ff">else</font></b> cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> receptionist<font color="#990000">-</font><font color="#990000">&gt;</font><b><font color="#000000">get_name</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
117:    cout <font color="#990000">&lt;</font><font color="#990000">&lt;</font> <font color="#ff0000">"]\n"</font><font color="#990000">;</font>
118: <font color="#ff0000">}</font>
119: 
120: <font color="#009900">int</font> <b><font color="#000000">main</font></b><font color="#990000">(</font><font color="#990000">)</font>
121: <font color="#ff0000">{</font>  Department <b><font color="#000000">shipping</font></b><font color="#990000">(</font><font color="#ff0000">"Shipping"</font><font color="#990000">)</font><font color="#990000">;</font>
123:    Department <b><font color="#000000">qc</font></b><font color="#990000">(</font><font color="#ff0000">"Quality Control"</font><font color="#990000">,</font> <br>124:               <b><font color="#000000">Employee</font></b><font color="#990000">(</font><font color="#ff0000">"Tester, Tina"</font><font color="#990000">,</font> <font color="#993399">50000</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
125:    Department <b><font color="#000000">dept</font></b><font color="#990000">(</font>qc<font color="#990000">)</font><font color="#990000">;</font> <br>126:    dept <font color="#990000">=</font> shipping<font color="#990000">;</font>
127:    <b><font color="#0000ff">return</font></b> <font color="#993399">0</font><font color="#990000">;</font>
128: <font color="#ff0000">}</font>
</tt></pre>
    <br class="Apple-interchange-newline">
    <br>
    <hr width="100%">
  </body>
</html>
